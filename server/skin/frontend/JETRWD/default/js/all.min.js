var bp={xsmall:479,small:599,medium:770,large:979,xlarge:1199};Varien.searchForm.prototype.initialize=function(e,t,i){this.form=$(e),this.field=$(t),this.emptyText=i,Event.observe(this.form,"submit",this.submit.bind(this)),Event.observe(this.field,"change",this.change.bind(this)),Event.observe(this.field,"focus",this.focus.bind(this)),Event.observe(this.field,"blur",this.blur.bind(this)),this.blur()},Varien.searchForm.prototype.submit=function(e){return this.field.value!=this.emptyText&&""!=this.field.value||(Event.stop(e),this.field.addClassName("validation-failed"),this.field.focus(),!1)},Varien.searchForm.prototype.change=function(e){this.field.value!=this.emptyText&&""!=this.field.value&&this.field.hasClassName("validation-failed")&&this.field.removeClassName("validation-failed")},Varien.searchForm.prototype.blur=function(e){this.field.hasClassName("validation-failed")&&this.field.removeClassName("validation-failed")};var PointerManager={MOUSE_POINTER_TYPE:"mouse",TOUCH_POINTER_TYPE:"touch",POINTER_EVENT_TIMEOUT_MS:500,standardTouch:!1,touchDetectionEvent:null,lastTouchType:null,pointerTimeout:null,pointerEventLock:!1,getPointerEventsSupported:function(){return this.standardTouch},getPointerEventsInputTypes:function(){return window.navigator.pointerEnabled?{MOUSE:"mouse",TOUCH:"touch",PEN:"pen"}:window.navigator.msPointerEnabled?{MOUSE:4,TOUCH:2,PEN:3}:{}},getPointer:function(){return Modernizr.ios?this.TOUCH_POINTER_TYPE:this.lastTouchType?this.lastTouchType:Modernizr.touch?this.TOUCH_POINTER_TYPE:this.MOUSE_POINTER_TYPE},setPointerEventLock:function(){this.pointerEventLock=!0},clearPointerEventLock:function(){this.pointerEventLock=!1},setPointerEventLockTimeout:function(){var e=this;this.pointerTimeout&&clearTimeout(this.pointerTimeout),this.setPointerEventLock(),this.pointerTimeout=setTimeout(function(){e.clearPointerEventLock()},this.POINTER_EVENT_TIMEOUT_MS)},triggerMouseEvent:function(e){this.lastTouchType!=this.MOUSE_POINTER_TYPE&&(this.lastTouchType=this.MOUSE_POINTER_TYPE,$j(window).trigger("mouse-detected",e))},triggerTouchEvent:function(e){this.lastTouchType!=this.TOUCH_POINTER_TYPE&&(this.lastTouchType=this.TOUCH_POINTER_TYPE,$j(window).trigger("touch-detected",e))},initEnv:function(){window.navigator.pointerEnabled?(this.standardTouch=!0,this.touchDetectionEvent="pointermove"):window.navigator.msPointerEnabled?(this.standardTouch=!0,this.touchDetectionEvent="MSPointerMove"):this.touchDetectionEvent="touchstart"},wirePointerDetection:function(){var e=this;this.standardTouch?$j(window).on(this.touchDetectionEvent,function(t){switch(t.originalEvent.pointerType){case e.getPointerEventsInputTypes().MOUSE:e.triggerMouseEvent(t);break;case e.getPointerEventsInputTypes().TOUCH:case e.getPointerEventsInputTypes().PEN:e.triggerTouchEvent(t)}}):($j(window).on(this.touchDetectionEvent,function(t){e.pointerEventLock||(e.setPointerEventLockTimeout(),e.triggerTouchEvent(t))}),$j(document).on("mouseover",function(t){e.pointerEventLock||(e.setPointerEventLockTimeout(),e.triggerMouseEvent(t))}))},init:function(){this.initEnv(),this.wirePointerDetection()}},MenuManager={mouseEnterEventObserved:!1,touchEventOrderIncorrect:!1,cancelNextTouch:!1,TouchScroll:{TOUCH_SCROLL_THRESHOLD:20,touchStartPosition:null,reset:function(){this.touchStartPosition=$j(window).scrollTop()},shouldCancelTouch:function(){if(null==this.touchStartPosition)return!1;var e=$j(window).scrollTop()-this.touchStartPosition;return Math.abs(e)>this.TOUCH_SCROLL_THRESHOLD}},useSmallScreenBehavior:function(){return Modernizr.mq("screen and (max-width:"+bp.medium+"px)")},toggleMenuVisibility:function(e){var t=$j(e),i=t.closest("li");this.useSmallScreenBehavior()||(i.siblings().removeClass("menu-active").find("li").removeClass("menu-active"),i.find("li.menu-active").removeClass("menu-active")),i.toggleClass("menu-active")},init:function(){this.wirePointerEvents()},wirePointerEvents:function(){var e=this,t=$j("#nav a.has-children"),i=$j("#nav li");if(PointerManager.getPointerEventsSupported()){var n=window.navigator.pointerEnabled?"pointerenter":"mouseenter",o=window.navigator.pointerEnabled?"pointerleave":"mouseleave",a=window.navigator.pointerEnabled;i.on(n,function(t){void 0!==t.originalEvent.pointerType&&t.originalEvent.pointerType!=PointerManager.getPointerEventsInputTypes().MOUSE||(a?e.mouseEnterAction(t,this):e.PartialPointerEventsSupport.mouseEnterAction(t,this))}).on(o,function(t){void 0!==t.originalEvent.pointerType&&t.originalEvent.pointerType!=PointerManager.getPointerEventsInputTypes().MOUSE||(a?e.mouseLeaveAction(t,this):e.PartialPointerEventsSupport.mouseLeaveAction(t,this))}),a||t.on("MSPointerDown",function(e){$j(this).data("pointer-type",e.originalEvent.pointerType)}),t.on("click",function(t){var i=a?t.originalEvent.pointerType:$j(this).data("pointer-type");void 0===i||i==PointerManager.getPointerEventsInputTypes().MOUSE?e.mouseClickAction(t,this):a?e.touchAction(t,this):e.PartialPointerEventsSupport.touchAction(t,this),$j(this).removeData("pointer-type")})}else i.on("mouseenter",function(t){e.mouseEnterEventObserved=!0,e.cancelNextTouch=!0,e.mouseEnterAction(t,this)}).on("mouseleave",function(t){e.mouseLeaveAction(t,this)}),$j(window).on("touchstart",function(t){e.mouseEnterEventObserved&&(e.touchEventOrderIncorrect=!0,e.mouseEnterEventObserved=!1),e.TouchScroll.reset()}),t.on("touchend",function(t){$j(this).data("was-touch",!0),t.preventDefault(),e.TouchScroll.shouldCancelTouch()||(e.touchEventOrderIncorrect?e.PartialTouchEventsSupport.touchAction(t,this):e.touchAction(t,this))}).on("click",function(t){return $j(this).data("was-touch")?void t.preventDefault():void e.mouseClickAction(t,this)})},PartialPointerEventsSupport:{mouseleaveLock:0,mouseEnterAction:function(e,t){if(MenuManager.useSmallScreenBehavior())return void MenuManager.mouseEnterAction(e,t);e.stopPropagation();var i=$j(t);i.hasClass("level0")||(this.mouseleaveLock=i.parents("li").length+1),MenuManager.toggleMenuVisibility(t)},mouseLeaveAction:function(e,t){return MenuManager.useSmallScreenBehavior()?void MenuManager.mouseLeaveAction(e,t):this.mouseleaveLock>0?void this.mouseleaveLock--:void $j(t).removeClass("menu-active")},touchAction:function(e,t){return MenuManager.useSmallScreenBehavior()?void MenuManager.touchAction(e,t):(e.preventDefault(),void this.mouseleaveLock++)}},PartialTouchEventsSupport:{touchAction:function(e,t){return MenuManager.cancelNextTouch?void(MenuManager.cancelNextTouch=!1):void MenuManager.toggleMenuVisibility(t)}},mouseEnterAction:function(e,t){this.useSmallScreenBehavior()||$j(t).addClass("menu-active")},mouseLeaveAction:function(e,t){this.useSmallScreenBehavior()||$j(t).removeClass("menu-active")},mouseClickAction:function(e,t){this.useSmallScreenBehavior()&&(e.preventDefault(),this.toggleMenuVisibility(t))},touchAction:function(e,t){this.toggleMenuVisibility(t),e.preventDefault()}};$j(document).ready(function(){function e(){var e=$j(window).width();$j("ul.level0").each(function(){var t=$j(this);t.addClass("position-test"),t.removeClass("spill");var i=t.outerWidth(),n=t.offset().left;t.removeClass("position-test"),n+i>e&&t.addClass("spill")})}$j(window),$j(document),$j("body");Modernizr.addTest("ios",function(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)}),PointerManager.init(),$j(".change").click(function(e){$j(this).toggleClass("active"),e.stopPropagation()}),$j(document).click(function(e){$j(e.target).hasClass(".change")||$j(".change").removeClass("active")});var t=$j(".skip-content"),i=$j(".skip-link");i.on("click",function(e){e.preventDefault();var n=$j(this),o=n.attr("data-target-element")?n.attr("data-target-element"):n.attr("href"),a=$j(o),r=a.hasClass("skip-active")?1:0;i.removeClass("skip-active"),t.removeClass("skip-active"),r?n.removeClass("skip-active"):(n.addClass("skip-active"),a.addClass("skip-active"))}),$j("#header-cart").on("click",".skip-link-close",function(e){var t=$j(this).parents(".skip-content"),i=t.siblings(".skip-link");t.removeClass("skip-active"),i.removeClass("skip-active"),e.preventDefault()}),MenuManager.init(),e(),$j(window).on("delayed-resize",e),enquire.register("(max-width: "+bp.medium+"px)",{match:function(){$j(".page-header-container .store-language-container").prepend($j(".form-language"))},unmatch:function(){$j(".header-language-container .store-language-container").prepend($j(".form-language"))}}),enquire.register("screen and (min-width: "+(bp.medium+1)+"px)",{match:function(){$j(".menu-active").removeClass("menu-active"),$j(".sub-menu-active").removeClass("sub-menu-active"),$j(".skip-active").removeClass("skip-active")},unmatch:function(){$j(".menu-active").removeClass("menu-active"),$j(".sub-menu-active").removeClass("sub-menu-active"),$j(".skip-active").removeClass("skip-active")}});var n=$j(".media-list").find("a"),o=$j(".primary-image").find("img");if(n.length&&n.on("click",function(e){e.preventDefault();var t=$j(this);o.attr("src",t.attr("href"))}),jQuery.fn.toggleSingle=function(e){var t=$j.extend({destruct:!1},e);return this.each(function(){t.destruct?($j(this).off("click"),$j(this).removeClass("active").next().removeClass("no-display")):($j(this).on("click",function(){$j(this).toggleClass("active").next().toggleClass("no-display")}),$j(this).next().addClass("no-display"))})},$j(".toggle-content").each(function(){function e(e,t){var i,n=t.index(e);for(i=0;i<s.length;i++)s[i].removeClass("current"),s[i].eq(n).addClass("current")}var t=jQuery(this),i=t.hasClass("tabs"),n=(t.hasClass("accordion"),t.hasClass("open")),o=t.children("dl:first"),a=o.children("dt"),r=o.children("dd"),s=new Array(a,r);if(i){var c=jQuery('<ul class="toggle-tabs"></ul>');a.each(function(){var e=jQuery(this),t=jQuery("<li></li>");t.html(e.html()),c.append(t)}),c.insertBefore(o);var u=c.children();s.push(u)}var l;for(l=0;l<s.length;l++)s[l].filter(":last").addClass("last");a.on("click",function(i){jQuery(this).hasClass("current")&&t.hasClass("accordion-open")?t.removeClass("accordion-open"):t.addClass("accordion-open"),e(jQuery(this),a)}),i&&(u.on("click",function(t){e(jQuery(this),u)}),u.eq(0).trigger("click")),n&&a.eq(0).trigger("click")}),$j(".col-left-first > .block").length&&$j(".category-products").length&&enquire.register("screen and (max-width: "+bp.medium+"px)",{match:function(){$j(".col-left-first").insertBefore($j(".category-products"))},unmatch:function(){$j(".col-left-first").insertBefore($j(".col-main"))}}),$j(".main-container.col3-layout").length>0&&enquire.register("screen and (max-width: 1000px)",{match:function(){var e=$j(".col-right"),t=$j(".col-wrapper");e.appendTo(t)},unmatch:function(){var e=$j(".col-right"),t=$j(".main");e.appendTo(t)}}),enquire.register("(max-width: "+bp.medium+"px)",{setup:function(){this.toggleElements=$j(".col-left-first .block:not(.block-layered-nav) .block-title, .col-left-first .block-layered-nav .block-subtitle--filter, .sidebar:not(.col-left-first) .block .block-title")},match:function(){this.toggleElements.toggleSingle()},unmatch:function(){this.toggleElements.toggleSingle({destruct:!0})}}),$j("body.checkout-onepage-index").length&&enquire.register("(max-width: "+bp.large+"px)",{match:function(){$j("#checkout-step-review").prepend($j("#checkout-progress-wrapper"))},unmatch:function(){$j(".col-right").prepend($j("#checkout-progress-wrapper"))}}),$j("body.checkout-cart-index").length&&$j('input[name^="cart"]').focus(function(){$j(this).siblings("button").fadeIn()}),$j(".a-left").length&&enquire.register("(max-width: "+bp.large+"px)",{match:function(){$j(".gift-info").each(function(){$j(this).next("td").children("textarea").appendTo(this).children()})},unmatch:function(){$j(".left-note").each(function(){$j(this).prev("td").children("textarea").appendTo(this).children()})}}),$j(".products-grid").length){var a=function(){$j(".products-grid").each(function(){var e=[],t=[];productGridElements=$j(this).children("li"),productGridElements.each(function(i){"none"!=$j(this).css("clear")&&0!=i&&(e.push(t),t=[]),t.push(this),productGridElements.length==i+1&&e.push(t)}),$j.each(e,function(){var e=0;$j.each(this,function(){$j(this).find(".product-info").css({"min-height":"","padding-bottom":""});var t=$j(this).find(".product-info").height(),i=10,n=$j(this).find(".product-info .actions").height(),o=t+i+n;o>e&&(e=o),$j(this).find(".product-info").css("padding-bottom",n+"px")}),$j.each(this,function(){$j(this).find(".product-info").css("min-height",e)})})})};a(),$j(window).on("delayed-resize",function(e,t){a()})}var r;$j(window).resize(function(e){clearTimeout(r),r=setTimeout(function(){$j(window).trigger("delayed-resize",e)},250)})});var ProductMediaManager={IMAGE_ZOOM_THRESHOLD:20,imageWrapper:null,destroyZoom:function(){$j(".zoomContainer").remove(),$j(".product-image-gallery .gallery-image").removeData("elevateZoom")},createZoom:function(e){if(ProductMediaManager.destroyZoom(),!(PointerManager.getPointer()==PointerManager.TOUCH_POINTER_TYPE||Modernizr.mq("screen and (max-width:"+bp.medium+"px)")||e.length<=0)){if(e[0].naturalWidth&&e[0].naturalHeight){var t=e[0].naturalWidth-e.width()-ProductMediaManager.IMAGE_ZOOM_THRESHOLD,i=e[0].naturalHeight-e.height()-ProductMediaManager.IMAGE_ZOOM_THRESHOLD;if(t<0&&i<0)return void e.parents(".product-image").removeClass("zoom-available");e.parents(".product-image").addClass("zoom-available")}e.elevateZoom()}},swapImage:function(e){e=$j(e),e.addClass("gallery-image"),ProductMediaManager.destroyZoom();var t=$j(".product-image-gallery");e[0].complete?(t.find(".gallery-image").removeClass("visible"),t.append(e),e.addClass("visible"),ProductMediaManager.createZoom(e)):(t.addClass("loading"),t.append(e),imagesLoaded(e,function(){t.removeClass("loading"),t.find(".gallery-image").removeClass("visible"),e.addClass("visible"),ProductMediaManager.createZoom(e)}))},wireThumbnails:function(){$j(".product-image-thumbs .thumb-link").click(function(e){e.preventDefault();var t=$j(this),i=$j("#image-"+t.data("image-index"));ProductMediaManager.swapImage(i)})},initZoom:function(){ProductMediaManager.createZoom($j(".gallery-image.visible"))},init:function(){ProductMediaManager.imageWrapper=$j(".product-img-box"),$j(window).on("delayed-resize",function(e,t){ProductMediaManager.initZoom()}),ProductMediaManager.initZoom(),ProductMediaManager.wireThumbnails(),$j(document).trigger("product-media-loaded",ProductMediaManager)}};$j(document).ready(function(){ProductMediaManager.init()});null//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJicCIsInhzbWFsbCIsInNtYWxsIiwibWVkaXVtIiwibGFyZ2UiLCJ4bGFyZ2UiLCJWYXJpZW4iLCJzZWFyY2hGb3JtIiwicHJvdG90eXBlIiwiaW5pdGlhbGl6ZSIsImZvcm0iLCJmaWVsZCIsImVtcHR5VGV4dCIsInRoaXMiLCIkIiwiRXZlbnQiLCJvYnNlcnZlIiwic3VibWl0IiwiYmluZCIsImNoYW5nZSIsImZvY3VzIiwiYmx1ciIsImV2ZW50IiwidmFsdWUiLCJzdG9wIiwiYWRkQ2xhc3NOYW1lIiwiaGFzQ2xhc3NOYW1lIiwicmVtb3ZlQ2xhc3NOYW1lIiwiUG9pbnRlck1hbmFnZXIiLCJNT1VTRV9QT0lOVEVSX1RZUEUiLCJUT1VDSF9QT0lOVEVSX1RZUEUiLCJQT0lOVEVSX0VWRU5UX1RJTUVPVVRfTVMiLCJzdGFuZGFyZFRvdWNoIiwidG91Y2hEZXRlY3Rpb25FdmVudCIsImxhc3RUb3VjaFR5cGUiLCJwb2ludGVyVGltZW91dCIsInBvaW50ZXJFdmVudExvY2siLCJnZXRQb2ludGVyRXZlbnRzU3VwcG9ydGVkIiwiZ2V0UG9pbnRlckV2ZW50c0lucHV0VHlwZXMiLCJ3aW5kb3ciLCJuYXZpZ2F0b3IiLCJwb2ludGVyRW5hYmxlZCIsIk1PVVNFIiwiVE9VQ0giLCJQRU4iLCJtc1BvaW50ZXJFbmFibGVkIiwiZ2V0UG9pbnRlciIsIk1vZGVybml6ciIsImlvcyIsInRvdWNoIiwic2V0UG9pbnRlckV2ZW50TG9jayIsImNsZWFyUG9pbnRlckV2ZW50TG9jayIsInNldFBvaW50ZXJFdmVudExvY2tUaW1lb3V0IiwidGhhdCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJ0cmlnZ2VyTW91c2VFdmVudCIsIm9yaWdpbmFsRXZlbnQiLCIkaiIsInRyaWdnZXIiLCJ0cmlnZ2VyVG91Y2hFdmVudCIsImluaXRFbnYiLCJ3aXJlUG9pbnRlckRldGVjdGlvbiIsIm9uIiwiZSIsInBvaW50ZXJUeXBlIiwiZG9jdW1lbnQiLCJpbml0IiwiTWVudU1hbmFnZXIiLCJtb3VzZUVudGVyRXZlbnRPYnNlcnZlZCIsInRvdWNoRXZlbnRPcmRlckluY29ycmVjdCIsImNhbmNlbE5leHRUb3VjaCIsIlRvdWNoU2Nyb2xsIiwiVE9VQ0hfU0NST0xMX1RIUkVTSE9MRCIsInRvdWNoU3RhcnRQb3NpdGlvbiIsInJlc2V0Iiwic2Nyb2xsVG9wIiwic2hvdWxkQ2FuY2VsVG91Y2giLCJzY3JvbGwiLCJNYXRoIiwiYWJzIiwidXNlU21hbGxTY3JlZW5CZWhhdmlvciIsIm1xIiwidG9nZ2xlTWVudVZpc2liaWxpdHkiLCJ0YXJnZXQiLCJsaW5rIiwibGkiLCJjbG9zZXN0Iiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsImZpbmQiLCJ0b2dnbGVDbGFzcyIsIndpcmVQb2ludGVyRXZlbnRzIiwicG9pbnRlclRhcmdldCIsImhvdmVyVGFyZ2V0IiwiZW50ZXJFdmVudCIsImxlYXZlRXZlbnQiLCJmdWxsUG9pbnRlclN1cHBvcnQiLCJ1bmRlZmluZWQiLCJtb3VzZUVudGVyQWN0aW9uIiwiUGFydGlhbFBvaW50ZXJFdmVudHNTdXBwb3J0IiwibW91c2VMZWF2ZUFjdGlvbiIsImRhdGEiLCJtb3VzZUNsaWNrQWN0aW9uIiwidG91Y2hBY3Rpb24iLCJyZW1vdmVEYXRhIiwicHJldmVudERlZmF1bHQiLCJQYXJ0aWFsVG91Y2hFdmVudHNTdXBwb3J0IiwibW91c2VsZWF2ZUxvY2siLCJzdG9wUHJvcGFnYXRpb24iLCJqdGFyZ2V0IiwiaGFzQ2xhc3MiLCJwYXJlbnRzIiwibGVuZ3RoIiwiYWRkQ2xhc3MiLCJyZWFkeSIsInByZXZlbnRNZW51U3BpbGwiLCJ3aW5kb3dXaWR0aCIsIndpZHRoIiwiZWFjaCIsInVsIiwib3V0ZXJXaWR0aCIsIm9mZnNldCIsImxlZnQiLCJhZGRUZXN0IiwidXNlckFnZW50IiwibWF0Y2giLCJjbGljayIsInNraXBDb250ZW50cyIsInNraXBMaW5rcyIsInNlbGYiLCJhdHRyIiwiZWxlbSIsImlzU2tpcENvbnRlbnRPcGVuIiwicGFyZW50IiwiZW5xdWlyZSIsInJlZ2lzdGVyIiwicHJlcGVuZCIsInVubWF0Y2giLCJtZWRpYUxpc3RMaW5rcyIsIm1lZGlhUHJpbWFyeUltYWdlIiwialF1ZXJ5IiwiZm4iLCJ0b2dnbGVTaW5nbGUiLCJvcHRpb25zIiwic2V0dGluZ3MiLCJleHRlbmQiLCJkZXN0cnVjdCIsIm9mZiIsIm5leHQiLCJ0b2dnbGVDbGFzc2VzIiwiY2xpY2tlZEl0ZW0iLCJncm91cCIsImkiLCJpbmRleCIsImdyb3VwcyIsImVxIiwid3JhcHBlciIsImhhc1RhYnMiLCJzdGFydE9wZW4iLCJkbCIsImNoaWxkcmVuIiwiZHRzIiwicGFuZXMiLCJBcnJheSIsImR0IiwiaHRtbCIsImFwcGVuZCIsImluc2VydEJlZm9yZSIsImxpcyIsInB1c2giLCJmaWx0ZXIiLCJyaWdodENvbHVtbiIsImNvbFdyYXBwZXIiLCJhcHBlbmRUbyIsIm1haW4iLCJzZXR1cCIsInRvZ2dsZUVsZW1lbnRzIiwiZmFkZUluIiwicHJldiIsImFsaWduUHJvZHVjdEdyaWRBY3Rpb25zIiwiZ3JpZFJvd3MiLCJ0ZW1wUm93IiwicHJvZHVjdEdyaWRFbGVtZW50cyIsImNzcyIsInRhbGxlc3RQcm9kdWN0SW5mbyIsIm1pbi1oZWlnaHQiLCJwYWRkaW5nLWJvdHRvbSIsInByb2R1Y3RJbmZvSGVpZ2h0IiwiaGVpZ2h0IiwiYWN0aW9uU3BhY2luZyIsImFjdGlvbkhlaWdodCIsInRvdGFsSGVpZ2h0IiwicmVzaXplRXZlbnQiLCJyZXNpemVUaW1lciIsInJlc2l6ZSIsIlByb2R1Y3RNZWRpYU1hbmFnZXIiLCJJTUFHRV9aT09NX1RIUkVTSE9MRCIsImltYWdlV3JhcHBlciIsImRlc3Ryb3lab29tIiwicmVtb3ZlIiwiY3JlYXRlWm9vbSIsImltYWdlIiwibmF0dXJhbFdpZHRoIiwibmF0dXJhbEhlaWdodCIsIndpZHRoRGlmZiIsImhlaWdodERpZmYiLCJlbGV2YXRlWm9vbSIsInN3YXBJbWFnZSIsInRhcmdldEltYWdlIiwiaW1hZ2VHYWxsZXJ5IiwiY29tcGxldGUiLCJpbWFnZXNMb2FkZWQiLCJ3aXJlVGh1bWJuYWlscyIsImpsaW5rIiwiaW5pdFpvb20iXSwibWFwcGluZ3MiOiJBQWlDQSxHQUFBQSxLQUNBQyxPQUFBLElBQ0FDLE1BQUEsSUFDQUMsT0FBQSxJQUNBQyxNQUFBLElBQ0FDLE9BQUEsS0FXQUMsUUFBQUMsV0FBQUMsVUFBQUMsV0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNBQyxLQUFBSCxLQUFBSSxFQUFBSixHQUNBRyxLQUFBRixNQUFBRyxFQUFBSCxHQUNBRSxLQUFBRCxVQUFBQSxFQUVBRyxNQUFBQyxRQUFBSCxLQUFBSCxLQUFBLFNBQUFHLEtBQUFJLE9BQUFDLEtBQUFMLE9BQ0FFLE1BQUFDLFFBQUFILEtBQUFGLE1BQUEsU0FBQUUsS0FBQU0sT0FBQUQsS0FBQUwsT0FDQUUsTUFBQUMsUUFBQUgsS0FBQUYsTUFBQSxRQUFBRSxLQUFBTyxNQUFBRixLQUFBTCxPQUNBRSxNQUFBQyxRQUFBSCxLQUFBRixNQUFBLE9BQUFFLEtBQUFRLEtBQUFILEtBQUFMLE9BQ0FBLEtBQUFRLFFBR0FmLE9BQUFDLFdBQUFDLFVBQUFTLE9BQUEsU0FBQUssR0FDQSxNQUFBVCxNQUFBRixNQUFBWSxPQUFBVixLQUFBRCxXQUFBLElBQUFDLEtBQUFGLE1BQUFZLFFBQ0FSLE1BQUFTLEtBQUFGLEdBQ0FULEtBQUFGLE1BQUFjLGFBQUEscUJBQ0FaLEtBQUFGLE1BQUFTLFNBQ0EsSUFLQWQsT0FBQUMsV0FBQUMsVUFBQVcsT0FBQSxTQUFBRyxHQUVBVCxLQUFBRixNQUFBWSxPQUFBVixLQUFBRCxXQUNBLElBQUFDLEtBQUFGLE1BQUFZLE9BQ0FWLEtBQUFGLE1BQUFlLGFBQUEsc0JBRUFiLEtBQUFGLE1BQUFnQixnQkFBQSxzQkFJQXJCLE9BQUFDLFdBQUFDLFVBQUFhLEtBQUEsU0FBQUMsR0FDQVQsS0FBQUYsTUFBQWUsYUFBQSxzQkFDQWIsS0FBQUYsTUFBQWdCLGdCQUFBLHFCQThCQSxJQUFBQyxpQkFDQUMsbUJBQUEsUUFDQUMsbUJB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QXlJLHNCQUlBMUksSUFBQVEsVUFBQWlELE1BQUEsV0FDQWlGLG9CQUFBakkiLCJmaWxlIjoiYWxsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBNYWdlbnRvXG4gKlxuICogTk9USUNFIE9GIExJQ0VOU0VcbiAqXG4gKiBUaGlzIHNvdXJjZSBmaWxlIGlzIHN1YmplY3QgdG8gdGhlIEFjYWRlbWljIEZyZWUgTGljZW5zZSAoQUZMIDMuMClcbiAqIHRoYXQgaXMgYnVuZGxlZCB3aXRoIHRoaXMgcGFja2FnZSBpbiB0aGUgZmlsZSBMSUNFTlNFX0FGTC50eHQuXG4gKiBJdCBpcyBhbHNvIGF2YWlsYWJsZSB0aHJvdWdoIHRoZSB3b3JsZC13aWRlLXdlYiBhdCB0aGlzIFVSTDpcbiAqIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9hZmwtMy4wLnBocFxuICogSWYgeW91IGRpZCBub3QgcmVjZWl2ZSBhIGNvcHkgb2YgdGhlIGxpY2Vuc2UgYW5kIGFyZSB1bmFibGUgdG9cbiAqIG9idGFpbiBpdCB0aHJvdWdoIHRoZSB3b3JsZC13aWRlLXdlYiwgcGxlYXNlIHNlbmQgYW4gZW1haWxcbiAqIHRvIGxpY2Vuc2VAbWFnZW50by5jb20gc28gd2UgY2FuIHNlbmQgeW91IGEgY29weSBpbW1lZGlhdGVseS5cbiAqXG4gKiBESVNDTEFJTUVSXG4gKlxuICogRG8gbm90IGVkaXQgb3IgYWRkIHRvIHRoaXMgZmlsZSBpZiB5b3Ugd2lzaCB0byB1cGdyYWRlIE1hZ2VudG8gdG8gbmV3ZXJcbiAqIHZlcnNpb25zIGluIHRoZSBmdXR1cmUuIElmIHlvdSB3aXNoIHRvIGN1c3RvbWl6ZSBNYWdlbnRvIGZvciB5b3VyXG4gKiBuZWVkcyBwbGVhc2UgcmVmZXIgdG8gaHR0cDovL3d3dy5tYWdlbnRvLmNvbSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqXG4gKiBAY2F0ZWdvcnkgICAgZGVzaWduXG4gKiBAcGFja2FnZSAgICAgcndkX2RlZmF1bHRcbiAqIEBjb3B5cmlnaHQgICBDb3B5cmlnaHQgKGMpIDIwMDYtMjAxNiBYLmNvbW1lcmNlLCBJbmMuIGFuZCBhZmZpbGlhdGVzIChodHRwOi8vd3d3Lm1hZ2VudG8uY29tKVxuICogQGxpY2Vuc2UgICAgIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9hZmwtMy4wLnBocCAgQWNhZGVtaWMgRnJlZSBMaWNlbnNlIChBRkwgMy4wKVxuICovXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUHJpbWFyeSBCcmVhayBQb2ludHNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLyBUaGVzZSBzaG91bGQgYmUgdXNlZCB3aXRoIHRoZSBicCAobWF4LXdpZHRoLCB4eCkgbWl4aW5cbi8vIHdoZXJlIGEgbWluLXdpZHRoIGlzIHVzZWQsIHJlbWVtYmVyIHRvICsxIHRvIGJyZWFrIGNvcnJlY3RseVxuLy8gSWYgdGhlc2UgYXJlIGNoYW5nZWQsIHRoZXkgbXVzdCBhbHNvIGJlIHVwZGF0ZWQgaW4gX3Zhci5zY3NzXG5cbnZhciBicCA9IHtcbiAgICB4c21hbGw6IDQ3OSxcbiAgICBzbWFsbDogNTk5LFxuICAgIG1lZGl1bTogNzcwLFxuICAgIGxhcmdlOiA5NzksXG4gICAgeGxhcmdlOiAxMTk5XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNlYXJjaFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEltcGxlbWVudHMgYSBjdXN0b20gdmFsaWRhdGlvbiBzdHlsZSBmb3IgdGhlIHNlYXJjaCBmb3JtLiBXaGVuIHRoZSBmb3JtIGlzIGludmFsaWRseSBzdWJtaXR0ZWQsIHRoZSB2YWxpZGF0aW9uLWZhaWxlZFxuICogY2xhc3MgZ2V0cyBhZGRlZCB0byB0aGUgaW5wdXQsIGJ1dCB0aGUgXCJUaGlzIGlzIGEgcmVxdWlyZWQgZmllbGQuXCIgdGV4dCBkb2VzIG5vdCBkaXNwbGF5XG4gKi9cblZhcmllbi5zZWFyY2hGb3JtLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKGZvcm0sIGZpZWxkLCBlbXB0eVRleHQpIHtcbiAgICB0aGlzLmZvcm0gPSAkKGZvcm0pO1xuICAgIHRoaXMuZmllbGQgPSAkKGZpZWxkKTtcbiAgICB0aGlzLmVtcHR5VGV4dCA9IGVtcHR5VGV4dDtcblxuICAgIEV2ZW50Lm9ic2VydmUodGhpcy5mb3JtLCAnc3VibWl0JywgdGhpcy5zdWJtaXQuYmluZCh0aGlzKSk7XG4gICAgRXZlbnQub2JzZXJ2ZSh0aGlzLmZpZWxkLCAnY2hhbmdlJywgdGhpcy5jaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgRXZlbnQub2JzZXJ2ZSh0aGlzLmZpZWxkLCAnZm9jdXMnLCB0aGlzLmZvY3VzLmJpbmQodGhpcykpO1xuICAgIEV2ZW50Lm9ic2VydmUodGhpcy5maWVsZCwgJ2JsdXInLCB0aGlzLmJsdXIuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5ibHVyKCk7XG59XG5cblZhcmllbi5zZWFyY2hGb3JtLnByb3RvdHlwZS5zdWJtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBpZiAodGhpcy5maWVsZC52YWx1ZSA9PSB0aGlzLmVtcHR5VGV4dCB8fCB0aGlzLmZpZWxkLnZhbHVlID09ICcnKXtcbiAgICAgICAgRXZlbnQuc3RvcChldmVudCk7XG4gICAgICAgIHRoaXMuZmllbGQuYWRkQ2xhc3NOYW1lKCd2YWxpZGF0aW9uLWZhaWxlZCcpO1xuICAgICAgICB0aGlzLmZpZWxkLmZvY3VzKCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cblZhcmllbi5zZWFyY2hGb3JtLnByb3RvdHlwZS5jaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBpZiAoXG4gICAgICAgIHRoaXMuZmllbGQudmFsdWUgIT0gdGhpcy5lbXB0eVRleHRcbiAgICAgICAgJiYgdGhpcy5maWVsZC52YWx1ZSAhPSAnJ1xuICAgICAgICAmJiB0aGlzLmZpZWxkLmhhc0NsYXNzTmFtZSgndmFsaWRhdGlvbi1mYWlsZWQnKVxuICAgICkge1xuICAgICAgICB0aGlzLmZpZWxkLnJlbW92ZUNsYXNzTmFtZSgndmFsaWRhdGlvbi1mYWlsZWQnKTtcbiAgICB9XG59XG5cblZhcmllbi5zZWFyY2hGb3JtLnByb3RvdHlwZS5ibHVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuZmllbGQuaGFzQ2xhc3NOYW1lKCd2YWxpZGF0aW9uLWZhaWxlZCcpKSB7XG4gICAgICAgIHRoaXMuZmllbGQucmVtb3ZlQ2xhc3NOYW1lKCd2YWxpZGF0aW9uLWZhaWxlZCcpO1xuICAgIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUG9pbnRlciBhYnN0cmFjdGlvblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgcHJvdmlkZXMgYW4gZWFzeSBhbmQgYWJzdHJhY3RlZCBtZWNoYW5pc20gdG8gZGV0ZXJtaW5lIHRoZVxuICogYmVzdCBwb2ludGVyIGJlaGF2aW9yIHRvIHVzZSAtLSB0aGF0IGlzLCBpcyB0aGUgdXNlciBjdXJyZW50bHkgaW50ZXJhY3RpbmdcbiAqIHdpdGggdGhlaXIgZGV2aWNlIGluIGEgdG91Y2ggbWFubmVyLCBvciB1c2luZyBhIG1vdXNlLlxuICpcbiAqIFNpbmNlIGRldmljZXMgbWF5IHVzZSBlaXRoZXIgdG91Y2ggb3IgbW91c2Ugb3IgYm90aCwgdGhlcmUgaXMgbm8gd2F5IHRvXG4gKiBrbm93IHRoZSB1c2VyJ3MgcHJlZmVycmVkIHBvaW50ZXIgdHlwZSB1bnRpbCB0aGV5IGludGVyYWN0IHdpdGggdGhlIHNpdGUuXG4gKlxuICogVG8gYWNjb21tb2RhdGUgdGhpcywgdGhpcyBjbGFzcyBwcm92aWRlcyBhIG1ldGhvZCBhbmQgdHdvIGV2ZW50c1xuICogdG8gZGV0ZXJtaW5lIHRoZSB1c2VyJ3MgcHJlZmVycmVkIHBvaW50ZXIgdHlwZS5cbiAqXG4gKiAtIGdldFBvaW50ZXIoKSByZXR1cm5zIHRoZSBsYXN0IHVzZWQgcG9pbnRlciB0eXBlLCBvciwgaWYgdGhlIHVzZXIgaGFzXG4gKiAgIG5vdCB5ZXQgaW50ZXJhY3RlZCB3aXRoIHRoZSBzaXRlLCBmYWxscyBiYWNrIHRvIGEgTW9kZXJuaXpyIHRlc3QuXG4gKlxuICogLSBUaGUgbW91c2UtZGV0ZWN0ZWQgZXZlbnQgaXMgdHJpZ2dlcmVkIG9uIHRoZSB3aW5kb3cgb2JqZWN0IHdoZW4gdGhlIHVzZXJcbiAqICAgaXMgdXNpbmcgYSBtb3VzZSBwb2ludGVyIGlucHV0LCBvciBoYXMgc3dpdGNoZWQgZnJvbSB0b3VjaCB0byBtb3VzZSBpbnB1dC5cbiAqICAgSXQgY2FuIGJlIG9ic2VydmVkIGluIHRoaXMgbWFubmVyOiAkaih3aW5kb3cpLm9uKCdtb3VzZS1kZXRlY3RlZCcsIGZ1bmN0aW9uKGV2ZW50KSB7IC8vIGN1c3RvbSBjb2RlIH0pO1xuICpcbiAqIC0gVGhlIHRvdWNoLWRldGVjdGVkIGV2ZW50IGlzIHRyaWdnZXJlZCBvbiB0aGUgd2luZG93IG9iamVjdCB3aGVuIHRoZSB1c2VyXG4gKiAgIGlzIHVzaW5nIHRvdWNoIHBvaW50ZXIgaW5wdXQsIG9yIGhhcyBzd2l0Y2hlZCBmcm9tIG1vdXNlIHRvIHRvdWNoIGlucHV0LlxuICogICBJdCBjYW4gYmUgb2JzZXJ2ZWQgaW4gdGhpcyBtYW5uZXI6ICRqKHdpbmRvdykub24oJ3RvdWNoLWRldGVjdGVkJywgZnVuY3Rpb24oZXZlbnQpIHsgLy8gY3VzdG9tIGNvZGUgfSk7XG4gKi9cbnZhciBQb2ludGVyTWFuYWdlciA9IHtcbiAgICBNT1VTRV9QT0lOVEVSX1RZUEU6ICdtb3VzZScsXG4gICAgVE9VQ0hfUE9JTlRFUl9UWVBFOiAndG91Y2gnLFxuICAgIFBPSU5URVJfRVZFTlRfVElNRU9VVF9NUzogNTAwLFxuICAgIHN0YW5kYXJkVG91Y2g6IGZhbHNlLFxuICAgIHRvdWNoRGV0ZWN0aW9uRXZlbnQ6IG51bGwsXG4gICAgbGFzdFRvdWNoVHlwZTogbnVsbCxcbiAgICBwb2ludGVyVGltZW91dDogbnVsbCxcbiAgICBwb2ludGVyRXZlbnRMb2NrOiBmYWxzZSxcblxuICAgIGdldFBvaW50ZXJFdmVudHNTdXBwb3J0ZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGFuZGFyZFRvdWNoO1xuICAgIH0sXG5cbiAgICBnZXRQb2ludGVyRXZlbnRzSW5wdXRUeXBlczogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh3aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKSB7IC8vSUUgMTErXG4gICAgICAgICAgICAvL3JldHVybiBzdHJpbmcgdmFsdWVzIGZyb20gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L3dpbmRvd3MvYXBwcy9oaDQ2NjEzMC5hc3B4XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIE1PVVNFOiAnbW91c2UnLFxuICAgICAgICAgICAgICAgIFRPVUNIOiAndG91Y2gnLFxuICAgICAgICAgICAgICAgIFBFTjogJ3BlbidcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKSB7IC8vSUUgMTBcbiAgICAgICAgICAgIC8vcmV0dXJuIG51bWVyaWMgdmFsdWVzIGZyb20gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L3dpbmRvd3MvYXBwcy9oaDQ2NjEzMC5hc3B4XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIE1PVVNFOiAgMHgwMDAwMDAwNCxcbiAgICAgICAgICAgICAgICBUT1VDSDogIDB4MDAwMDAwMDIsXG4gICAgICAgICAgICAgICAgUEVOOiAgICAweDAwMDAwMDAzXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgeyAvL290aGVyIGJyb3dzZXJzIGRvbid0IHN1cHBvcnQgcG9pbnRlciBldmVudHNcbiAgICAgICAgICAgIHJldHVybiB7fTsgLy9yZXR1cm4gZW1wdHkgb2JqZWN0XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSWYgY2FsbGVkIGJlZm9yZSBpbml0KCksIGdldCBiZXN0IGd1ZXNzIG9mIGlucHV0IHBvaW50ZXIgdHlwZVxuICAgICAqIHVzaW5nIE1vZGVybml6ciB0ZXN0LlxuICAgICAqIElmIGNhbGxlZCBhZnRlciBpbml0KCksIGdldCBjdXJyZW50IHBvaW50ZXIgaW4gdXNlLlxuICAgICAqL1xuICAgIGdldFBvaW50ZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBPbiBpT1MgZGV2aWNlcywgYWx3YXlzIGRlZmF1bHQgdG8gdG91Y2gsIGFzIHRoaXMubGFzdFRvdWNoVHlwZSB3aWxsIGludGVybWl0dGVudGx5IHJldHVybiAnbW91c2UnIGlmXG4gICAgICAgIC8vIG11bHRpcGxlIHRvdWNoZXMgYXJlIHRyaWdnZXJlZCBpbiByYXBpZCBzdWNjZXNzaW9uIGluIFNhZmFyaSBvbiBpT1NcbiAgICAgICAgaWYoTW9kZXJuaXpyLmlvcykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuVE9VQ0hfUE9JTlRFUl9UWVBFO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodGhpcy5sYXN0VG91Y2hUeXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sYXN0VG91Y2hUeXBlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIE1vZGVybml6ci50b3VjaCA/IHRoaXMuVE9VQ0hfUE9JTlRFUl9UWVBFIDogdGhpcy5NT1VTRV9QT0lOVEVSX1RZUEU7XG4gICAgfSxcblxuICAgIHNldFBvaW50ZXJFdmVudExvY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnBvaW50ZXJFdmVudExvY2sgPSB0cnVlO1xuICAgIH0sXG4gICAgY2xlYXJQb2ludGVyRXZlbnRMb2NrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5wb2ludGVyRXZlbnRMb2NrID0gZmFsc2U7XG4gICAgfSxcbiAgICBzZXRQb2ludGVyRXZlbnRMb2NrVGltZW91dDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICBpZih0aGlzLnBvaW50ZXJUaW1lb3V0KSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5wb2ludGVyVGltZW91dCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFBvaW50ZXJFdmVudExvY2soKTtcbiAgICAgICAgdGhpcy5wb2ludGVyVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHRoYXQuY2xlYXJQb2ludGVyRXZlbnRMb2NrKCk7IH0sIHRoaXMuUE9JTlRFUl9FVkVOVF9USU1FT1VUX01TKTtcbiAgICB9LFxuXG4gICAgdHJpZ2dlck1vdXNlRXZlbnQ6IGZ1bmN0aW9uKG9yaWdpbmFsRXZlbnQpIHtcbiAgICAgICAgaWYodGhpcy5sYXN0VG91Y2hUeXBlID09IHRoaXMuTU9VU0VfUE9JTlRFUl9UWVBFKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vcHJldmVudCBkdXBsaWNhdGUgZXZlbnRzXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmxhc3RUb3VjaFR5cGUgPSB0aGlzLk1PVVNFX1BPSU5URVJfVFlQRTtcbiAgICAgICAgJGood2luZG93KS50cmlnZ2VyKCdtb3VzZS1kZXRlY3RlZCcsIG9yaWdpbmFsRXZlbnQpO1xuICAgIH0sXG4gICAgdHJpZ2dlclRvdWNoRXZlbnQ6IGZ1bmN0aW9uKG9yaWdpbmFsRXZlbnQpIHtcbiAgICAgICAgaWYodGhpcy5sYXN0VG91Y2hUeXBlID09IHRoaXMuVE9VQ0hfUE9JTlRFUl9UWVBFKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vcHJldmVudCBkdXBsaWNhdGUgZXZlbnRzXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmxhc3RUb3VjaFR5cGUgPSB0aGlzLlRPVUNIX1BPSU5URVJfVFlQRTtcbiAgICAgICAgJGood2luZG93KS50cmlnZ2VyKCd0b3VjaC1kZXRlY3RlZCcsIG9yaWdpbmFsRXZlbnQpO1xuICAgIH0sXG5cbiAgICBpbml0RW52OiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhbmRhcmRUb3VjaCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnRvdWNoRGV0ZWN0aW9uRXZlbnQgPSAncG9pbnRlcm1vdmUnO1xuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5zdGFuZGFyZFRvdWNoID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMudG91Y2hEZXRlY3Rpb25FdmVudCA9ICdNU1BvaW50ZXJNb3ZlJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudG91Y2hEZXRlY3Rpb25FdmVudCA9ICd0b3VjaHN0YXJ0JztcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICB3aXJlUG9pbnRlckRldGVjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICBpZih0aGlzLnN0YW5kYXJkVG91Y2gpIHsgLy9zdGFuZGFyZC1iYXNlZCB0b3VjaCBldmVudHMuIFdpcmUgb25seSBvbmUgZXZlbnQuXG4gICAgICAgICAgICAvL2RldGVjdCBwb2ludGVyIGV2ZW50XG4gICAgICAgICAgICAkaih3aW5kb3cpLm9uKHRoaXMudG91Y2hEZXRlY3Rpb25FdmVudCwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaChlLm9yaWdpbmFsRXZlbnQucG9pbnRlclR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSB0aGF0LmdldFBvaW50ZXJFdmVudHNJbnB1dFR5cGVzKCkuTU9VU0U6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnRyaWdnZXJNb3VzZUV2ZW50KGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgdGhhdC5nZXRQb2ludGVyRXZlbnRzSW5wdXRUeXBlcygpLlRPVUNIOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIHRoYXQuZ2V0UG9pbnRlckV2ZW50c0lucHV0VHlwZXMoKS5QRU46XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbnRlbnRpb25hbGx5IGdyb3VwIHBlbiBhbmQgdG91Y2ggdG9nZXRoZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudHJpZ2dlclRvdWNoRXZlbnQoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHsgLy9ub24tc3RhbmRhcmQgdG91Y2ggZXZlbnRzLiBXaXJlIHRvdWNoIGFuZCBtb3VzZSBjb21wZXRpbmcgZXZlbnRzLlxuICAgICAgICAgICAgLy9kZXRlY3QgZmlyc3QgdG91Y2hcbiAgICAgICAgICAgICRqKHdpbmRvdykub24odGhpcy50b3VjaERldGVjdGlvbkV2ZW50LCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgaWYodGhhdC5wb2ludGVyRXZlbnRMb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGF0LnNldFBvaW50ZXJFdmVudExvY2tUaW1lb3V0KCk7XG4gICAgICAgICAgICAgICAgdGhhdC50cmlnZ2VyVG91Y2hFdmVudChlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvL2RldGVjdCBtb3VzZSB1c2FnZVxuICAgICAgICAgICAgJGooZG9jdW1lbnQpLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgaWYodGhhdC5wb2ludGVyRXZlbnRMb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGF0LnNldFBvaW50ZXJFdmVudExvY2tUaW1lb3V0KCk7XG4gICAgICAgICAgICAgICAgdGhhdC50cmlnZ2VyTW91c2VFdmVudChlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmluaXRFbnYoKTtcbiAgICAgICAgdGhpcy53aXJlUG9pbnRlckRldGVjdGlvbigpO1xuICAgIH1cbn07XG5cbi8qKlxuICogVGhpcyBjbGFzcyBtYW5hZ2VzIHRoZSBtYWluIG5hdmlnYXRpb24gYW5kIHN1cHBvcnRzIGluZmluaXRlIG5lc3RlZFxuICogbWVudXMgd2hpY2ggc3VwcG9ydCB0b3VjaCwgbW91c2UgY2xpY2ssIGFuZCBob3ZlciBjb3JyZWN0bHkuXG4gKlxuICogVGhlIGZvbGxvd2luZyBpcyB0aGUgZXhwZWN0ZWQgYmVoYXZpb3I6XG4gKlxuICogLSBIb3ZlciB3aXRoIGFuIGFjdHVhbCBtb3VzZSBzaG91bGQgZXhwYW5kIHRoZSBtZW51IChhdCBhbnkgbGV2ZWwgb2YgbmVzdGluZylcbiAqIC0gQ2xpY2sgd2l0aCBhbiBhY3R1YWwgbW91c2Ugd2lsbCBmb2xsb3cgdGhlIGxpbmssIHJlZ2FyZGxlc3Mgb2YgYW55IGNoaWxkcmVuXG4gKiAtIFRvdWNoIHdpbGwgZm9sbG93IGxpbmtzIHdpdGhvdXQgY2hpbGRyZW4sIGFuZCB0b2dnbGUgc3VibWVudXMgb2YgbGlua3Mgd2l0aCBjaGlsZHJlblxuICpcbiAqIENhdmVhdHM6XG4gKiAtIEFjY29yZGluZyB0byBNb3ppbGxhJ3MgZG9jdW1lbnRhdGlvbiAoaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvR3VpZGUvRXZlbnRzL1RvdWNoX2V2ZW50cyksXG4gKiAgIEZpcmVmb3ggaGFzIGRpc2FibGVkIEFwcGxlLXN0eWxlIHRvdWNoIGV2ZW50cyBvbiBkZXNrdG9wLCBzbyBkZXNrdG9wIGRldmljZXMgdXNpbmcgRmlyZWZveCB3aWxsIG5vdCBzdXBwb3J0XG4gKiAgIHRoZSBkZXNpcmVkIHRvdWNoIGJlaGF2aW9yLlxuICovXG52YXIgTWVudU1hbmFnZXIgPSB7XG4gICAgLy8gVGhlc2UgdmFyaWFibGVzIGFyZSB1c2VkIHRvIGRldGVjdCBpbmNvcnJlY3QgdG91Y2ggLyBtb3VzZSBldmVudCBvcmRlclxuICAgIG1vdXNlRW50ZXJFdmVudE9ic2VydmVkOiBmYWxzZSxcbiAgICB0b3VjaEV2ZW50T3JkZXJJbmNvcnJlY3Q6IGZhbHNlLFxuICAgIGNhbmNlbE5leHRUb3VjaDogZmFsc2UsXG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGNsYXNzIG1hbmFnZXMgdG91Y2ggc2Nyb2xsIGRldGVjdGlvblxuICAgICAqL1xuICAgIFRvdWNoU2Nyb2xsOiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUb3VjaCB3aGljaCBtb3ZlcyB0aGUgc2NyZWVuIHZlcnRpY2FsbHkgbW9yZSB0aGFuXG4gICAgICAgICAqIHRoaXMgbWFueSBwaXhlbHMgd2lsbCBiZSBjb25zaWRlcmVkIGEgc2Nyb2xsLlxuICAgICAgICAgKi9cbiAgICAgICAgVE9VQ0hfU0NST0xMX1RIUkVTSE9MRDogMjAsXG5cbiAgICAgICAgdG91Y2hTdGFydFBvc2l0aW9uOiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBOb3RlIHNjcm9sbCBwb3NpdGlvbiBzbyB0aGF0IHNjcm9sbCBhY3Rpb24gY2FuIGJlIGRldGVjdGVkIGxhdGVyLlxuICAgICAgICAgKiBTaG91bGQgcHJvYmFibHkgYmUgY2FsbGVkIG9uIHRvdWNoc3RhcnQgKG9yIHNpbWlsYXIpIGV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy50b3VjaFN0YXJ0UG9zaXRpb24gPSAkaih3aW5kb3cpLnNjcm9sbFRvcCgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlmIHRvdWNoIHdhcyBhY3R1YWxseSBhIHNjcm9sbC4gU2hvdWxkIHByb2JhYmx5IGJlIGNoZWNrZWRcbiAgICAgICAgICogb24gdG91Y2hlbmQgKG9yIHNpbWlsYXIpIGV2ZW50LlxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHNob3VsZENhbmNlbFRvdWNoOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKHRoaXMudG91Y2hTdGFydFBvc2l0aW9uID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBzY3JvbGwgPSAkaih3aW5kb3cpLnNjcm9sbFRvcCgpIC0gdGhpcy50b3VjaFN0YXJ0UG9zaXRpb247XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5hYnMoc2Nyb2xsKSA+IHRoaXMuVE9VQ0hfU0NST0xMX1RIUkVTSE9MRDtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIHNtYWxsIHNjcmVlbiBiZWhhdmlvciBzaG91bGQgYmUgdXNlZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIHVzZVNtYWxsU2NyZWVuQmVoYXZpb3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gTW9kZXJuaXpyLm1xKFwic2NyZWVuIGFuZCAobWF4LXdpZHRoOlwiICsgYnAubWVkaXVtICsgXCJweClcIik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFRvZ2dsZXMgYSBnaXZlbiBtZW51IGl0ZW0ncyB2aXNpYmlsaXR5LlxuICAgICAqIE9uIGxhcmdlIHNjcmVlbnMsIGFsc28gY2xvc2VzIHNpYmxpbmcgYW5kIGNoaWxkcmVuIG9mIHNpYmxpbmcgbWVudXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGFyZ2V0XG4gICAgICovXG4gICAgdG9nZ2xlTWVudVZpc2liaWxpdHk6IGZ1bmN0aW9uKHRhcmdldCkge1xuICAgICAgICB2YXIgbGluayA9ICRqKHRhcmdldCk7XG4gICAgICAgIHZhciBsaSA9IGxpbmsuY2xvc2VzdCgnbGknKTtcblxuICAgICAgICBpZighdGhpcy51c2VTbWFsbFNjcmVlbkJlaGF2aW9yKCkpIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBtZW51LWFjdGl2ZSBmcm9tIHNpYmxpbmdzIGFuZCBjaGlsZHJlbiBvZiBzaWJsaW5nc1xuICAgICAgICAgICAgbGkuc2libGluZ3MoKVxuICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ21lbnUtYWN0aXZlJylcbiAgICAgICAgICAgICAgLmZpbmQoJ2xpJylcbiAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdtZW51LWFjdGl2ZScpO1xuICAgICAgICAgICAgLy9yZW1vdmUgbWVudS1hY3RpdmUgZnJvbSBjaGlsZHJlblxuICAgICAgICAgICAgbGkuZmluZCgnbGkubWVudS1hY3RpdmUnKS5yZW1vdmVDbGFzcygnbWVudS1hY3RpdmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vdG9nZ2xlIGN1cnJlbnQgaXRlbSdzIGFjdGl2ZSBzdGF0ZVxuICAgICAgICBsaS50b2dnbGVDbGFzcygnbWVudS1hY3RpdmUnKTtcbiAgICB9LFxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBJbml0aWFsaXphdGlvbiBtZXRob2RzXG4gICAgLy9cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgTWVudU1hbmFnZXIgYW5kIHdpcmUgYWxsIHJlcXVpcmVkIGV2ZW50cy5cbiAgICAgKiBTaG91bGQgb25seSBiZSBjYWxsZWQgb25jZS5cbiAgICAgKlxuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLndpcmVQb2ludGVyRXZlbnRzKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIG9ic2VydmVzIGFuIGFic3VyZCBudW1iZXIgb2YgZXZlbnRzXG4gICAgICogZGVwZW5kaW5nIG9uIHRoZSBjYXBhYmlsaXRpZXMgb2YgdGhlIGN1cnJlbnQgYnJvd3NlclxuICAgICAqIHRvIGltcGxlbWVudCBleHBlY3RlZCBoZWFkZXIgbmF2aWdhdGlvbiBmdW5jdGlvbmFsaXR5LlxuICAgICAqXG4gICAgICogVGhlIGdvYWwgaXMgdG8gc2VwYXJhdGUgaW50ZXJhY3Rpb25zIGludG8gZm91ciBidWNrZXRzOlxuICAgICAqIC0gcG9pbnRlciBlbnRlciB1c2luZyBhbiBhY3R1YWwgbW91c2VcbiAgICAgKiAtIHBvaW50ZXIgbGVhdmUgdXNpbmcgYW4gYWN0dWFsIG1vdXNlXG4gICAgICogLSBwb2ludGVyIGRvd24gdXNpbmcgYW4gYWN0dWFsIG1vdXNlXG4gICAgICogLSBwb2ludGVyIGRvd24gdXNpbmcgdG91Y2hcbiAgICAgKlxuICAgICAqIEJyb3dzZXJzIHN1cHBvcnRpbmcgUG9pbnRlckV2ZW50IGV2ZW50cyB3aWxsIHVzZSB0aGVzZVxuICAgICAqIHRvIGRpZmZlcmVudGlhdGUgcG9pbnRlciB0eXBlcy5cbiAgICAgKlxuICAgICAqIEJyb3dzZXJzIHN1cHBvcnRpbmcgQXBwbGUtc3R5bGUgd2lsbCB1c2UgdGhvc2UgZXZlbnRzXG4gICAgICogYWxvbmcgd2l0aCBtb3VzZWVudGVyIC8gbW91c2VsZWF2ZSB0byBlbXVsYXRlIHBvaW50ZXIgZXZlbnRzLlxuICAgICAqL1xuICAgIHdpcmVQb2ludGVyRXZlbnRzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICB2YXIgcG9pbnRlclRhcmdldCA9ICRqKCcjbmF2IGEuaGFzLWNoaWxkcmVuJyk7XG4gICAgICAgIHZhciBob3ZlclRhcmdldCA9ICRqKCcjbmF2IGxpJyk7XG5cbiAgICAgICAgaWYoUG9pbnRlck1hbmFnZXIuZ2V0UG9pbnRlckV2ZW50c1N1cHBvcnRlZCgpKSB7XG4gICAgICAgICAgICAvLyBwb2ludGVyIGV2ZW50cyBzdXBwb3J0ZWQsIHNvIG9ic2VydmUgdGhvc2UgdHlwZSBvZiBldmVudHNcblxuICAgICAgICAgICAgdmFyIGVudGVyRXZlbnQgPSB3aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkID8gJ3BvaW50ZXJlbnRlcicgOiAnbW91c2VlbnRlcic7XG4gICAgICAgICAgICB2YXIgbGVhdmVFdmVudCA9IHdpbmRvdy5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQgPyAncG9pbnRlcmxlYXZlJyA6ICdtb3VzZWxlYXZlJztcbiAgICAgICAgICAgIHZhciBmdWxsUG9pbnRlclN1cHBvcnQgPSB3aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkO1xuXG4gICAgICAgICAgICBob3ZlclRhcmdldC5vbihlbnRlckV2ZW50LCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgaWYoZS5vcmlnaW5hbEV2ZW50LnBvaW50ZXJUeXBlID09PSB1bmRlZmluZWQgLy8gQnJvd3NlcnMgd2l0aCBwYXJ0aWFsIFBvaW50ZXJFdmVudCBzdXBwb3J0IGRvbid0IHByb3ZpZGUgcG9pbnRlciB0eXBlXG4gICAgICAgICAgICAgICAgICAgIHx8IGUub3JpZ2luYWxFdmVudC5wb2ludGVyVHlwZSA9PSBQb2ludGVyTWFuYWdlci5nZXRQb2ludGVyRXZlbnRzSW5wdXRUeXBlcygpLk1PVVNFKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoZnVsbFBvaW50ZXJTdXBwb3J0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lm1vdXNlRW50ZXJBY3Rpb24oZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LlBhcnRpYWxQb2ludGVyRXZlbnRzU3VwcG9ydC5tb3VzZUVudGVyQWN0aW9uKGUsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkub24obGVhdmVFdmVudCwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGlmKGUub3JpZ2luYWxFdmVudC5wb2ludGVyVHlwZSA9PT0gdW5kZWZpbmVkIC8vIEJyb3dzZXJzIHdpdGggcGFydGlhbCBQb2ludGVyRXZlbnQgc3VwcG9ydCBkb24ndCBwcm92aWRlIHBvaW50ZXIgdHlwZVxuICAgICAgICAgICAgICAgICAgICB8fCBlLm9yaWdpbmFsRXZlbnQucG9pbnRlclR5cGUgPT0gUG9pbnRlck1hbmFnZXIuZ2V0UG9pbnRlckV2ZW50c0lucHV0VHlwZXMoKS5NT1VTRSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKGZ1bGxQb2ludGVyU3VwcG9ydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5tb3VzZUxlYXZlQWN0aW9uKGUsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5QYXJ0aWFsUG9pbnRlckV2ZW50c1N1cHBvcnQubW91c2VMZWF2ZUFjdGlvbihlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZighZnVsbFBvaW50ZXJTdXBwb3J0KSB7XG4gICAgICAgICAgICAgICAgLy9jbGljayBldmVudCBkb2Vzbid0IGhhdmUgcG9pbnRlciB0eXBlIG9uIGl0LlxuICAgICAgICAgICAgICAgIC8vb2JzZXJ2ZSBNU1BvaW50ZXJEb3duIHRvIHNldCBwb2ludGVyIHR5cGUgZm9yIGNsaWNrIHRvIGZpbmQgbGF0ZXJcblxuICAgICAgICAgICAgICAgIHBvaW50ZXJUYXJnZXQub24oJ01TUG9pbnRlckRvd24nLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICRqKHRoaXMpLmRhdGEoJ3BvaW50ZXItdHlwZScsIGUub3JpZ2luYWxFdmVudC5wb2ludGVyVHlwZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBvaW50ZXJUYXJnZXQub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHZhciBwb2ludGVyVHlwZSA9IGZ1bGxQb2ludGVyU3VwcG9ydCA/IGUub3JpZ2luYWxFdmVudC5wb2ludGVyVHlwZSA6ICRqKHRoaXMpLmRhdGEoJ3BvaW50ZXItdHlwZScpO1xuXG4gICAgICAgICAgICAgICAgaWYocG9pbnRlclR5cGUgPT09IHVuZGVmaW5lZCB8fCBwb2ludGVyVHlwZSA9PSBQb2ludGVyTWFuYWdlci5nZXRQb2ludGVyRXZlbnRzSW5wdXRUeXBlcygpLk1PVVNFKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQubW91c2VDbGlja0FjdGlvbihlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZihmdWxsUG9pbnRlclN1cHBvcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudG91Y2hBY3Rpb24oZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LlBhcnRpYWxQb2ludGVyRXZlbnRzU3VwcG9ydC50b3VjaEFjdGlvbihlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRqKHRoaXMpLnJlbW92ZURhdGEoJ3BvaW50ZXItdHlwZScpOyAvLyBjbGVhciBwb2ludGVyIHR5cGUgaGludCBmcm9tIHRhcmdldCwgaWYgYW55XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vcG9pbnRlciBldmVudHMgbm90IHN1cHBvcnRlZCwgdXNlIEFwcGxlLXN0eWxlIGV2ZW50cyB0byBzaW11bGF0ZVxuXG4gICAgICAgICAgICBob3ZlclRhcmdldC5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBUb3VjaCBldmVudHMgc2hvdWxkIGNhbmNlbCB0aGlzIGV2ZW50IGlmIGEgdG91Y2ggcG9pbnRlciBpcyB1c2VkLlxuICAgICAgICAgICAgICAgIC8vIFJlY29yZCB0aGF0IHRoaXMgbWV0aG9kIGhhcyBmaXJlZCBzbyB0aGF0IGVycm9uZW91cyBmb2xsb3dpbmdcbiAgICAgICAgICAgICAgICAvLyB0b3VjaCBldmVudHMgKGlmIGFueSkgY2FuIHJlc3BvbmQgYWNjb3JkaW5nbHkuXG4gICAgICAgICAgICAgICAgdGhhdC5tb3VzZUVudGVyRXZlbnRPYnNlcnZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhhdC5jYW5jZWxOZXh0VG91Y2ggPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgdGhhdC5tb3VzZUVudGVyQWN0aW9uKGUsIHRoaXMpO1xuICAgICAgICAgICAgfSkub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5tb3VzZUxlYXZlQWN0aW9uKGUsIHRoaXMpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRqKHdpbmRvdykub24oJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgaWYodGhhdC5tb3VzZUVudGVyRXZlbnRPYnNlcnZlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBtb3VzZSBlbnRlciBvYnNlcnZlZCBiZWZvcmUgdG91Y2gsIHRoZW4gZGV2aWNlIHRvdWNoXG4gICAgICAgICAgICAgICAgICAgIC8vIGV2ZW50IG9yZGVyIGlzIGluY29ycmVjdC5cbiAgICAgICAgICAgICAgICAgICAgdGhhdC50b3VjaEV2ZW50T3JkZXJJbmNvcnJlY3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGF0Lm1vdXNlRW50ZXJFdmVudE9ic2VydmVkID0gZmFsc2U7IC8vIFJlc2V0IHRlc3RcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBSZXNldCBUb3VjaFNjcm9sbCBpbiBvcmRlciB0byBkZXRlY3Qgc2Nyb2xsIGxhdGVyLlxuICAgICAgICAgICAgICAgIHRoYXQuVG91Y2hTY3JvbGwucmVzZXQoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBwb2ludGVyVGFyZ2V0Lm9uKCd0b3VjaGVuZCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAkaih0aGlzKS5kYXRhKCd3YXMtdG91Y2gnLCB0cnVlKTsgLy8gTm90ZSB0aGF0IGVsZW1lbnQgd2FzIGludm9rZWQgYnkgdG91Y2ggcG9pbnRlclxuXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50IG1vdXNlIGNvbXBhdGliaWxpdHkgZXZlbnRzIGZyb20gZmlyaW5nIHdoZXJlIHBvc3NpYmxlXG5cbiAgICAgICAgICAgICAgICBpZih0aGF0LlRvdWNoU2Nyb2xsLnNob3VsZENhbmNlbFRvdWNoKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBUb3VjaCB3YXMgYSBzY3JvbGwgLS0gZG9uJ3QgZG8gYW55dGhpbmcgZWxzZVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKHRoYXQudG91Y2hFdmVudE9yZGVySW5jb3JyZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuUGFydGlhbFRvdWNoRXZlbnRzU3VwcG9ydC50b3VjaEFjdGlvbihlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LnRvdWNoQWN0aW9uKGUsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBpZigkaih0aGlzKS5kYXRhKCd3YXMtdG91Y2gnKSkgeyAvLyBFdmVudCBpbnZva2VkIGFmdGVyIHRvdWNoXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCBmb2xsb3dpbmcgbGlua1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIFByZXZlbnQgb3RoZXIgYmVoYXZpb3JcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGF0Lm1vdXNlQ2xpY2tBY3Rpb24oZSwgdGhpcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgLy8gQmVoYXZpb3IgXCJidWNrZXRzXCJcbiAgICAgLy9cblxuICAgIC8qKlxuICAgICAqIEJyb3dzZXJzIHdpdGggaW5jb21wbGV0ZSBQb2ludGVyRXZlbnQgc3VwcG9ydCAoc3VjaCBhcyBJRSAxMClcbiAgICAgKiByZXF1aXJlIHNwZWNpYWwgZXZlbnQgbWFuYWdlbWVudC4gVGhpcyBjb2xsZWN0aW9uIG9mIG1ldGhvZHNcbiAgICAgKiBhY2NvbW1vZGF0ZSBzdWNoIGJyb3dzZXJzLlxuICAgICAqL1xuICAgIFBhcnRpYWxQb2ludGVyRXZlbnRzU3VwcG9ydDoge1xuICAgICAgICAvKipcbiAgICAgICAgICogV2l0aG91dCBwcm9wZXIgcG9pbnRlcmVudGVyIC8gcG9pbnRlcmxlYXZlIC8gY2xpY2sgcG9pbnRlclR5cGUgc3VwcG9ydCxcbiAgICAgICAgICogd2UgaGF2ZSB0byB1c2UgbW91c2VlbnRlciBldmVudHMuIFRoZXNlIGVuZCB1cCB0cmlnZ2VyaW5nXG4gICAgICAgICAqIGxvdHMgb2YgbW91c2VsZWF2ZSBldmVudHMgdGhhdCBjYW4gYmUgbWlzbGVhZGluZy5cbiAgICAgICAgICpcbiAgICAgICAgICogRWFjaCB0b3VjaCBtb3VzZWVudGVyIGFuZCBjbGljayBldmVudCB0aGF0IGVuZHMgdXAgdHJpZ2dlcmluZ1xuICAgICAgICAgKiBhbiB1bmRlc2lyZWQgbW91c2VsZWF2ZSBpbmNyZW1lbnRzIHRoaXMgbG9jayB2YXJpYWJsZS5cbiAgICAgICAgICpcbiAgICAgICAgICogTW91c2VsZWF2ZSBldmVudHMgYXJlIGNhbmNlbGxlZCBpZiB0aGlzIHZhcmlhYmxlIGlzID4gMCxcbiAgICAgICAgICogYW5kIHRoZW4gdGhlIHZhcmlhYmxlIGlzIGRlY3JlbWVudGVkIHJlZ2FyZGxlc3MuXG4gICAgICAgICAqL1xuICAgICAgICBtb3VzZWxlYXZlTG9jazogMCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogSGFuZGxlcyBtb3VzZSBlbnRlciBiZWhhdmlvciwgYnV0IGlmIHVzaW5nIHRvdWNoLFxuICAgICAgICAgKiB0b2dnbGUgbWVudXMgaW4gdGhlIGFic2VuY2Ugb2YgZnVsbCBQb2ludGVyRXZlbnQgc3VwcG9ydC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGV2ZW50XG4gICAgICAgICAqIEBwYXJhbSB0YXJnZXRcbiAgICAgICAgICovXG4gICAgICAgIG1vdXNlRW50ZXJBY3Rpb246IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmKE1lbnVNYW5hZ2VyLnVzZVNtYWxsU2NyZWVuQmVoYXZpb3IoKSkge1xuICAgICAgICAgICAgICAgIC8vIGZhbGwgYmFjayB0byBub3JtYWwgbWV0aG9kIGJlaGF2aW9yXG4gICAgICAgICAgICAgICAgTWVudU1hbmFnZXIubW91c2VFbnRlckFjdGlvbihldmVudCwgdGFyZ2V0KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICB2YXIganRhcmdldCA9ICRqKHRhcmdldCk7XG4gICAgICAgICAgICBpZighanRhcmdldC5oYXNDbGFzcygnbGV2ZWwwJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdXNlbGVhdmVMb2NrID0ganRhcmdldC5wYXJlbnRzKCdsaScpLmxlbmd0aCArIDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIE1lbnVNYW5hZ2VyLnRvZ2dsZU1lbnVWaXNpYmlsaXR5KHRhcmdldCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhhbmRsZXMgbW91c2UgbGVhdmUgYmVoYWl2b3IsIGJ1dCBvYmV5cyB0aGUgbW91c2VsZWF2ZUxvY2tcbiAgICAgICAgICogdG8gYWxsb3cgdW5kZXNpcmVkIG1vdXNlbGVhdmUgZXZlbnRzIHRvIGJlIGNhbmNlbGxlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGV2ZW50XG4gICAgICAgICAqIEBwYXJhbSB0YXJnZXRcbiAgICAgICAgICovXG4gICAgICAgIG1vdXNlTGVhdmVBY3Rpb246IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmKE1lbnVNYW5hZ2VyLnVzZVNtYWxsU2NyZWVuQmVoYXZpb3IoKSkge1xuICAgICAgICAgICAgICAgIC8vIGZhbGwgYmFjayB0byBub3JtYWwgbWV0aG9kIGJlaGF2aW9yXG4gICAgICAgICAgICAgICAgTWVudU1hbmFnZXIubW91c2VMZWF2ZUFjdGlvbihldmVudCwgdGFyZ2V0KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHRoaXMubW91c2VsZWF2ZUxvY2sgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3VzZWxlYXZlTG9jay0tO1xuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gc3VwcHJlc3MgZHVwbGljYXRlIG1vdXNlbGVhdmUgZXZlbnQgYWZ0ZXIgdG91Y2hcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJGoodGFyZ2V0KS5yZW1vdmVDbGFzcygnbWVudS1hY3RpdmUnKTsgLy9oaWRlIGFsbCBtZW51c1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEb2VzIG5vIHdvcmsgb24gaXRzIG93biwgYnV0IGluY3JlbWVudHMgbW91c2VsZWF2ZUxvY2tcbiAgICAgICAgICogdG8gcHJldmVudCBmb2xsb3dpbmcgdW5kZXNpcmVhYmxlIG1vdXNlbGVhdmUgZXZlbnRzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgICAgICogQHBhcmFtIHRhcmdldFxuICAgICAgICAgKi9cbiAgICAgICAgdG91Y2hBY3Rpb246IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmKE1lbnVNYW5hZ2VyLnVzZVNtYWxsU2NyZWVuQmVoYXZpb3IoKSkge1xuICAgICAgICAgICAgICAgIC8vIGZhbGwgYmFjayB0byBub3JtYWwgbWV0aG9kIGJlaGF2aW9yXG4gICAgICAgICAgICAgICAgTWVudU1hbmFnZXIudG91Y2hBY3Rpb24oZXZlbnQsIHRhcmdldCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gcHJldmVudCBmb2xsb3dpbmcgbGlua1xuICAgICAgICAgICAgdGhpcy5tb3VzZWxlYXZlTG9jaysrO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEJyb3dzZXJzIHdpdGggaW5jb21wbGV0ZSBBcHBsZS1zdHlsZSB0b3VjaCBldmVudCBzdXBwb3J0XG4gICAgICogKHN1Y2ggYXMgdGhlIGxlZ2FjeSBBbmRyb2lkIGJyb3dzZXIpIHNvbWV0aW1lcyBmaXJlXG4gICAgICogdG91Y2ggZXZlbnRzIG91dCBvZiBvcmRlci4gSW4gcGFydGljdWxhciwgbW91c2VlbnRlciBtYXlcbiAgICAgKiBmaXJlIGJlZm9yZSB0aGUgdG91Y2ggZXZlbnRzLiBUaGlzIGNvbGxlY3Rpb24gb2YgbWV0aG9kc1xuICAgICAqIGFjY29tbW9kYXRlIHN1Y2ggYnJvd3NlcnMuXG4gICAgICovXG4gICAgUGFydGlhbFRvdWNoRXZlbnRzU3VwcG9ydDoge1xuICAgICAgICAvKipcbiAgICAgICAgICogVG9nZ2xlcyB2aXNpYmlsaXR5IG9mIG1lbnUsIHVubGVzcyBzdXBwcmVzc2VkIGJ5IHByZXZpb3VzXG4gICAgICAgICAqIG91dCBvZiBvcmRlciBtb3VzZWVudGVyIGV2ZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgICAgICogQHBhcmFtIHRhcmdldFxuICAgICAgICAgKi9cbiAgICAgICAgdG91Y2hBY3Rpb246IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmKE1lbnVNYW5hZ2VyLmNhbmNlbE5leHRUb3VjaCkge1xuICAgICAgICAgICAgICAgIC8vIE1vdXNlZW50ZXIgaGFzIGFscmVhZHkgbWFuaXB1bGF0ZWQgdGhlIG1lbnUuXG4gICAgICAgICAgICAgICAgLy8gU3VwcHJlc3MgdGhpcyB1bmRlc2lyZWQgdG91Y2ggZXZlbnQuXG4gICAgICAgICAgICAgICAgTWVudU1hbmFnZXIuY2FuY2VsTmV4dFRvdWNoID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBNZW51TWFuYWdlci50b2dnbGVNZW51VmlzaWJpbGl0eSh0YXJnZXQpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE9uIGxhcmdlIHNjcmVlbnMsIHNob3cgbWVudS5cbiAgICAgKiBPbiBzbWFsbCBzY3JlZW5zLCBkbyBub3RoaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIGV2ZW50XG4gICAgICogQHBhcmFtIHRhcmdldFxuICAgICAqL1xuICAgIG1vdXNlRW50ZXJBY3Rpb246IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcbiAgICAgICAgaWYodGhpcy51c2VTbWFsbFNjcmVlbkJlaGF2aW9yKCkpIHtcbiAgICAgICAgICAgIHJldHVybjsgLy8gZG9uJ3QgZG8gbW91c2UgZW50ZXIgZnVuY3Rpb25hbGl0eSBvbiBzbWFsbGVyIHNjcmVlbnNcbiAgICAgICAgfVxuXG4gICAgICAgICRqKHRhcmdldCkuYWRkQ2xhc3MoJ21lbnUtYWN0aXZlJyk7IC8vc2hvdyBjdXJyZW50IG1lbnVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogT24gbGFyZ2Ugc2NyZWVucywgaGlkZSBtZW51LlxuICAgICAqIE9uIHNtYWxsIHNjcmVlbnMsIGRvIG5vdGhpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgKiBAcGFyYW0gdGFyZ2V0XG4gICAgICovXG4gICAgbW91c2VMZWF2ZUFjdGlvbjogZnVuY3Rpb24oZXZlbnQsIHRhcmdldCkge1xuICAgICAgICBpZih0aGlzLnVzZVNtYWxsU2NyZWVuQmVoYXZpb3IoKSkge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBkb24ndCBkbyBtb3VzZSBsZWF2ZSBmdW5jdGlvbmFsaXR5IG9uIHNtYWxsZXIgc2NyZWVuc1xuICAgICAgICB9XG5cbiAgICAgICAgJGoodGFyZ2V0KS5yZW1vdmVDbGFzcygnbWVudS1hY3RpdmUnKTsgLy9oaWRlIGFsbCBtZW51c1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBPbiBsYXJnZSBzY3JlZW5zLCBkb24ndCBpbnRlcmZlcmUgc28gdGhhdCBicm93c2VyIHdpbGwgZm9sbG93IGxpbmsuXG4gICAgICogT24gc21hbGwgc2NyZWVucywgdG9nZ2xlIG1lbnUgdmlzaWJpbGl0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudFxuICAgICAqIEBwYXJhbSB0YXJnZXRcbiAgICAgKi9cbiAgICBtb3VzZUNsaWNrQWN0aW9uOiBmdW5jdGlvbihldmVudCwgdGFyZ2V0KSB7XG4gICAgICAgIGlmKHRoaXMudXNlU21hbGxTY3JlZW5CZWhhdmlvcigpKSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvL2Rvbid0IGZvbGxvdyBsaW5rXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZU1lbnVWaXNpYmlsaXR5KHRhcmdldCk7IC8vaW5zdGVhZCwgdG9nZ2xlIHZpc2liaWxpdHlcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBUb2dnbGUgbWVudSB2aXNpYmlsaXR5LCBhbmQgcHJldmVudCBldmVudCBkZWZhdWx0IHRvIGF2b2lkXG4gICAgICogdW5kZXNpcmVkLCBkdXBsaWNhdGUsIHN5bnRoZXRpYyBtb3VzZSBldmVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgKiBAcGFyYW0gdGFyZ2V0XG4gICAgICovXG4gICAgdG91Y2hBY3Rpb246IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcbiAgICAgICAgdGhpcy50b2dnbGVNZW51VmlzaWJpbGl0eSh0YXJnZXQpO1xuXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxufTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8galF1ZXJ5IEluaXRcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gVXNlICRqKGRvY3VtZW50KS5yZWFkeSgpIGJlY2F1c2UgTWFnZW50byBleGVjdXRlcyBQcm90b3R5cGUgaW5saW5lXG4kaihkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIFNoYXJlZCBWYXJzXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgLy8gRG9jdW1lbnRcbiAgICB2YXIgdyA9ICRqKHdpbmRvdyk7XG4gICAgdmFyIGQgPSAkaihkb2N1bWVudCk7XG4gICAgdmFyIGJvZHkgPSAkaignYm9keScpO1xuXG4gICAgTW9kZXJuaXpyLmFkZFRlc3QoJ2lvcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goLyhpUGFkfGlQaG9uZXxpUG9kKS9nKTtcbiAgICB9KTtcblxuICAgIC8vaW5pdGlhbGl6ZSBwb2ludGVyIGFic3RyYWN0aW9uIG1hbmFnZXJcbiAgICBQb2ludGVyTWFuYWdlci5pbml0KCk7XG5cbiAgICAvKiBXaXNobGlzdCBUb2dnbGUgQ2xhc3MgKi9cblxuICAgICRqKFwiLmNoYW5nZVwiKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAkaiggdGhpcyApLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIH0pO1xuXG4gICAgJGooZG9jdW1lbnQpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICghICRqKGUudGFyZ2V0KS5oYXNDbGFzcygnLmNoYW5nZScpKSAkaihcIi5jaGFuZ2VcIikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0pO1xuXG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBTa2lwIExpbmtzXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICB2YXIgc2tpcENvbnRlbnRzID0gJGooJy5za2lwLWNvbnRlbnQnKTtcbiAgICB2YXIgc2tpcExpbmtzID0gJGooJy5za2lwLWxpbmsnKTtcblxuICAgIHNraXBMaW5rcy5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdmFyIHNlbGYgPSAkaih0aGlzKTtcbiAgICAgICAgLy8gVXNlIHRoZSBkYXRhLXRhcmdldC1lbGVtZW50IGF0dHJpYnV0ZSwgaWYgaXQgZXhpc3RzLiBGYWxsIGJhY2sgdG8gaHJlZi5cbiAgICAgICAgdmFyIHRhcmdldCA9IHNlbGYuYXR0cignZGF0YS10YXJnZXQtZWxlbWVudCcpID8gc2VsZi5hdHRyKCdkYXRhLXRhcmdldC1lbGVtZW50JykgOiBzZWxmLmF0dHIoJ2hyZWYnKTtcblxuICAgICAgICAvLyBHZXQgdGFyZ2V0IGVsZW1lbnRcbiAgICAgICAgdmFyIGVsZW0gPSAkaih0YXJnZXQpO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHN0dWIgaXMgb3BlblxuICAgICAgICB2YXIgaXNTa2lwQ29udGVudE9wZW4gPSBlbGVtLmhhc0NsYXNzKCdza2lwLWFjdGl2ZScpID8gMSA6IDA7XG5cbiAgICAgICAgLy8gSGlkZSBhbGwgc3R1YnNcbiAgICAgICAgc2tpcExpbmtzLnJlbW92ZUNsYXNzKCdza2lwLWFjdGl2ZScpO1xuICAgICAgICBza2lwQ29udGVudHMucmVtb3ZlQ2xhc3MoJ3NraXAtYWN0aXZlJyk7XG5cbiAgICAgICAgLy8gVG9nZ2xlIHN0dWJzXG4gICAgICAgIGlmIChpc1NraXBDb250ZW50T3Blbikge1xuICAgICAgICAgICAgc2VsZi5yZW1vdmVDbGFzcygnc2tpcC1hY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYuYWRkQ2xhc3MoJ3NraXAtYWN0aXZlJyk7XG4gICAgICAgICAgICBlbGVtLmFkZENsYXNzKCdza2lwLWFjdGl2ZScpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAkaignI2hlYWRlci1jYXJ0Jykub24oJ2NsaWNrJywgJy5za2lwLWxpbmstY2xvc2UnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBwYXJlbnQgPSAkaih0aGlzKS5wYXJlbnRzKCcuc2tpcC1jb250ZW50Jyk7XG4gICAgICAgIHZhciBsaW5rID0gcGFyZW50LnNpYmxpbmdzKCcuc2tpcC1saW5rJyk7XG5cbiAgICAgICAgcGFyZW50LnJlbW92ZUNsYXNzKCdza2lwLWFjdGl2ZScpO1xuICAgICAgICBsaW5rLnJlbW92ZUNsYXNzKCdza2lwLWFjdGl2ZScpO1xuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIEhlYWRlciBNZW51c1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIC8vIGluaXRpYWxpemUgbWVudVxuICAgIE1lbnVNYW5hZ2VyLmluaXQoKTtcblxuICAgIC8vIFByZXZlbnQgc3ViIG1lbnVzIGZyb20gc3BpbGxpbmcgb3V0IG9mIHRoZSB3aW5kb3cuXG4gICAgZnVuY3Rpb24gcHJldmVudE1lbnVTcGlsbCgpIHtcbiAgICAgICAgdmFyIHdpbmRvd1dpZHRoID0gJGood2luZG93KS53aWR0aCgpO1xuICAgICAgICAkaigndWwubGV2ZWwwJykuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIHVsID0gJGoodGhpcyk7XG4gICAgICAgICAgICAvL1Nob3cgaXQgbG9uZyBlbm91Z2ggdG8gZ2V0IGluZm8sIHRoZW4gaGlkZSBpdC5cbiAgICAgICAgICAgIHVsLmFkZENsYXNzKCdwb3NpdGlvbi10ZXN0Jyk7XG4gICAgICAgICAgICB1bC5yZW1vdmVDbGFzcygnc3BpbGwnKTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHVsLm91dGVyV2lkdGgoKTtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSB1bC5vZmZzZXQoKS5sZWZ0O1xuICAgICAgICAgICAgdWwucmVtb3ZlQ2xhc3MoJ3Bvc2l0aW9uLXRlc3QnKTtcbiAgICAgICAgICAgIC8vQWRkIHRoZSBzcGlsbCBjbGFzcyBpZiBpdCB3aWxsIHNwaWxsIG9mZiB0aGUgcGFnZS5cbiAgICAgICAgICAgIGlmICgob2Zmc2V0ICsgd2lkdGgpID4gd2luZG93V2lkdGgpIHtcbiAgICAgICAgICAgICAgICB1bC5hZGRDbGFzcygnc3BpbGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHByZXZlbnRNZW51U3BpbGwoKTtcbiAgICAkaih3aW5kb3cpLm9uKCdkZWxheWVkLXJlc2l6ZScsIHByZXZlbnRNZW51U3BpbGwpO1xuXG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gTGFuZ3VhZ2UgU3dpdGNoZXJcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAvLyBJbiBvcmRlciB0byBkaXNwbGF5IHRoZSBsYW5ndWFnZSBzd2l0Y2hlciBuZXh0IHRvIHRoZSBsb2dvLCB3ZSBhcmUgbW92aW5nIHRoZSBjb250ZW50IGF0IGRpZmZlcmVudCB2aWV3cG9ydHMsXG4gICAgLy8gcmF0aGVyIHRoYW4gaGF2aW5nIGR1cGxpY2F0ZSBtYXJrdXAgb3IgY2hhbmdpbmcgdGhlIGRlc2lnblxuICAgIGVucXVpcmUucmVnaXN0ZXIoJyhtYXgtd2lkdGg6ICcgKyBicC5tZWRpdW0gKyAncHgpJywge1xuICAgICAgICBtYXRjaDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJGooJy5wYWdlLWhlYWRlci1jb250YWluZXIgLnN0b3JlLWxhbmd1YWdlLWNvbnRhaW5lcicpLnByZXBlbmQoJGooJy5mb3JtLWxhbmd1YWdlJykpO1xuICAgICAgICB9LFxuICAgICAgICB1bm1hdGNoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkaignLmhlYWRlci1sYW5ndWFnZS1jb250YWluZXIgLnN0b3JlLWxhbmd1YWdlLWNvbnRhaW5lcicpLnByZXBlbmQoJGooJy5mb3JtLWxhbmd1YWdlJykpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gRW5xdWlyZSBKU1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIGVucXVpcmUucmVnaXN0ZXIoJ3NjcmVlbiBhbmQgKG1pbi13aWR0aDogJyArIChicC5tZWRpdW0gKyAxKSArICdweCknLCB7XG4gICAgICAgIG1hdGNoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkaignLm1lbnUtYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ21lbnUtYWN0aXZlJyk7XG4gICAgICAgICAgICAkaignLnN1Yi1tZW51LWFjdGl2ZScpLnJlbW92ZUNsYXNzKCdzdWItbWVudS1hY3RpdmUnKTtcbiAgICAgICAgICAgICRqKCcuc2tpcC1hY3RpdmUnKS5yZW1vdmVDbGFzcygnc2tpcC1hY3RpdmUnKTtcbiAgICAgICAgfSxcbiAgICAgICAgdW5tYXRjaDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJGooJy5tZW51LWFjdGl2ZScpLnJlbW92ZUNsYXNzKCdtZW51LWFjdGl2ZScpO1xuICAgICAgICAgICAgJGooJy5zdWItbWVudS1hY3RpdmUnKS5yZW1vdmVDbGFzcygnc3ViLW1lbnUtYWN0aXZlJyk7XG4gICAgICAgICAgICAkaignLnNraXAtYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ3NraXAtYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBVSSBQYXR0ZXJuIC0gTWVkaWEgU3dpdGNoZXJcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAvLyBVc2VkIHRvIHN3YXAgcHJpbWFyeSBwcm9kdWN0IHBob3RvIGZyb20gdGh1bWJuYWlscy5cblxuICAgIHZhciBtZWRpYUxpc3RMaW5rcyA9ICRqKCcubWVkaWEtbGlzdCcpLmZpbmQoJ2EnKTtcbiAgICB2YXIgbWVkaWFQcmltYXJ5SW1hZ2UgPSAkaignLnByaW1hcnktaW1hZ2UnKS5maW5kKCdpbWcnKTtcblxuICAgIGlmIChtZWRpYUxpc3RMaW5rcy5sZW5ndGgpIHtcbiAgICAgICAgbWVkaWFMaXN0TGlua3Mub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgdmFyIHNlbGYgPSAkaih0aGlzKTtcblxuICAgICAgICAgICAgbWVkaWFQcmltYXJ5SW1hZ2UuYXR0cignc3JjJywgc2VsZi5hdHRyKCdocmVmJykpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gVUkgUGF0dGVybiAtIFRvZ2dsZVNpbmdsZVxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIC8vIFVzZSB0aGlzIHBsdWdpbiB0byB0b2dnbGUgdGhlIHZpc2liaWxpdHkgb2YgY29udGVudCBiYXNlZCBvbiBhIHRvZ2dsZSBsaW5rL2VsZW1lbnQuXG4gICAgLy8gVGhpcyBwYXR0ZXJuIGRpZmZlcnMgZnJvbSB0aGUgYWNjb3JkaW9uIGZ1bmN0aW9uYWxpdHkgaW4gdGhlIFRvZ2dsZSBwYXR0ZXJuIGluIHRoYXQgZWFjaCB0b2dnbGUgZ3JvdXAgYWN0c1xuICAgIC8vIGluZGVwZW5kZW50bHkgb2YgdGhlIG90aGVycy4gSXQgaXMgbmFtZWQgc28gYXMgbm90IHRvIGJlIGNvbmZ1c2VkIHdpdGggdGhlIFRvZ2dsZSBwYXR0ZXJuIGJlbG93XG4gICAgLy9cbiAgICAvLyBUaGlzIHBsdWdpbiByZXF1aXJlcyBhIHNwZWNpZmljIG1hcmt1cCBzdHJ1Y3R1cmUuIFRoZSBwbHVnaW4gZXhwZWN0cyBhIHNldCBvZiBlbGVtZW50cyB0aGF0IGl0XG4gICAgLy8gd2lsbCB1c2UgYXMgdGhlIHRvZ2dsZSBsaW5rLiBJdCB0aGVuIGhpZGVzIGFsbCBpbW1lZGlhdGVseSBmb2xsb3dpbmcgc2libGluZ3MgYW5kIHRvZ2dsZXMgdGhlIHNpYmxpbmcnc1xuICAgIC8vIHZpc2liaWxpdHkgd2hlbiB0aGUgdG9nZ2xlIGxpbmsgaXMgY2xpY2tlZC5cbiAgICAvL1xuICAgIC8vIEV4YW1wbGUgbWFya3VwOlxuICAgIC8vIDxkaXYgY2xhc3M9XCJibG9ja1wiPlxuICAgIC8vICAgICA8ZGl2IGNsYXNzPVwiYmxvY2stdGl0bGVcIj5UcmlnZ2VyPC9kaXY+XG4gICAgLy8gICAgIDxkaXYgY2xhc3M9XCJibG9jay1jb250ZW50XCI+Q29udGVudCB0aGF0IHNob3VsZCBzaG93IHdoZW4gPC9kaXY+XG4gICAgLy8gPC9kaXY+XG4gICAgLy9cbiAgICAvLyBKUzogalF1ZXJ5KCcuYmxvY2stdGl0bGUnKS50b2dnbGVTaW5nbGUoKTtcbiAgICAvL1xuICAgIC8vIE9wdGlvbnM6XG4gICAgLy8gICAgIGRlc3RydWN0OiBkZWZhdWx0cyB0byBmYWxzZSwgYnV0IGlmIHRydWUsIHRoZSBwbHVnaW4gd2lsbCByZW1vdmUgaXRzZWxmLCBkaXNwbGF5IGNvbnRlbnQsIGFuZCByZW1vdmUgZXZlbnQgaGFuZGxlcnNcblxuXG4gICAgalF1ZXJ5LmZuLnRvZ2dsZVNpbmdsZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cbiAgICAgICAgLy8gcGFzc2luZyBkZXN0cnVjdDogdHJ1ZSBhbGxvd3NcbiAgICAgICAgdmFyIHNldHRpbmdzID0gJGouZXh0ZW5kKHtcbiAgICAgICAgICAgIGRlc3RydWN0OiBmYWxzZVxuICAgICAgICB9LCBvcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghc2V0dGluZ3MuZGVzdHJ1Y3QpIHtcbiAgICAgICAgICAgICAgICAkaih0aGlzKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRqKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAubmV4dCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAudG9nZ2xlQ2xhc3MoJ25vLWRpc3BsYXknKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBIaWRlIHRoZSBjb250ZW50XG4gICAgICAgICAgICAgICAgJGoodGhpcykubmV4dCgpLmFkZENsYXNzKCduby1kaXNwbGF5Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBldmVudCBoYW5kbGVyIHNvIHRoYXQgdGhlIHRvZ2dsZSBsaW5rIGNhbiBubyBsb25nZXIgYmUgdXNlZFxuICAgICAgICAgICAgICAgICRqKHRoaXMpLm9mZignY2xpY2snKTtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgYWxsIGNsYXNzZXMgdGhhdCB3ZXJlIGFkZGVkIGJ5IHRoaXMgcGx1Z2luXG4gICAgICAgICAgICAgICAgJGoodGhpcylcbiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxuICAgICAgICAgICAgICAgICAgICAubmV4dCgpXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnbm8tZGlzcGxheScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBVSSBQYXR0ZXJuIC0gVG9nZ2xlIENvbnRlbnQgKHRhYnMgYW5kIGFjY29yZGlvbnMgaW4gb25lIHNldHVwKVxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICBcbiAgICAkaignLnRvZ2dsZS1jb250ZW50JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3cmFwcGVyID0galF1ZXJ5KHRoaXMpO1xuXG4gICAgICAgIHZhciBoYXNUYWJzID0gd3JhcHBlci5oYXNDbGFzcygndGFicycpO1xuICAgICAgICB2YXIgaGFzQWNjb3JkaW9uID0gd3JhcHBlci5oYXNDbGFzcygnYWNjb3JkaW9uJyk7XG4gICAgICAgIHZhciBzdGFydE9wZW4gPSB3cmFwcGVyLmhhc0NsYXNzKCdvcGVuJyk7XG5cbiAgICAgICAgdmFyIGRsID0gd3JhcHBlci5jaGlsZHJlbignZGw6Zmlyc3QnKTtcbiAgICAgICAgdmFyIGR0cyA9IGRsLmNoaWxkcmVuKCdkdCcpO1xuICAgICAgICB2YXIgcGFuZXMgPSBkbC5jaGlsZHJlbignZGQnKTtcbiAgICAgICAgdmFyIGdyb3VwcyA9IG5ldyBBcnJheShkdHMsIHBhbmVzKTtcblxuICAgICAgICAvL0NyZWF0ZSBhIHVsIGZvciB0YWJzIGlmIG5lY2Vzc2FyeS5cbiAgICAgICAgaWYgKGhhc1RhYnMpIHtcbiAgICAgICAgICAgIHZhciB1bCA9IGpRdWVyeSgnPHVsIGNsYXNzPVwidG9nZ2xlLXRhYnNcIj48L3VsPicpO1xuICAgICAgICAgICAgZHRzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBkdCA9IGpRdWVyeSh0aGlzKTtcbiAgICAgICAgICAgICAgICB2YXIgbGkgPSBqUXVlcnkoJzxsaT48L2xpPicpO1xuICAgICAgICAgICAgICAgIGxpLmh0bWwoZHQuaHRtbCgpKTtcbiAgICAgICAgICAgICAgICB1bC5hcHBlbmQobGkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB1bC5pbnNlcnRCZWZvcmUoZGwpO1xuICAgICAgICAgICAgdmFyIGxpcyA9IHVsLmNoaWxkcmVuKCk7XG4gICAgICAgICAgICBncm91cHMucHVzaChsaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9BZGQgXCJsYXN0XCIgY2xhc3Nlcy5cbiAgICAgICAgdmFyIGk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBncm91cHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGdyb3Vwc1tpXS5maWx0ZXIoJzpsYXN0JykuYWRkQ2xhc3MoJ2xhc3QnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUNsYXNzZXMoY2xpY2tlZEl0ZW0sIGdyb3VwKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBncm91cC5pbmRleChjbGlja2VkSXRlbSk7XG4gICAgICAgICAgICB2YXIgaTtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBncm91cHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBncm91cHNbaV0ucmVtb3ZlQ2xhc3MoJ2N1cnJlbnQnKTtcbiAgICAgICAgICAgICAgICBncm91cHNbaV0uZXEoaW5kZXgpLmFkZENsYXNzKCdjdXJyZW50Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvL1RvZ2dsZSBvbiB0YWIgKGR0KSBjbGljay5cbiAgICAgICAgZHRzLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAvL1RoZXkgY2xpY2tlZCB0aGUgY3VycmVudCBkdCB0byBjbG9zZSBpdC4gUmVzdG9yZSB0aGUgd3JhcHBlciB0byB1bmNsaWNrZWQgc3RhdGUuXG4gICAgICAgICAgICBpZiAoalF1ZXJ5KHRoaXMpLmhhc0NsYXNzKCdjdXJyZW50JykgJiYgd3JhcHBlci5oYXNDbGFzcygnYWNjb3JkaW9uLW9wZW4nKSkge1xuICAgICAgICAgICAgICAgIHdyYXBwZXIucmVtb3ZlQ2xhc3MoJ2FjY29yZGlvbi1vcGVuJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vVGhleSdyZSBjbGlja2luZyBzb21ldGhpbmcgbmV3LiBSZWZsZWN0IHRoZSBleHBsaWNpdCB1c2VyIGludGVyYWN0aW9uLlxuICAgICAgICAgICAgICAgIHdyYXBwZXIuYWRkQ2xhc3MoJ2FjY29yZGlvbi1vcGVuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b2dnbGVDbGFzc2VzKGpRdWVyeSh0aGlzKSwgZHRzKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy9Ub2dnbGUgb24gdGFiIChsaSkgY2xpY2suXG4gICAgICAgIGlmIChoYXNUYWJzKSB7XG4gICAgICAgICAgICBsaXMub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB0b2dnbGVDbGFzc2VzKGpRdWVyeSh0aGlzKSwgbGlzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy9PcGVuIHRoZSBmaXJzdCB0YWIuXG4gICAgICAgICAgICBsaXMuZXEoMCkudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vT3BlbiB0aGUgZmlyc3QgYWNjb3JkaW9uIGlmIGRlc2lyZWQuXG4gICAgICAgIGlmIChzdGFydE9wZW4pIHtcbiAgICAgICAgICAgIGR0cy5lcSgwKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICB9XG5cbiAgICB9KTtcblxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIExheWVyZWQgTmF2aWdhdGlvbiBCbG9ja1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIC8vIE9uIHByb2R1Y3QgbGlzdCBwYWdlcywgd2Ugd2FudCB0byBzaG93IHRoZSBsYXllcmVkIG5hdi9jYXRlZ29yeSBtZW51IGltbWVkaWF0ZWx5IGFib3ZlIHRoZSBwcm9kdWN0IGxpc3QuXG4gICAgLy8gV2hpbGUgaXQgd291bGQgbWFrZSBtb3JlIHNlbnNlIHRvIGp1c3QgbW92ZSB0aGUgLmJsb2NrLWxheWVyZWQtbmF2IGJsb2NrIHJhdGhlciB0aGFuIC5jb2wtbGVmdC1maXJzdFxuICAgIC8vIChzaW5jZSBvdGhlciBibG9ja3MgY2FuIGJlIGluc2VydGVkIGludG8gbGVmdF9maXJzdCksIGl0IGNyZWF0ZXMgc2ltcGxlciBjb2RlIHRvIG1vdmUgdGhlIGVudGlyZVxuICAgIC8vIC5jb2wtbGVmdC1maXJzdCBibG9jaywgc28gdGhhdCBpcyB0aGUgYXBwcm9hY2ggd2UncmUgdGFraW5nXG4gICAgaWYgKCRqKCcuY29sLWxlZnQtZmlyc3QgPiAuYmxvY2snKS5sZW5ndGggJiYgJGooJy5jYXRlZ29yeS1wcm9kdWN0cycpLmxlbmd0aCkge1xuICAgICAgICBlbnF1aXJlLnJlZ2lzdGVyKCdzY3JlZW4gYW5kIChtYXgtd2lkdGg6ICcgKyBicC5tZWRpdW0gKyAncHgpJywge1xuICAgICAgICAgICAgbWF0Y2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkaignLmNvbC1sZWZ0LWZpcnN0JykuaW5zZXJ0QmVmb3JlKCRqKCcuY2F0ZWdvcnktcHJvZHVjdHMnKSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1bm1hdGNoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gTW92ZSBsYXllcmVkIG5hdiBiYWNrIHRvIGxlZnQgY29sdW1uXG4gICAgICAgICAgICAgICAgJGooJy5jb2wtbGVmdC1maXJzdCcpLmluc2VydEJlZm9yZSgkaignLmNvbC1tYWluJykpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyAzIGNvbHVtbiBsYXlvdXRcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAvLyBPbiB2aWV3cG9ydHMgc21hbGxlciB0aGFuIDEwMDBweCwgbW92ZSB0aGUgcmlnaHQgY29sdW1uIGludG8gdGhlIGxlZnQgY29sdW1uXG4gICAgaWYgKCRqKCcubWFpbi1jb250YWluZXIuY29sMy1sYXlvdXQnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGVucXVpcmUucmVnaXN0ZXIoJ3NjcmVlbiBhbmQgKG1heC13aWR0aDogMTAwMHB4KScsIHtcbiAgICAgICAgICAgIG1hdGNoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJpZ2h0Q29sdW1uID0gJGooJy5jb2wtcmlnaHQnKTtcbiAgICAgICAgICAgICAgICB2YXIgY29sV3JhcHBlciA9ICRqKCcuY29sLXdyYXBwZXInKTtcblxuICAgICAgICAgICAgICAgIHJpZ2h0Q29sdW1uLmFwcGVuZFRvKGNvbFdyYXBwZXIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVubWF0Y2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmlnaHRDb2x1bW4gPSAkaignLmNvbC1yaWdodCcpO1xuICAgICAgICAgICAgICAgIHZhciBtYWluID0gJGooJy5tYWluJyk7XG5cbiAgICAgICAgICAgICAgICByaWdodENvbHVtbi5hcHBlbmRUbyhtYWluKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gQmxvY2sgY29sbGFwc2luZyAob24gc21hbGxlciB2aWV3cG9ydHMpXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgZW5xdWlyZS5yZWdpc3RlcignKG1heC13aWR0aDogJyArIGJwLm1lZGl1bSArICdweCknLCB7XG4gICAgICAgIHNldHVwOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUVsZW1lbnRzID0gJGooXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBzZWxlY3RzIHRoZSBtZW51IG9uIHRoZSBNeSBBY2NvdW50IGFuZCBDTVMgcGFnZXNcbiAgICAgICAgICAgICAgICAnLmNvbC1sZWZ0LWZpcnN0IC5ibG9jazpub3QoLmJsb2NrLWxheWVyZWQtbmF2KSAuYmxvY2stdGl0bGUsICcgK1xuICAgICAgICAgICAgICAgICAgICAnLmNvbC1sZWZ0LWZpcnN0IC5ibG9jay1sYXllcmVkLW5hdiAuYmxvY2stc3VidGl0bGUtLWZpbHRlciwgJyArXG4gICAgICAgICAgICAgICAgICAgICcuc2lkZWJhcjpub3QoLmNvbC1sZWZ0LWZpcnN0KSAuYmxvY2sgLmJsb2NrLXRpdGxlJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfSxcbiAgICAgICAgbWF0Y2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlRWxlbWVudHMudG9nZ2xlU2luZ2xlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHVubWF0Y2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlRWxlbWVudHMudG9nZ2xlU2luZ2xlKHtkZXN0cnVjdDogdHJ1ZX0pO1xuICAgICAgICB9XG4gICAgfSk7XG5cblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBPUEMgLSBQcm9ncmVzcyBCbG9ja1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIGlmICgkaignYm9keS5jaGVja291dC1vbmVwYWdlLWluZGV4JykubGVuZ3RoKSB7XG4gICAgICAgIGVucXVpcmUucmVnaXN0ZXIoJyhtYXgtd2lkdGg6ICcgKyBicC5sYXJnZSArICdweCknLCB7XG4gICAgICAgICAgICBtYXRjaDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICRqKCcjY2hlY2tvdXQtc3RlcC1yZXZpZXcnKS5wcmVwZW5kKCRqKCcjY2hlY2tvdXQtcHJvZ3Jlc3Mtd3JhcHBlcicpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1bm1hdGNoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJGooJy5jb2wtcmlnaHQnKS5wcmVwZW5kKCRqKCcjY2hlY2tvdXQtcHJvZ3Jlc3Mtd3JhcHBlcicpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gQ2hlY2tvdXQgQ2FydCAtIGV2ZW50c1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIGlmICgkaignYm9keS5jaGVja291dC1jYXJ0LWluZGV4JykubGVuZ3RoKSB7XG4gICAgICAgICRqKCdpbnB1dFtuYW1lXj1cImNhcnRcIl0nKS5mb2N1cyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkaih0aGlzKS5zaWJsaW5ncygnYnV0dG9uJykuZmFkZUluKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIEdpZnQgUmVnaXN0cnkgU3R5bGVzXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgaWYgKCRqKCcuYS1sZWZ0JykubGVuZ3RoKSB7XG4gICAgICAgIGVucXVpcmUucmVnaXN0ZXIoJyhtYXgtd2lkdGg6ICcgKyBicC5sYXJnZSArICdweCknLCB7XG4gICAgICAgICAgICBtYXRjaDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICRqKCcuZ2lmdC1pbmZvJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICRqKHRoaXMpLm5leHQoJ3RkJykuY2hpbGRyZW4oJ3RleHRhcmVhJykuYXBwZW5kVG8odGhpcykuY2hpbGRyZW4oKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVubWF0Y2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkaignLmxlZnQtbm90ZScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICRqKHRoaXMpLnByZXYoJ3RkJykuY2hpbGRyZW4oJ3RleHRhcmVhJykuYXBwZW5kVG8odGhpcykuY2hpbGRyZW4oKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBQcm9kdWN0IExpc3RpbmcgLSBBbGlnbiBhY3Rpb24gYnV0dG9ucy9saW5rc1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIC8vIFNpbmNlIHRoZSBudW1iZXIgb2YgY29sdW1ucyBwZXIgZ3JpZCB3aWxsIHZhcnkgYmFzZWQgb24gdGhlIHZpZXdwb3J0IHNpemUsIHRoZSBvbmx5IHdheSB0byBhbGlnbiB0aGUgYWN0aW9uXG4gICAgLy8gYnV0dG9ucy9saW5rcyBpcyB2aWEgSlNcblxuICAgIGlmICgkaignLnByb2R1Y3RzLWdyaWQnKS5sZW5ndGgpIHtcblxuICAgICAgICB2YXIgYWxpZ25Qcm9kdWN0R3JpZEFjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBMb29wIHRocm91Z2ggZWFjaCBwcm9kdWN0IGdyaWQgb24gdGhlIHBhZ2VcbiAgICAgICAgICAgICRqKCcucHJvZHVjdHMtZ3JpZCcpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB2YXIgZ3JpZFJvd3MgPSBbXTsgLy8gVGhpcyB3aWxsIHN0b3JlIGFuIGFycmF5IHBlciByb3dcbiAgICAgICAgICAgICAgICB2YXIgdGVtcFJvdyA9IFtdO1xuICAgICAgICAgICAgICAgIHByb2R1Y3RHcmlkRWxlbWVudHMgPSAkaih0aGlzKS5jaGlsZHJlbignbGknKTtcbiAgICAgICAgICAgICAgICBwcm9kdWN0R3JpZEVsZW1lbnRzLmVhY2goZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBKUyBvdWdodCB0byBiZSBhZ25vc3RpYyBvZiB0aGUgc3BlY2lmaWMgQ1NTIGJyZWFrcG9pbnRzLCBzbyB3ZSBhcmUgZHluYW1pY2FsbHkgY2hlY2tpbmcgdG8gZmluZFxuICAgICAgICAgICAgICAgICAgICAvLyBlYWNoIHJvdyBieSBncm91cGluZyBhbGwgY2VsbHMgKGVnLCBsaSBlbGVtZW50cykgdXAgdW50aWwgd2UgZmluZCBhbiBlbGVtZW50IHRoYXQgaXMgY2xlYXJlZC5cbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgYXJlIGlnbm9yaW5nIHRoZSBmaXJzdCBjZWxsIHNpbmNlIGl0IHdpbGwgYWx3YXlzIGJlIGNsZWFyZWQuXG4gICAgICAgICAgICAgICAgICAgIGlmICgkaih0aGlzKS5jc3MoJ2NsZWFyJykgIT0gJ25vbmUnICYmIGluZGV4ICE9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRSb3dzLnB1c2godGVtcFJvdyk7IC8vIEFkZCB0aGUgcHJldmlvdXMgc2V0IG9mIHJvd3MgdG8gdGhlIG1haW4gYXJyYXlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBSb3cgPSBbXTsgLy8gUmVzZXQgdGhlIGFycmF5IHNpbmNlIHdlJ3JlIG9uIGEgbmV3IHJvd1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRlbXBSb3cucHVzaCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgbGFzdCByb3cgd2lsbCBub3QgY29udGFpbiBhbnkgY2VsbHMgdGhhdCBjbGVhciB0aGF0IHJvdywgc28gd2UgY2hlY2sgdG8gc2VlIGlmIHRoaXMgaXMgdGhlIGxhc3QgY2VsbFxuICAgICAgICAgICAgICAgICAgICAvLyBpbiB0aGUgZ3JpZCwgYW5kIGlmIHNvLCB3ZSBhZGQgaXRzIHJvdyB0byB0aGUgYXJyYXlcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2R1Y3RHcmlkRWxlbWVudHMubGVuZ3RoID09IGluZGV4ICsgMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFJvd3MucHVzaCh0ZW1wUm93KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgJGouZWFjaChncmlkUm93cywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFsbGVzdFByb2R1Y3RJbmZvID0gMDtcbiAgICAgICAgICAgICAgICAgICAgJGouZWFjaCh0aGlzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBldmVyeSB0aW1lIHRoZSBwYWdlIGlzIHJlc2l6ZWQsIHdlIG5lZWQgdG8gcmVtb3ZlIHRoZSBtaW4taGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgYm90dG9tLXBhZGRpbmcgc28gZWFjaCBjZWxsIGNhbiByZXR1cm4gdG8gaXRzIG5hdHVyYWwgc2l6ZSBiZWZvcmUgYmVpbmcgbWVhc3VyZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAkaih0aGlzKS5maW5kKCcucHJvZHVjdC1pbmZvJykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYWRkaW5nLWJvdHRvbSc6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgYXJlIGNoZWNraW5nIHRoZSBoZWlnaHQgb2YgLnByb2R1Y3QtaW5mbyAocmF0aGVyIHRoYW4gdGhlIGVudGlyZSBsaSksIGJlY2F1c2UgdGhlIGltYWdlc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2lsbCBub3QgYmUgbG9hZGVkIHdoZW4gdGhpcyBKUyBpcyBydW4uXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdEluZm9IZWlnaHQgPSAkaih0aGlzKS5maW5kKCcucHJvZHVjdC1pbmZvJykuaGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTcGFjZSBhYm92ZSAuYWN0aW9ucyBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aW9uU3BhY2luZyA9IDEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGhlaWdodCBvZiB0aGUgYWJzb2x1dGVseSBwb3NpdGlvbmVkIC5hY3Rpb25zIGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3Rpb25IZWlnaHQgPSAkaih0aGlzKS5maW5kKCcucHJvZHVjdC1pbmZvIC5hY3Rpb25zJykuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCBoZWlnaHQgb2YgdHdvIGVsZW1lbnRzLiBUaGlzIGlzIG5lY2Vzc2FyeSBzaW5jZSAuYWN0aW9ucyBpcyBhYnNvbHV0ZWx5IHBvc2l0aW9uZWQgYW5kIHdvbid0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiZSBpbmNsdWRlZCBpbiB0aGUgaGVpZ2h0IG9mIC5wcm9kdWN0LWluZm9cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b3RhbEhlaWdodCA9IHByb2R1Y3RJbmZvSGVpZ2h0ICsgYWN0aW9uU3BhY2luZyArIGFjdGlvbkhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b3RhbEhlaWdodCA+IHRhbGxlc3RQcm9kdWN0SW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhbGxlc3RQcm9kdWN0SW5mbyA9IHRvdGFsSGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIGJvdHRvbS1wYWRkaW5nIHRvIGFjY29tbW9kYXRlIHRoZSBoZWlnaHQgb2YgdGhlIC5hY3Rpb25zIGVsZW1lbnQuIE5vdGU6IGlmIC5hY3Rpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlbGVtZW50cyBhcmUgb2YgdmFyeWluZyBoZWlnaHRzLCB0aGV5IHdpbGwgbm90IGJlIGFsaWduZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAkaih0aGlzKS5maW5kKCcucHJvZHVjdC1pbmZvJykuY3NzKCdwYWRkaW5nLWJvdHRvbScsIGFjdGlvbkhlaWdodCArICdweCcpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBoZWlnaHQgb2YgYWxsIC5wcm9kdWN0LWluZm8gZWxlbWVudHMgaW4gYSByb3cgdG8gdGhlIHRhbGxlc3QgaGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgICRqLmVhY2godGhpcywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGoodGhpcykuZmluZCgnLnByb2R1Y3QtaW5mbycpLmNzcygnbWluLWhlaWdodCcsIHRhbGxlc3RQcm9kdWN0SW5mbyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgYWxpZ25Qcm9kdWN0R3JpZEFjdGlvbnMoKTtcblxuICAgICAgICAvLyBTaW5jZSB0aGUgaGVpZ2h0IG9mIGVhY2ggY2VsbCBhbmQgdGhlIG51bWJlciBvZiBjb2x1bW5zIHBlciBwYWdlIG1heSBjaGFuZ2Ugd2hlbiB0aGUgcGFnZSBpcyByZXNpemVkLCB3ZSBhcmVcbiAgICAgICAgLy8gZ29pbmcgdG8gcnVuIHRoZSBhbGlnbm1lbnQgZnVuY3Rpb24gZWFjaCB0aW1lIHRoZSBwYWdlIGlzIHJlc2l6ZWQuXG4gICAgICAgICRqKHdpbmRvdykub24oJ2RlbGF5ZWQtcmVzaXplJywgZnVuY3Rpb24gKGUsIHJlc2l6ZUV2ZW50KSB7XG4gICAgICAgICAgICBhbGlnblByb2R1Y3RHcmlkQWN0aW9ucygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gR2VuZXJpYywgZWZmaWNpZW50IHdpbmRvdyByZXNpemUgaGFuZGxlclxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIC8vIFVzaW5nIHNldFRpbWVvdXQgc2luY2UgV2ViLUtpdCBhbmQgc29tZSBvdGhlciBicm93c2VycyBjYWxsIHRoZSByZXNpemUgZnVuY3Rpb24gY29uc3RhbnRseSB1cG9uIHdpbmRvdyByZXNpemluZy5cbiAgICB2YXIgcmVzaXplVGltZXI7XG4gICAgJGood2luZG93KS5yZXNpemUoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHJlc2l6ZVRpbWVyKTtcbiAgICAgICAgcmVzaXplVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRqKHdpbmRvdykudHJpZ2dlcignZGVsYXllZC1yZXNpemUnLCBlKTtcbiAgICAgICAgfSwgMjUwKTtcbiAgICB9KTtcbn0pO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBQRFAgLSBpbWFnZSB6b29tIC0gbmVlZHMgdG8gYmUgYXZhaWxhYmxlIG91dHNpZGUgZG9jdW1lbnQucmVhZHkgc2NvcGVcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxudmFyIFByb2R1Y3RNZWRpYU1hbmFnZXIgPSB7XG4gICAgSU1BR0VfWk9PTV9USFJFU0hPTEQ6IDIwLFxuICAgIGltYWdlV3JhcHBlcjogbnVsbCxcblxuICAgIGRlc3Ryb3lab29tOiBmdW5jdGlvbigpIHtcbiAgICAgICAgJGooJy56b29tQ29udGFpbmVyJykucmVtb3ZlKCk7XG4gICAgICAgICRqKCcucHJvZHVjdC1pbWFnZS1nYWxsZXJ5IC5nYWxsZXJ5LWltYWdlJykucmVtb3ZlRGF0YSgnZWxldmF0ZVpvb20nKTtcbiAgICB9LFxuXG4gICAgY3JlYXRlWm9vbTogZnVuY3Rpb24oaW1hZ2UpIHtcbiAgICAgICAgLy8gRGVzdHJveSBzaW5jZSB6b29tIHNob3VsZG4ndCBiZSBlbmFibGVkIHVuZGVyIGNlcnRhaW4gY29uZGl0aW9uc1xuICAgICAgICBQcm9kdWN0TWVkaWFNYW5hZ2VyLmRlc3Ryb3lab29tKCk7XG5cbiAgICAgICAgaWYoXG4gICAgICAgICAgICAvLyBEb24ndCB1c2Ugem9vbSBvbiBkZXZpY2VzIHdoZXJlIHRvdWNoIGhhcyBiZWVuIHVzZWRcbiAgICAgICAgICAgIFBvaW50ZXJNYW5hZ2VyLmdldFBvaW50ZXIoKSA9PSBQb2ludGVyTWFuYWdlci5UT1VDSF9QT0lOVEVSX1RZUEVcbiAgICAgICAgICAgIC8vIERvbid0IHVzZSB6b29tIHdoZW4gc2NyZWVuIGlzIHNtYWxsLCBvciBlbHNlIHpvb20gd2luZG93IHNob3dzIG91dHNpZGUgYm9keVxuICAgICAgICAgICAgfHwgTW9kZXJuaXpyLm1xKFwic2NyZWVuIGFuZCAobWF4LXdpZHRoOlwiICsgYnAubWVkaXVtICsgXCJweClcIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIHpvb20gbm90IGVuYWJsZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGltYWdlLmxlbmd0aCA8PSAwKSB7IC8vbm8gaW1hZ2UgZm91bmRcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGltYWdlWzBdLm5hdHVyYWxXaWR0aCAmJiBpbWFnZVswXS5uYXR1cmFsSGVpZ2h0KSB7XG4gICAgICAgICAgICB2YXIgd2lkdGhEaWZmID0gaW1hZ2VbMF0ubmF0dXJhbFdpZHRoIC0gaW1hZ2Uud2lkdGgoKSAtIFByb2R1Y3RNZWRpYU1hbmFnZXIuSU1BR0VfWk9PTV9USFJFU0hPTEQ7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0RGlmZiA9IGltYWdlWzBdLm5hdHVyYWxIZWlnaHQgLSBpbWFnZS5oZWlnaHQoKSAtIFByb2R1Y3RNZWRpYU1hbmFnZXIuSU1BR0VfWk9PTV9USFJFU0hPTEQ7XG5cbiAgICAgICAgICAgIGlmKHdpZHRoRGlmZiA8IDAgJiYgaGVpZ2h0RGlmZiA8IDApIHtcbiAgICAgICAgICAgICAgICAvL2ltYWdlIG5vdCBiaWcgZW5vdWdoXG5cbiAgICAgICAgICAgICAgICBpbWFnZS5wYXJlbnRzKCcucHJvZHVjdC1pbWFnZScpLnJlbW92ZUNsYXNzKCd6b29tLWF2YWlsYWJsZScpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbWFnZS5wYXJlbnRzKCcucHJvZHVjdC1pbWFnZScpLmFkZENsYXNzKCd6b29tLWF2YWlsYWJsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaW1hZ2UuZWxldmF0ZVpvb20oKTtcbiAgICB9LFxuXG4gICAgc3dhcEltYWdlOiBmdW5jdGlvbih0YXJnZXRJbWFnZSkge1xuICAgICAgICB0YXJnZXRJbWFnZSA9ICRqKHRhcmdldEltYWdlKTtcbiAgICAgICAgdGFyZ2V0SW1hZ2UuYWRkQ2xhc3MoJ2dhbGxlcnktaW1hZ2UnKTtcblxuICAgICAgICBQcm9kdWN0TWVkaWFNYW5hZ2VyLmRlc3Ryb3lab29tKCk7XG5cbiAgICAgICAgdmFyIGltYWdlR2FsbGVyeSA9ICRqKCcucHJvZHVjdC1pbWFnZS1nYWxsZXJ5Jyk7XG5cbiAgICAgICAgaWYodGFyZ2V0SW1hZ2VbMF0uY29tcGxldGUpIHsgLy9pbWFnZSBhbHJlYWR5IGxvYWRlZCAtLSBzd2FwIGltbWVkaWF0ZWx5XG5cbiAgICAgICAgICAgIGltYWdlR2FsbGVyeS5maW5kKCcuZ2FsbGVyeS1pbWFnZScpLnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XG5cbiAgICAgICAgICAgIC8vbW92ZSB0YXJnZXQgaW1hZ2UgdG8gY29ycmVjdCBwbGFjZSwgaW4gY2FzZSBpdCdzIG5lY2Vzc2FyeVxuICAgICAgICAgICAgaW1hZ2VHYWxsZXJ5LmFwcGVuZCh0YXJnZXRJbWFnZSk7XG5cbiAgICAgICAgICAgIC8vcmV2ZWFsIG5ldyBpbWFnZVxuICAgICAgICAgICAgdGFyZ2V0SW1hZ2UuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcblxuICAgICAgICAgICAgLy93aXJlIHpvb20gb24gbmV3IGltYWdlXG4gICAgICAgICAgICBQcm9kdWN0TWVkaWFNYW5hZ2VyLmNyZWF0ZVpvb20odGFyZ2V0SW1hZ2UpO1xuXG4gICAgICAgIH0gZWxzZSB7IC8vbmVlZCB0byB3YWl0IGZvciBpbWFnZSB0byBsb2FkXG5cbiAgICAgICAgICAgIC8vYWRkIHNwaW5uZXJcbiAgICAgICAgICAgIGltYWdlR2FsbGVyeS5hZGRDbGFzcygnbG9hZGluZycpO1xuXG4gICAgICAgICAgICAvL21vdmUgdGFyZ2V0IGltYWdlIHRvIGNvcnJlY3QgcGxhY2UsIGluIGNhc2UgaXQncyBuZWNlc3NhcnlcbiAgICAgICAgICAgIGltYWdlR2FsbGVyeS5hcHBlbmQodGFyZ2V0SW1hZ2UpO1xuXG4gICAgICAgICAgICAvL3dhaXQgdW50aWwgaW1hZ2UgaXMgbG9hZGVkXG4gICAgICAgICAgICBpbWFnZXNMb2FkZWQodGFyZ2V0SW1hZ2UsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8vcmVtb3ZlIHNwaW5uZXJcbiAgICAgICAgICAgICAgICBpbWFnZUdhbGxlcnkucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcnKTtcblxuICAgICAgICAgICAgICAgIC8vaGlkZSBvbGQgaW1hZ2VcbiAgICAgICAgICAgICAgICBpbWFnZUdhbGxlcnkuZmluZCgnLmdhbGxlcnktaW1hZ2UnKS5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xuXG4gICAgICAgICAgICAgICAgLy9yZXZlYWwgbmV3IGltYWdlXG4gICAgICAgICAgICAgICAgdGFyZ2V0SW1hZ2UuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcblxuICAgICAgICAgICAgICAgIC8vd2lyZSB6b29tIG9uIG5ldyBpbWFnZVxuICAgICAgICAgICAgICAgIFByb2R1Y3RNZWRpYU1hbmFnZXIuY3JlYXRlWm9vbSh0YXJnZXRJbWFnZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG4gICAgfSxcblxuICAgIHdpcmVUaHVtYm5haWxzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgLy90cmlnZ2VyIGltYWdlIGNoYW5nZSBldmVudCBvbiB0aHVtYm5haWwgY2xpY2tcbiAgICAgICAgJGooJy5wcm9kdWN0LWltYWdlLXRodW1icyAudGh1bWItbGluaycpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBqbGluayA9ICRqKHRoaXMpO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9ICRqKCcjaW1hZ2UtJyArIGpsaW5rLmRhdGEoJ2ltYWdlLWluZGV4JykpO1xuXG4gICAgICAgICAgICBQcm9kdWN0TWVkaWFNYW5hZ2VyLnN3YXBJbWFnZSh0YXJnZXQpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgaW5pdFpvb206IGZ1bmN0aW9uKCkge1xuICAgICAgICBQcm9kdWN0TWVkaWFNYW5hZ2VyLmNyZWF0ZVpvb20oJGooXCIuZ2FsbGVyeS1pbWFnZS52aXNpYmxlXCIpKTsgLy9zZXQgem9vbSBvbiBmaXJzdCBpbWFnZVxuICAgIH0sXG5cbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgUHJvZHVjdE1lZGlhTWFuYWdlci5pbWFnZVdyYXBwZXIgPSAkaignLnByb2R1Y3QtaW1nLWJveCcpO1xuXG4gICAgICAgIC8vIFJlLWluaXRpYWxpemUgem9vbSBvbiB2aWV3cG9ydCBzaXplIGNoYW5nZSBzaW5jZSByZXNpemluZyBjYXVzZXMgcHJvYmxlbXMgd2l0aCB6b29tIGFuZCBzaW5jZSBzbWFsbGVyXG4gICAgICAgIC8vIHZpZXdwb3J0IHNpemVzIHNob3VsZG4ndCBoYXZlIHpvb21cbiAgICAgICAgJGood2luZG93KS5vbignZGVsYXllZC1yZXNpemUnLCBmdW5jdGlvbihlLCByZXNpemVFdmVudCkge1xuICAgICAgICAgICAgUHJvZHVjdE1lZGlhTWFuYWdlci5pbml0Wm9vbSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBQcm9kdWN0TWVkaWFNYW5hZ2VyLmluaXRab29tKCk7XG5cbiAgICAgICAgUHJvZHVjdE1lZGlhTWFuYWdlci53aXJlVGh1bWJuYWlscygpO1xuXG4gICAgICAgICRqKGRvY3VtZW50KS50cmlnZ2VyKCdwcm9kdWN0LW1lZGlhLWxvYWRlZCcsIFByb2R1Y3RNZWRpYU1hbmFnZXIpO1xuICAgIH1cbn07XG5cbiRqKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICBQcm9kdWN0TWVkaWFNYW5hZ2VyLmluaXQoKTtcbn0pO1xuIl19null