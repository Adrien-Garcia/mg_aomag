var App={};App={debug:function(e){console.log(e)}},jQuery(document).ready(function(e){App.Common.init(),App.Menu.init(),App.Home.init(),App.Product.init(),App.Cart.init()}),App.Cart={init:function(){jQuery("body").hasClass("checkout-cart-index")&&(this.debug("Cart : init start"),this.refreshCart(),this.debug("Cart : init end"))},refreshCart:function(){jQuery(".btn-update").click(function(){jQuery(this).addClass("refreshing"),jQuery("#form-cart").submit()})},debug:function(e){App.debug(e)}},App.Common={init:function(){this.debug("Common : init start"),this.qtyUpdate(),this.debug("Common : init end")},qtyUpdate:function(){jQuery("input.qty").click(function(){var e=this;e.focus(),e.setSelectionRange(0,999)})},debug:function(e){App.debug(e)}},App.Home={init:function(){jQuery("body").hasClass("cms-index-index")&&(this.debug("Home : init start"),this.homeCaroussel(),this.homeTabs(),this.debug("Home : init start"))},homeCaroussel:function(){jQuery(".cms-home .slideshow").bxSlider({minSlides:1,maxSlides:1,slideWidth:1263,auto:!0,slideMargin:0})},homeTabs:function(){jQuery(".product-grid-mea .category_name").appendTo(".tabs .titles"),jQuery(".cms-home .tabs .titles a").click(function(e){e.preventDefault(),jQuery(".cms-home .tabs .titles a").removeClass("current");var t=jQuery(this).addClass("current").index();jQuery(this).parent().parent().find("> *").slice(1).hide().eq(t).show()}).eq(0).click()},debug:function(e){App.debug(e)}},App.Menu={init:function(){this.debug("Menu : init start"),this.equalHeight(),this.debug("Menu : init end")},equalHeight:function(){var e;jQuery("li.level0").mouseover(function(){var t=jQuery(this),i=0;jQuery("li.level1",t).each(function(e,t){jQuery(t).height()>i&&(i=jQuery(t).height())}).height(i),e=setInterval(function(){var e=0;jQuery("li.level1",t).each(function(t,i){jQuery(i).height()>e&&(e=jQuery(i).height())}).height(e)},200)}).mouseout(function(){clearInterval(e)})},debug:function(e){App.debug(e)}},App.Product={init:function(){jQuery("body").hasClass("catalog-product-view")&&(this.debug("Product : init start"),this.productGallery(),this.mouseTrap(),this.upsellCarrousel(),this.commentLayer(),this.debug("Product : init end"))},mouseTrap:function(){jQuery(".mousetrap").live("click",function(){var e=jQuery(this).prev("a").attr("href"),i=jQuery(".more-views li:not(.bx-clone)"),r=0;i.each(function(t,i){jQuery(i).find("a[href='"+e+"']").attr("href")==e&&(r=t)}),jQuery.fancybox(t,{helpers:{thumbs:{width:50,height:50}},index:r})})},upsellCarrousel:function(){jQuery("#upsell-product-table > li").size()>4&&jQuery("#upsell-product-table").bxSlider({minSlides:4,maxSlides:4,slideWidth:225,pager:!0,controls:!1,slideMargin:20,responsive:!1})},commentLayer:function(){if(jQuery(".add-my-review, .no-rating a").click(function(e){e.preventDefault(),jQuery.fancybox(jQuery(".product-view .box-reviews .form-add"))}),jQuery("#product-review-table .radio").each(function(){jQuery(this).wrap("<span />")}).change(function(e){if(jQuery("#product-review-table span").removeClass("on"),this.checked){var t=this,i=!0;jQuery("#product-review-table .radio").each(function(e,r){i&&(jQuery(this).parent().addClass("on"),t==r&&(i=!1))})}}),jQuery("body").hasClass("catalog-product-view")&&location.search.length>0){var e=location.search.substring(1),t=JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}');void 0===t.p&&void 0===t.limit||(window.location="#customer-reviews")}},productGallery:function(){t=new Array,jQuery(".more-views li a").each(function(){t[t.length]=jQuery(this).attr("href")}),jQuery(".more-views li").length>6&&jQuery(".bxslider").bxSlider({minSlides:6,maxSlides:6,slideWidth:68,pager:!1,slideMargin:10}),jQuery(".more-views .bxslider a").each(function(e,t){var i=jQuery(t).attr("rel"),r=i.substring(i.indexOf("http"),i.lastIndexOf("'"));jQuery("#zoom-1 img").attr("src")==r&&jQuery(t).parents("li").addClass("current")}),jQuery(".cloud-zoom, .cloud-zoom-gallery").CloudZoom(),jQuery(".more-views img").bind("click",function(e){jQuery(this).parents("li").addClass("current").siblings().removeClass("current");var t=jQuery(this).attr("src");jQuery(this).parents("ul").find("img[src='"+t+"']").parents("li").addClass("current")})},debug:function(e){App.debug(e)}};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNhcnQuanMiLCJjb21tb24uanMiLCJob21lLmpzIiwibWVudS5qcyIsInByb2R1Y3QuanMiXSwibmFtZXMiOlsiQXBwIiwiZGVidWciLCJ0IiwiY29uc29sZSIsImxvZyIsImpRdWVyeSIsImRvY3VtZW50IiwicmVhZHkiLCIkIiwiQ29tbW9uIiwiaW5pdCIsIk1lbnUiLCJIb21lIiwiUHJvZHVjdCIsIkNhcnQiLCJoYXNDbGFzcyIsInRoaXMiLCJyZWZyZXNoQ2FydCIsImNsaWNrIiwiYWRkQ2xhc3MiLCJzdWJtaXQiLCJxdHlVcGRhdGUiLCJpbnB1dCIsImZvY3VzIiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJob21lQ2Fyb3Vzc2VsIiwiaG9tZVRhYnMiLCJieFNsaWRlciIsIm1pblNsaWRlcyIsIm1heFNsaWRlcyIsInNsaWRlV2lkdGgiLCJhdXRvIiwic2xpZGVNYXJnaW4iLCJhcHBlbmRUbyIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInJlbW92ZUNsYXNzIiwiaSIsImluZGV4IiwicGFyZW50IiwiZmluZCIsInNsaWNlIiwiaGlkZSIsImVxIiwic2hvdyIsImVxdWFsSGVpZ2h0IiwiaWQiLCJtb3VzZW92ZXIiLCJvIiwibWF4IiwiZWFjaCIsImVsZW1lbnQiLCJoZWlnaHQiLCJzZXRJbnRlcnZhbCIsIm1vdXNlb3V0IiwiY2xlYXJJbnRlcnZhbCIsInByb2R1Y3RHYWxsZXJ5IiwibW91c2VUcmFwIiwidXBzZWxsQ2Fycm91c2VsIiwiY29tbWVudExheWVyIiwibGl2ZSIsImhyZWYiLCJwcmV2IiwiYXR0ciIsImxpIiwiaWR4IiwiZmFuY3lib3giLCJoZWxwZXJzIiwidGh1bWJzIiwid2lkdGgiLCJzaXplIiwicGFnZXIiLCJjb250cm9scyIsInJlc3BvbnNpdmUiLCJ3cmFwIiwiY2hhbmdlIiwiY2hlY2tlZCIsInRlc3QiLCJsb2NhdGlvbiIsInNlYXJjaCIsImxlbmd0aCIsInN1YnN0cmluZyIsInVybFBhcmFtZXRlcnMiLCJKU09OIiwicGFyc2UiLCJkZWNvZGVVUkkiLCJyZXBsYWNlIiwidW5kZWZpbmVkIiwicCIsImxpbWl0Iiwid2luZG93IiwiQXJyYXkiLCJlbCIsImEiLCJiIiwiaW5kZXhPZiIsImxhc3RJbmRleE9mIiwicGFyZW50cyIsIkNsb3VkWm9vbSIsImJpbmQiLCJzaWJsaW5ncyIsInVybCJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsT0FHQUEsTUFFQUMsTUFBQSxTQUFBQyxHQUNBQyxRQUFBQyxJQUFBRixLQUtBRyxPQUFBQyxVQUFBQyxNQUFBLFNBQUFDLEdBQ0FSLElBQUFTLE9BQUFDLE9BQ0FWLElBQUFXLEtBQUFELE9BQ0FWLElBQUFZLEtBQUFGLE9BQ0FWLElBQUFhLFFBQUFILE9BQ0FWLElBQUFjLEtBQUFKLFNDZEFWLElBQUFjLE1BRUFKLEtBQUEsV0FFQUwsT0FBQSxRQUFBVSxTQUFBLHlCQUVBQyxLQUFBZixNQUFBLHFCQUVBZSxLQUFBQyxjQUVBRCxLQUFBZixNQUFBLHFCQUtBZ0IsWUFBQSxXQUNBWixPQUFBLGVBQUFhLE1BQUEsV0FDQWIsT0FBQVcsTUFBQUcsU0FBQSxjQUNBZCxPQUFBLGNBQUFlLFlBSUFuQixNQUFBLFNBQUFDLEdBQ0FGLElBQUFDLE1BQUFDLEtDakJBRixJQUFBUyxRQUVBQyxLQUFBLFdBRUFNLEtBQUFmLE1BQUEsdUJBQ0FlLEtBQUFLLFlBQ0FMLEtBQUFmLE1BQUEsc0JBSUFvQixVQUFBLFdBRUFoQixPQUFBLGFBQUFhLE1BQUEsV0FDQSxHQUFBSSxHQUFBTixJQUNBTSxHQUFBQyxRQUNBRCxFQUFBRSxrQkFBQSxFQUFBLFFBS0F2QixNQUFBLFNBQUFDLEdBQ0FGLElBQUFDLE1BQUFDLEtDM0JBRixJQUFBWSxNQUVBRixLQUFBLFdBRUFMLE9BQUEsUUFBQVUsU0FBQSxxQkFFQUMsS0FBQWYsTUFBQSxxQkFDQWUsS0FBQVMsZ0JBQ0FULEtBQUFVLFdBQ0FWLEtBQUFmLE1BQUEsdUJBSUF3QixjQUFBLFdBRUFwQixPQUFBLHdCQUFBc0IsVUFDQUMsVUFBQSxFQUNBQyxVQUFBLEVBQ0FDLFdBQUEsS0FDQUMsTUFBQSxFQUNBQyxZQUFBLEtBS0FOLFNBQUEsV0FFQXJCLE9BQUEsb0NBQUE0QixTQUFBLGlCQUNBNUIsT0FBQSw2QkFBQWEsTUFBQSxTQUFBZ0IsR0FDQUEsRUFBQUMsaUJBQ0E5QixPQUFBLDZCQUFBK0IsWUFBQSxVQUNBLElBQUFDLEdBQUFoQyxPQUFBVyxNQUFBRyxTQUFBLFdBQUFtQixPQUNBakMsUUFBQVcsTUFBQXVCLFNBQUFBLFNBQUFDLEtBQUEsT0FBQUMsTUFBQSxHQUFBQyxPQUFBQyxHQUFBTixHQUFBTyxTQUNBRCxHQUFBLEdBQUF6QixTQUlBakIsTUFBQSxTQUFBQyxHQUNBRixJQUFBQyxNQUFBQyxLQ3RDQUYsSUFBQVcsTUFFQUQsS0FBQSxXQUVBTSxLQUFBZixNQUFBLHFCQUVBZSxLQUFBNkIsY0FFQTdCLEtBQUFmLE1BQUEsb0JBSUE0QyxZQUFBLFdBRUEsR0FBQUMsRUFDQXpDLFFBQUEsYUFBQTBDLFVBQUEsV0FDQSxHQUFBQyxHQUFBM0MsT0FBQVcsTUFFQWlDLEVBQUEsQ0FDQTVDLFFBQUEsWUFBQTJDLEdBQUFFLEtBQUEsU0FBQVosRUFBQWEsR0FDQTlDLE9BQUE4QyxHQUFBQyxTQUFBSCxJQUNBQSxFQUFBNUMsT0FBQThDLEdBQUFDLFlBRUFBLE9BQUFILEdBRUFILEVBQUFPLFlBQUEsV0FDQSxHQUFBSixHQUFBLENBQ0E1QyxRQUFBLFlBQUEyQyxHQUFBRSxLQUFBLFNBQUFaLEVBQUFhLEdBQ0E5QyxPQUFBOEMsR0FBQUMsU0FBQUgsSUFDQUEsRUFBQTVDLE9BQUE4QyxHQUFBQyxZQUVBQSxPQUFBSCxJQUNBLE9BQ0FLLFNBQUEsV0FDQUMsY0FBQVQsTUFLQTdDLE1BQUEsU0FBQUMsR0FDQUYsSUFBQUMsTUFBQUMsS0N4Q0FGLElBQUFhLFNBRUFILEtBQUEsV0FFQUwsT0FBQSxRQUFBVSxTQUFBLDBCQUVBQyxLQUFBZixNQUFBLHdCQUNBZSxLQUFBd0MsaUJBQ0F4QyxLQUFBeUMsWUFDQXpDLEtBQUEwQyxrQkFDQTFDLEtBQUEyQyxlQUNBM0MsS0FBQWYsTUFBQSx3QkFJQXdELFVBQUEsV0FFQXBELE9BQUEsY0FBQXVELEtBQUEsUUFBQSxXQUNBLEdBQUFDLEdBQUF4RCxPQUFBVyxNQUFBOEMsS0FBQSxLQUFBQyxLQUFBLFFBQ0FDLEVBQUEzRCxPQUFBLGlDQUNBNEQsRUFBQSxDQUNBRCxHQUFBZCxLQUFBLFNBQUFaLEVBQUFhLEdBQ0E5QyxPQUFBOEMsR0FBQVgsS0FBQSxXQUFBcUIsRUFBQSxNQUFBRSxLQUFBLFNBQUFGLElBQ0FJLEVBQUEzQixLQUdBakMsT0FBQTZELFNBQUFoRSxHQUNBaUUsU0FDQUMsUUFDQUMsTUFBQSxHQUNBakIsT0FBQSxLQUdBZCxNQUFBMkIsT0FNQVAsZ0JBQUEsV0FFQXJELE9BQUEsOEJBQUFpRSxPQUFBLEdBQ0FqRSxPQUFBLHlCQUFBc0IsVUFDQUMsVUFBQSxFQUNBQyxVQUFBLEVBQ0FDLFdBQUEsSUFDQXlDLE9BQUEsRUFDQUMsVUFBQSxFQUNBeEMsWUFBQSxHQUNBeUMsWUFBQSxLQU1BZCxhQUFBLFdBeUJBLEdBdkJBdEQsT0FBQSxnQ0FBQWEsTUFBQSxTQUFBZ0IsR0FDQUEsRUFBQUMsaUJBQ0E5QixPQUFBNkQsU0FBQTdELE9BQUEsMkNBR0FBLE9BQUEsZ0NBQUE2QyxLQUFBLFdBQ0E3QyxPQUFBVyxNQUFBMEQsS0FBQSxjQUNBQyxPQUFBLFNBQUF6QyxHQUVBLEdBREE3QixPQUFBLDhCQUFBK0IsWUFBQSxNQUNBcEIsS0FBQTRELFFBQUEsQ0FDQSxHQUFBNUIsR0FBQWhDLEtBQ0E2RCxHQUFBLENBQ0F4RSxRQUFBLGdDQUFBNkMsS0FBQSxTQUFBWixFQUFBYSxHQUNBMEIsSUFDQXhFLE9BQUFXLE1BQUF1QixTQUFBcEIsU0FBQSxNQUNBNkIsR0FBQUcsSUFDQTBCLEdBQUEsU0FPQXhFLE9BQUEsUUFBQVUsU0FBQSx5QkFBQStELFNBQUFDLE9BQUFDLE9BQUEsRUFBQSxDQUNBLEdBQUFELEdBQUFELFNBQUFDLE9BQUFFLFVBQUEsR0FDQUMsRUFBQUMsS0FBQUMsTUFBQSxLQUFBQyxVQUFBTixHQUFBTyxRQUFBLEtBQUEsT0FBQUEsUUFBQSxLQUFBLE9BQUFBLFFBQUEsS0FBQSxPQUFBLEtBQ0FDLFVBQUFMLEVBQUFNLEdBQUFELFNBQUFMLEVBQUFPLFFBQ0FDLE9BQUFaLFNBQUEsdUJBTUF0QixlQUFBLFdBRUF0RCxFQUFBLEdBQUF5RixPQUNBdEYsT0FBQSxvQkFBQTZDLEtBQUEsV0FDQWhELEVBQUFBLEVBQUE4RSxRQUFBM0UsT0FBQVcsTUFBQStDLEtBQUEsVUFHQTFELE9BQUEsa0JBQUEyRSxPQUFBLEdBRUEzRSxPQUFBLGFBQUFzQixVQUNBQyxVQUFBLEVBQ0FDLFVBQUEsRUFDQUMsV0FBQSxHQUNBeUMsT0FBQSxFQUNBdkMsWUFBQSxLQUtBM0IsT0FBQSwyQkFBQTZDLEtBQUEsU0FBQWUsRUFBQTJCLEdBQ0EsR0FBQUMsR0FBQXhGLE9BQUF1RixHQUFBN0IsS0FBQSxPQUNBK0IsRUFBQUQsRUFBQVosVUFBQVksRUFBQUUsUUFBQSxRQUFBRixFQUFBRyxZQUFBLEtBRUEzRixRQUFBLGVBQUEwRCxLQUFBLFFBQUErQixHQUNBekYsT0FBQXVGLEdBQUFLLFFBQUEsTUFBQTlFLFNBQUEsYUFLQWQsT0FBQSxvQ0FBQTZGLFlBRUE3RixPQUFBLG1CQUFBOEYsS0FBQSxRQUFBLFNBQUFqRSxHQUNBN0IsT0FBQVcsTUFBQWlGLFFBQUEsTUFBQTlFLFNBQUEsV0FBQWlGLFdBQUFoRSxZQUFBLFVBQ0EsSUFBQWlFLEdBQUFoRyxPQUFBVyxNQUFBK0MsS0FBQSxNQUNBMUQsUUFBQVcsTUFBQWlGLFFBQUEsTUFBQXpELEtBQUEsWUFBQTZELEVBQUEsTUFBQUosUUFBQSxNQUFBOUUsU0FBQSxjQUtBbEIsTUFBQSxTQUFBQyxHQUNBRixJQUFBQyxNQUFBQyIsImZpbGUiOiJhbGwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQXBwID0ge307XG4vL3ZhciAkID0galF1ZXJ5O1xuXG5BcHAgPSB7XG5cbiAgZGVidWc6IGZ1bmN0aW9uICh0KSB7XG4gICAgICBjb25zb2xlLmxvZyh0KTtcbiAgfVxuXG59XG5cbmpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oJCkge1xuICAgIEFwcC5Db21tb24uaW5pdCgpO1xuICAgIEFwcC5NZW51LmluaXQoKTtcbiAgICBBcHAuSG9tZS5pbml0KCk7XG4gICAgQXBwLlByb2R1Y3QuaW5pdCgpO1xuICAgIEFwcC5DYXJ0LmluaXQoKTtcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5BcHAuQ2FydCA9IHtcblxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIGlmKCAhalF1ZXJ5KFwiYm9keVwiKS5oYXNDbGFzcyhcImNoZWNrb3V0LWNhcnQtaW5kZXhcIikgKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5kZWJ1ZyhcIkNhcnQgOiBpbml0IHN0YXJ0XCIpO1xuXG4gICAgICAgIHRoaXMucmVmcmVzaENhcnQoKTtcblxuICAgICAgICB0aGlzLmRlYnVnKFwiQ2FydCA6IGluaXQgZW5kXCIpO1xuXG4gICAgfSxcblxuICAgIC8vIENhcnQgdXBkYXRlXG4gICAgcmVmcmVzaENhcnQgOiBmdW5jdGlvbigpIHtcbiAgICAgIGpRdWVyeShcIi5idG4tdXBkYXRlXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGpRdWVyeSh0aGlzKS5hZGRDbGFzcyhcInJlZnJlc2hpbmdcIik7XG4gICAgICAgICAgalF1ZXJ5KFwiI2Zvcm0tY2FydFwiKS5zdWJtaXQoKTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBkZWJ1ZzogZnVuY3Rpb24odCkge1xuICAgICAgICBBcHAuZGVidWcodCk7XG4gICAgfVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLypcbiAqIFBsdWdpbiBqUXVlcnkgZCdpbml0aWxpc2F0aW9uIGRlcyB2YWxldXJzIHBhciBkw6lmYXV0IHN1ciBsZXMgY2hhbXBzIHRleHRlXG4gKiBBdSBjbGljLCBzaSBsZSBjaGFtcCBjb250aWVudCBsYSB2YWxldXIgcGFyIGTDqWZhdXQsIGNlbHVpLWNpIGVzdCB2aWTDqS5cbiAqIFF1YW5kIG9uIHF1aXR0ZSBsZSBjaGFtcCwgc2kgY2VsdWktY2kgZXN0IHZpZGUsIG9uIHJlbWV0IGxhIHZhbGV1ciBwYXIgZMOpZmF1dC5cbiAqL1xuXG5BcHAuQ29tbW9uID0ge1xuXG4gIGluaXQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICB0aGlzLmRlYnVnKFwiQ29tbW9uIDogaW5pdCBzdGFydFwiKTtcbiAgICAgIHRoaXMucXR5VXBkYXRlKCk7XG4gICAgICB0aGlzLmRlYnVnKFwiQ29tbW9uIDogaW5pdCBlbmRcIik7XG5cbiAgfSxcblxuICBxdHlVcGRhdGU6IGZ1bmN0aW9uKCkge1xuXG4gICAgalF1ZXJ5KFwiaW5wdXQucXR5XCIpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgaW5wdXQgPSB0aGlzO1xuICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICAgIGlucHV0LnNldFNlbGVjdGlvblJhbmdlKDAsOTk5KTtcbiAgICB9KTtcblxuICB9LFxuXG4gIGRlYnVnOiBmdW5jdGlvbih0KSB7XG4gICAgICBBcHAuZGVidWcodCk7XG4gIH1cblxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5BcHAuSG9tZSA9IHtcblxuICBpbml0OiBmdW5jdGlvbigpIHtcblxuICAgIGlmKCAhalF1ZXJ5KFwiYm9keVwiKS5oYXNDbGFzcyhcImNtcy1pbmRleC1pbmRleFwiKSApIHJldHVybjtcblxuICAgIHRoaXMuZGVidWcoXCJIb21lIDogaW5pdCBzdGFydFwiKTtcbiAgICB0aGlzLmhvbWVDYXJvdXNzZWwoKTtcbiAgICB0aGlzLmhvbWVUYWJzKCk7XG4gICAgdGhpcy5kZWJ1ZyhcIkhvbWUgOiBpbml0IHN0YXJ0XCIpO1xuXG4gIH0sXG5cbiAgaG9tZUNhcm91c3NlbDogZnVuY3Rpb24oKSB7XG5cbiAgXHRqUXVlcnkoJy5jbXMtaG9tZSAuc2xpZGVzaG93JykuYnhTbGlkZXIoe1xuICBcdFx0bWluU2xpZGVzOiAxLFxuICBcdFx0bWF4U2xpZGVzOiAxLFxuICBcdFx0c2xpZGVXaWR0aDogMTI2MyxcbiAgXHRcdGF1dG86IHRydWUsXG4gIFx0XHRzbGlkZU1hcmdpbjogMFxuICBcdH0pO1xuXG4gIH0sXG5cbiAgaG9tZVRhYnM6IGZ1bmN0aW9uKCkge1xuXG4gICAgalF1ZXJ5KFwiLnByb2R1Y3QtZ3JpZC1tZWEgLmNhdGVnb3J5X25hbWVcIikuYXBwZW5kVG8oXCIudGFicyAudGl0bGVzXCIpO1xuICBcdGpRdWVyeShcIi5jbXMtaG9tZSAudGFicyAudGl0bGVzIGFcIikuY2xpY2soZnVuY3Rpb24oZSkge1xuICBcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBcdFx0alF1ZXJ5KFwiLmNtcy1ob21lIC50YWJzIC50aXRsZXMgYVwiKS5yZW1vdmVDbGFzcyhcImN1cnJlbnRcIik7XG4gIFx0XHR2YXIgaSA9IGpRdWVyeSh0aGlzKS5hZGRDbGFzcyhcImN1cnJlbnRcIikuaW5kZXgoKTtcbiAgXHRcdGpRdWVyeSh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKFwiPiAqXCIpLnNsaWNlKDEpLmhpZGUoKS5lcShpKS5zaG93KCk7XG4gIFx0fSkuZXEoMCkuY2xpY2soKTtcblxuICB9LFxuXG4gIGRlYnVnOiBmdW5jdGlvbih0KSB7XG4gICAgICBBcHAuZGVidWcodCk7XG4gIH1cblxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5BcHAuTWVudSA9IHtcblxuICBpbml0OiBmdW5jdGlvbigpIHtcblxuICAgICAgdGhpcy5kZWJ1ZyhcIk1lbnUgOiBpbml0IHN0YXJ0XCIpO1xuXG4gICAgICB0aGlzLmVxdWFsSGVpZ2h0KCk7XG5cbiAgICAgIHRoaXMuZGVidWcoXCJNZW51IDogaW5pdCBlbmRcIik7XG5cbiAgfSxcblxuICBlcXVhbEhlaWdodDogZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgaWQ7XG4gIFx0alF1ZXJ5KFwibGkubGV2ZWwwXCIpLm1vdXNlb3ZlcihmdW5jdGlvbigpIHtcbiAgXHRcdHZhciBvID0galF1ZXJ5KHRoaXMpO1xuXG4gIFx0XHR2YXIgbWF4ID0gMDtcbiAgXHRcdGpRdWVyeShcImxpLmxldmVsMVwiLCBvKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XG4gIFx0XHRcdGlmKGpRdWVyeShlbGVtZW50KS5oZWlnaHQoKSA+IG1heCkge1xuICBcdFx0XHRcdG1heCA9IGpRdWVyeShlbGVtZW50KS5oZWlnaHQoKTtcbiAgXHRcdFx0fVxuICBcdFx0fSkuaGVpZ2h0KG1heCk7XG5cbiAgXHRcdGlkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gIFx0XHRcdHZhciBtYXggPSAwO1xuICBcdFx0XHRqUXVlcnkoXCJsaS5sZXZlbDFcIiwgbykuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICBcdFx0XHRcdGlmKGpRdWVyeShlbGVtZW50KS5oZWlnaHQoKSA+IG1heCkge1xuICBcdFx0XHRcdFx0bWF4ID0galF1ZXJ5KGVsZW1lbnQpLmhlaWdodCgpO1xuICBcdFx0XHRcdH1cbiAgXHRcdFx0fSkuaGVpZ2h0KG1heCk7XG4gIFx0XHR9LCAyMDApO1xuICBcdH0pLm1vdXNlb3V0KGZ1bmN0aW9uKCkge1xuICBcdFx0Y2xlYXJJbnRlcnZhbChpZCk7XG4gIFx0fSk7XG5cbiAgfSxcblxuICBkZWJ1ZzogZnVuY3Rpb24odCkge1xuICAgICAgQXBwLmRlYnVnKHQpO1xuICB9XG5cbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuQXBwLlByb2R1Y3QgPSB7XG5cbiAgaW5pdDogZnVuY3Rpb24oKXtcblxuICAgIGlmKCAhalF1ZXJ5KFwiYm9keVwiKS5oYXNDbGFzcyhcImNhdGFsb2ctcHJvZHVjdC12aWV3XCIpICkgcmV0dXJuO1xuXG4gICAgdGhpcy5kZWJ1ZyhcIlByb2R1Y3QgOiBpbml0IHN0YXJ0XCIpO1xuICAgIHRoaXMucHJvZHVjdEdhbGxlcnkoKTtcbiAgICB0aGlzLm1vdXNlVHJhcCgpO1xuICAgIHRoaXMudXBzZWxsQ2Fycm91c2VsKCk7XG4gICAgdGhpcy5jb21tZW50TGF5ZXIoKTtcbiAgICB0aGlzLmRlYnVnKFwiUHJvZHVjdCA6IGluaXQgZW5kXCIpO1xuXG4gIH0sXG5cbiAgbW91c2VUcmFwOiBmdW5jdGlvbigpIHtcblxuICAgIGpRdWVyeShcIi5tb3VzZXRyYXBcIikubGl2ZShcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICBcdFx0dmFyIGhyZWYgPSBqUXVlcnkodGhpcykucHJldihcImFcIikuYXR0cihcImhyZWZcIik7XG4gIFx0XHR2YXIgbGkgPSBqUXVlcnkoXCIubW9yZS12aWV3cyBsaTpub3QoLmJ4LWNsb25lKVwiKTtcbiAgXHRcdHZhciBpZHggPSAwO1xuICBcdFx0bGkuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICBcdFx0XHRpZihqUXVlcnkoZWxlbWVudCkuZmluZChcImFbaHJlZj0nXCIgKyBocmVmICsgXCInXVwiKS5hdHRyKFwiaHJlZlwiKSA9PSBocmVmKSB7XG4gIFx0XHRcdFx0aWR4ID0gaW5kZXg7XG4gIFx0XHRcdH1cbiAgXHRcdH0pO1xuICBcdFx0alF1ZXJ5LmZhbmN5Ym94KHQsIHtcblx0XHQgICAgaGVscGVyczogIHtcblx0ICAgICAgICB0aHVtYnMgOiB7XG4gICAgICAgICAgICB3aWR0aDogNTAsXG4gICAgICAgICAgICBoZWlnaHQ6IDUwXG5cdCAgICAgICAgfVxuXHRcdCAgICB9LFxuXHRcdCAgICBpbmRleDogaWR4XG4gIFx0XHR9KTtcbiAgXHR9KTtcblxuICB9LFxuXG4gIHVwc2VsbENhcnJvdXNlbDogZnVuY3Rpb24oKSB7XG5cbiAgICBpZiAoalF1ZXJ5KFwiI3Vwc2VsbC1wcm9kdWN0LXRhYmxlID4gbGlcIikuc2l6ZSgpID4gNCkge1xuICBcdFx0alF1ZXJ5KCcjdXBzZWxsLXByb2R1Y3QtdGFibGUnKS5ieFNsaWRlcih7XG4gIFx0XHRcdG1pblNsaWRlczogNCxcbiAgXHRcdFx0bWF4U2xpZGVzOiA0LFxuICBcdFx0XHRzbGlkZVdpZHRoOiAyMjUsXG4gIFx0XHRcdHBhZ2VyOiB0cnVlLFxuICBcdFx0XHRjb250cm9sczogZmFsc2UsXG4gIFx0XHRcdHNsaWRlTWFyZ2luOiAyMCxcbiAgXHRcdFx0cmVzcG9uc2l2ZTogZmFsc2VcbiAgXHRcdH0pO1xuICBcdH1cblxuICB9LFxuXG4gIGNvbW1lbnRMYXllcjogZnVuY3Rpb24oKSB7XG5cbiAgICBqUXVlcnkoXCIuYWRkLW15LXJldmlldywgLm5vLXJhdGluZyBhXCIpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgXHRcdGUucHJldmVudERlZmF1bHQoKTtcbiAgXHRcdGpRdWVyeS5mYW5jeWJveChqUXVlcnkoXCIucHJvZHVjdC12aWV3IC5ib3gtcmV2aWV3cyAuZm9ybS1hZGRcIikpO1xuICBcdH0pO1xuXG4gICAgalF1ZXJ5KFwiI3Byb2R1Y3QtcmV2aWV3LXRhYmxlIC5yYWRpb1wiKS5lYWNoKGZ1bmN0aW9uKCkge1xuICBcdFx0alF1ZXJ5KHRoaXMpLndyYXAoXCI8c3BhbiAvPlwiKTtcbiAgXHR9KS5jaGFuZ2UoZnVuY3Rpb24oZSkge1xuICBcdFx0alF1ZXJ5KFwiI3Byb2R1Y3QtcmV2aWV3LXRhYmxlIHNwYW5cIikucmVtb3ZlQ2xhc3MoXCJvblwiKTtcbiAgXHRcdGlmKHRoaXMuY2hlY2tlZCkge1xuICBcdFx0XHR2YXIgbyA9IHRoaXM7XG4gIFx0XHRcdHZhciB0ZXN0ID0gdHJ1ZTtcbiAgXHRcdFx0alF1ZXJ5KFwiI3Byb2R1Y3QtcmV2aWV3LXRhYmxlIC5yYWRpb1wiKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XG4gIFx0XHRcdFx0aWYodGVzdCkge1xuICBcdFx0XHRcdFx0alF1ZXJ5KHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKFwib25cIik7XG4gIFx0XHRcdFx0XHRpZihvID09IGVsZW1lbnQpIHtcbiAgXHRcdFx0XHRcdFx0dGVzdCA9IGZhbHNlO1xuICBcdFx0XHRcdFx0fVxuICBcdFx0XHRcdH1cbiAgXHRcdFx0fSk7XG4gIFx0XHR9XG4gIFx0fSk7XG5cbiAgICBpZihqUXVlcnkoXCJib2R5XCIpLmhhc0NsYXNzKFwiY2F0YWxvZy1wcm9kdWN0LXZpZXdcIikgJiYgbG9jYXRpb24uc2VhcmNoLmxlbmd0aCA+IDApIHtcbiAgXHRcdHZhciBzZWFyY2ggPSBsb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpO1xuICBcdFx0dmFyIHVybFBhcmFtZXRlcnMgPSBKU09OLnBhcnNlKCd7XCInICsgZGVjb2RlVVJJKHNlYXJjaCkucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpLnJlcGxhY2UoLyYvZywgJ1wiLFwiJykucmVwbGFjZSgvPS9nLCdcIjpcIicpICsgJ1wifScpO1xuICBcdFx0aWYodXJsUGFyYW1ldGVycy5wICE9PSB1bmRlZmluZWQgfHwgdXJsUGFyYW1ldGVycy5saW1pdCAhPT0gdW5kZWZpbmVkKSB7XG4gIFx0XHRcdHdpbmRvdy5sb2NhdGlvbiA9IFwiI2N1c3RvbWVyLXJldmlld3NcIjtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgfSxcblxuICBwcm9kdWN0R2FsbGVyeTogZnVuY3Rpb24oKSB7XG5cbiAgICB0ID0gbmV3IEFycmF5KCk7XG4gICAgalF1ZXJ5KFwiLm1vcmUtdmlld3MgbGkgYVwiKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICB0W3QubGVuZ3RoXSA9IGpRdWVyeSh0aGlzKS5hdHRyKFwiaHJlZlwiKTtcbiAgICB9KTtcblxuICAgIGlmIChqUXVlcnkoXCIubW9yZS12aWV3cyBsaVwiKS5sZW5ndGggPiA2KSB7XG4gICAgICAgIC8qIE9uIGluaXRpYWxpemUgYnhTbGlkZXIgc2kgb24gZXN0IHN1ciBsYSBwYWdlIHByb2R1aXQgKi9cbiAgICAgICAgalF1ZXJ5KCcuYnhzbGlkZXInKS5ieFNsaWRlcih7XG4gICAgICAgICAgICBtaW5TbGlkZXM6IDYsXG4gICAgICAgICAgICBtYXhTbGlkZXM6IDYsXG4gICAgICAgICAgICBzbGlkZVdpZHRoOiA2OCxcbiAgICAgICAgICAgIHBhZ2VyOiBmYWxzZSxcbiAgICAgICAgICAgIHNsaWRlTWFyZ2luOiAxMFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKiBQZXJtZXQgZGUgbWV0dHJlIGwnw6l0YXQgY3VycmVudCBzdXIgbGEgYm9ubm5lIG1pbmlhdHVyZSBhdSBjaGFyZ2VtZW50ICovXG4gICAgalF1ZXJ5KFwiLm1vcmUtdmlld3MgLmJ4c2xpZGVyIGFcIikuZWFjaChmdW5jdGlvbihpZHgsZWwpe1xuICAgICAgICB2YXIgYSA9IGpRdWVyeShlbCkuYXR0cihcInJlbFwiKTtcbiAgICAgICAgdmFyIGIgPSBhLnN1YnN0cmluZyhhLmluZGV4T2YoXCJodHRwXCIpLCBhLmxhc3RJbmRleE9mKFwiJ1wiKSk7IC8vIEFUVEVOVElPTiA6IHN1cHBvc2UgcXVlIHNtYWxsaW1hZ2UgZXN0IGVuIGZpbiBkJ2F0dHJpYnV0XG5cbiAgICAgICAgaWYoalF1ZXJ5KFwiI3pvb20tMSBpbWdcIikuYXR0cihcInNyY1wiKSA9PSBiKXtcbiAgICAgICAgICAgIGpRdWVyeShlbCkucGFyZW50cyhcImxpXCIpLmFkZENsYXNzKFwiY3VycmVudFwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy9ab29tIHN1ciBsJ2ltYWdlIGRlIGxhIHBhZ2UgcHJvZHVpdFxuICAgIGpRdWVyeSgnLmNsb3VkLXpvb20sIC5jbG91ZC16b29tLWdhbGxlcnknKS5DbG91ZFpvb20oKTtcblxuICAgIGpRdWVyeShcIi5tb3JlLXZpZXdzIGltZ1wiKS5iaW5kKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBqUXVlcnkodGhpcykucGFyZW50cyhcImxpXCIpLmFkZENsYXNzKFwiY3VycmVudFwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiY3VycmVudFwiKTtcbiAgICAgICAgdmFyIHVybCA9IGpRdWVyeSh0aGlzKS5hdHRyKFwic3JjXCIpO1xuICAgICAgICBqUXVlcnkodGhpcykucGFyZW50cyhcInVsXCIpLmZpbmQoXCJpbWdbc3JjPSdcIiArIHVybCArIFwiJ11cIikucGFyZW50cyhcImxpXCIpLmFkZENsYXNzKFwiY3VycmVudFwiKTtcbiAgICB9KTtcblxuICB9LFxuXG4gIGRlYnVnOiBmdW5jdGlvbih0KSB7XG4gICAgICBBcHAuZGVidWcodCk7XG4gIH1cblxufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9