var App={},$=jQuery;App={debug:function(e){console.log(e)}},jQuery(document).ready(function(e){App.Common.init(),App.Menu.init(),App.Home.init(),App.Product.init(),App.Cart.init()}),App.Cart={init:function(){jQuery("body").hasClass("checkout-cart-index")&&(this.debug("Cart : init start"),this.refreshCart(),this.debug("Cart : init end"))},refreshCart:function(){$(".btn-update").click(function(){$(this).addClass("refreshing"),$("#form-cart").submit()})},debug:function(e){App.debug(e)}},App.Common={init:function(){this.debug("Common : init start"),this.qtyUpdate(),this.debug("Common : init end")},qtyUpdate:function(){$("input.qty").click(function(){var e=this;e.focus(),e.setSelectionRange(0,999)})},debug:function(e){App.debug(e)}},App.Home={init:function(){jQuery("body").hasClass("cms-index-index")&&(this.debug("Home : init start"),this.homeCaroussel(),this.homeTabs(),this.debug("Home : init start"))},homeCaroussel:function(){$(".cms-home .slideshow").bxSlider({minSlides:1,maxSlides:1,slideWidth:1263,auto:!0,slideMargin:0})},homeTabs:function(){$(".product-grid-mea .category_name").appendTo(".tabs .titles"),$(".cms-home .tabs .titles a").click(function(e){e.preventDefault(),$(".cms-home .tabs .titles a").removeClass("current");var t=$(this).addClass("current").index();$(this).parent().parent().find("> *").slice(1).hide().eq(t).show()}).eq(0).click()},debug:function(e){App.debug(e)}},App.Menu={init:function(){this.debug("Menu : init start"),this.equalHeight(),this.debug("Menu : init end")},equalHeight:function(){var e;$("li.level0").mouseover(function(){var t=$(this),i=0;$("li.level1",t).each(function(e,t){$(t).height()>i&&(i=$(t).height())}).height(i),e=setInterval(function(){var e=0;$("li.level1",t).each(function(t,i){$(i).height()>e&&(e=$(i).height())}).height(e)},200)}).mouseout(function(){clearInterval(e)})},debug:function(e){App.debug(e)}},App.Product={init:function(){jQuery("body").hasClass("catalog-product-view")&&(this.debug("Product : init start"),this.productGallery(),this.mouseTrap(),this.upsellCarrousel(),this.commentLayer(),this.debug("Product : init start"))},mouseTrap:function(){$(".mousetrap").on("click",function(){var e=$(this).prev("a").attr("href"),i=$(".more-views li:not(.bx-clone)"),n=0;i.each(function(t,i){$(i).find("a[href='"+e+"']").attr("href")==e&&(n=t)}),$.fancybox(t,{helpers:{thumbs:{width:50,height:50}},index:n})})},upsellCarrousel:function(){$("#upsell-product-table > li").size()>4&&$("#upsell-product-table").bxSlider({minSlides:4,maxSlides:4,slideWidth:225,pager:!0,controls:!1,slideMargin:20,responsive:!1})},commentLayer:function(){if($(".add-my-review, .no-rating a").click(function(e){e.preventDefault(),$.fancybox($(".product-view .box-reviews .form-add"))}),$("#product-review-table .radio").each(function(){$(this).wrap("<span />")}).change(function(e){if($("#product-review-table span").removeClass("on"),this.checked){var t=this,i=!0;$("#product-review-table .radio").each(function(e,n){i&&($(this).parent().addClass("on"),t==n&&(i=!1))})}}),$("body").hasClass("catalog-product-view")&&location.search.length>0){var e=location.search.substring(1),t=JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}');void 0===t.p&&void 0===t.limit||(window.location="#customer-reviews")}},productGallery:function(){t=new Array,jQuery(".more-views li a").each(function(){t[t.length]=jQuery(this).attr("href")}),jQuery(".more-views li").length>6&&jQuery(".bxslider").bxSlider({minSlides:6,maxSlides:6,slideWidth:68,pager:!1,slideMargin:10}),jQuery(".more-views .bxslider a").each(function(e,t){var i=jQuery(t).attr("rel"),n=i.substring(i.indexOf("http"),i.lastIndexOf("'"));jQuery("#zoom-1 img").attr("src")==n&&jQuery(t).parents("li").addClass("current")}),jQuery(".cloud-zoom, .cloud-zoom-gallery").CloudZoom(),jQuery(".more-views img").bind("click",function(e){jQuery(this).parents("li").addClass("current").siblings().removeClass("current");var t=jQuery(this).attr("src");jQuery(this).parents("ul").find("img[src='"+t+"']").parents("li").addClass("current")})},debug:function(e){App.debug(e)}};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNhcnQuanMiLCJjb21tb24uanMiLCJob21lLmpzIiwibWVudS5qcyIsInByb2R1Y3QuanMiXSwibmFtZXMiOlsiQXBwIiwiJCIsImpRdWVyeSIsImRlYnVnIiwidCIsImNvbnNvbGUiLCJsb2ciLCJkb2N1bWVudCIsInJlYWR5IiwiQ29tbW9uIiwiaW5pdCIsIk1lbnUiLCJIb21lIiwiUHJvZHVjdCIsIkNhcnQiLCJoYXNDbGFzcyIsInRoaXMiLCJyZWZyZXNoQ2FydCIsImNsaWNrIiwiYWRkQ2xhc3MiLCJzdWJtaXQiLCJxdHlVcGRhdGUiLCJpbnB1dCIsImZvY3VzIiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJob21lQ2Fyb3Vzc2VsIiwiaG9tZVRhYnMiLCJieFNsaWRlciIsIm1pblNsaWRlcyIsIm1heFNsaWRlcyIsInNsaWRlV2lkdGgiLCJhdXRvIiwic2xpZGVNYXJnaW4iLCJhcHBlbmRUbyIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInJlbW92ZUNsYXNzIiwiaSIsImluZGV4IiwicGFyZW50IiwiZmluZCIsInNsaWNlIiwiaGlkZSIsImVxIiwic2hvdyIsImVxdWFsSGVpZ2h0IiwiaWQiLCJtb3VzZW92ZXIiLCJvIiwibWF4IiwiZWFjaCIsImVsZW1lbnQiLCJoZWlnaHQiLCJzZXRJbnRlcnZhbCIsIm1vdXNlb3V0IiwiY2xlYXJJbnRlcnZhbCIsInByb2R1Y3RHYWxsZXJ5IiwibW91c2VUcmFwIiwidXBzZWxsQ2Fycm91c2VsIiwiY29tbWVudExheWVyIiwib24iLCJocmVmIiwicHJldiIsImF0dHIiLCJsaSIsImlkeCIsImZhbmN5Ym94IiwiaGVscGVycyIsInRodW1icyIsIndpZHRoIiwic2l6ZSIsInBhZ2VyIiwiY29udHJvbHMiLCJyZXNwb25zaXZlIiwid3JhcCIsImNoYW5nZSIsImNoZWNrZWQiLCJ0ZXN0IiwibG9jYXRpb24iLCJzZWFyY2giLCJsZW5ndGgiLCJzdWJzdHJpbmciLCJ1cmxQYXJhbWV0ZXJzIiwiSlNPTiIsInBhcnNlIiwiZGVjb2RlVVJJIiwicmVwbGFjZSIsInVuZGVmaW5lZCIsInAiLCJsaW1pdCIsIndpbmRvdyIsIkFycmF5IiwiZWwiLCJhIiwiYiIsImluZGV4T2YiLCJsYXN0SW5kZXhPZiIsInBhcmVudHMiLCJDbG91ZFpvb20iLCJiaW5kIiwic2libGluZ3MiLCJ1cmwiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLFFBQ0FDLEVBQUFDLE1BRUFGLE1BRUFHLE1BQUEsU0FBQUMsR0FDQUMsUUFBQUMsSUFBQUYsS0FLQUYsT0FBQUssVUFBQUMsTUFBQSxTQUFBUCxHQUNBRCxJQUFBUyxPQUFBQyxPQUNBVixJQUFBVyxLQUFBRCxPQUNBVixJQUFBWSxLQUFBRixPQUNBVixJQUFBYSxRQUFBSCxPQUNBVixJQUFBYyxLQUFBSixTQ2RBVixJQUFBYyxNQUVBSixLQUFBLFdBRUFSLE9BQUEsUUFBQWEsU0FBQSx5QkFFQUMsS0FBQWIsTUFBQSxxQkFFQWEsS0FBQUMsY0FFQUQsS0FBQWIsTUFBQSxxQkFLQWMsWUFBQSxXQUNBaEIsRUFBQSxlQUFBaUIsTUFBQSxXQUNBakIsRUFBQWUsTUFBQUcsU0FBQSxjQUNBbEIsRUFBQSxjQUFBbUIsWUFJQWpCLE1BQUEsU0FBQUMsR0FDQUosSUFBQUcsTUFBQUMsS0NqQkFKLElBQUFTLFFBRUFDLEtBQUEsV0FFQU0sS0FBQWIsTUFBQSx1QkFDQWEsS0FBQUssWUFDQUwsS0FBQWIsTUFBQSxzQkFJQWtCLFVBQUEsV0FFQXBCLEVBQUEsYUFBQWlCLE1BQUEsV0FDQSxHQUFBSSxHQUFBTixJQUNBTSxHQUFBQyxRQUNBRCxFQUFBRSxrQkFBQSxFQUFBLFFBS0FyQixNQUFBLFNBQUFDLEdBQ0FKLElBQUFHLE1BQUFDLEtDM0JBSixJQUFBWSxNQUVBRixLQUFBLFdBRUFSLE9BQUEsUUFBQWEsU0FBQSxxQkFFQUMsS0FBQWIsTUFBQSxxQkFDQWEsS0FBQVMsZ0JBQ0FULEtBQUFVLFdBQ0FWLEtBQUFiLE1BQUEsdUJBSUFzQixjQUFBLFdBRUF4QixFQUFBLHdCQUFBMEIsVUFDQUMsVUFB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QUMsVUFBQU4sR0FBQU8sUUFBQSxLQUFBLE9BQUFBLFFBQUEsS0FBQSxPQUFBQSxRQUFBLEtBQUEsT0FBQSxLQUNBQyxVQUFBTCxFQUFBTSxHQUFBRCxTQUFBTCxFQUFBTyxRQUNBQyxPQUFBWixTQUFBLHVCQU1BdEIsZUFBQSxXQUVBcEQsRUFBQSxHQUFBdUYsT0FDQXpGLE9BQUEsb0JBQUFnRCxLQUFBLFdBQ0E5QyxFQUFBQSxFQUFBNEUsUUFBQTlFLE9BQUFjLE1BQUErQyxLQUFBLFVBR0E3RCxPQUFBLGtCQUFBOEUsT0FBQSxHQUVBOUUsT0FBQSxhQUFBeUIsVUFDQUMsVUFBQSxFQUNBQyxVQUFBLEVBQ0FDLFdBQUEsR0FDQXlDLE9BQUEsRUFDQXZDLFlBQUEsS0FLQTlCLE9BQUEsMkJBQUFnRCxLQUFBLFNBQUFlLEVBQUEyQixHQUNBLEdBQUFDLEdBQUEzRixPQUFBMEYsR0FBQTdCLEtBQUEsT0FDQStCLEVBQUFELEVBQUFaLFVBQUFZLEVBQUFFLFFBQUEsUUFBQUYsRUFBQUcsWUFBQSxLQUVBOUYsUUFBQSxlQUFBNkQsS0FBQSxRQUFBK0IsR0FDQTVGLE9BQUEwRixHQUFBSyxRQUFBLE1BQUE5RSxTQUFBLGFBS0FqQixPQUFBLG9DQUFBZ0csWUFFQWhHLE9BQUEsbUJBQUFpRyxLQUFBLFFBQUEsU0FBQWpFLEdBQ0FoQyxPQUFBYyxNQUFBaUYsUUFBQSxNQUFBOUUsU0FBQSxXQUFBaUYsV0FBQWhFLFlBQUEsVUFDQSxJQUFBaUUsR0FBQW5HLE9BQUFjLE1BQUErQyxLQUFBLE1BQ0E3RCxRQUFBYyxNQUFBaUYsUUFBQSxNQUFBekQsS0FBQSxZQUFBNkQsRUFBQSxNQUFBSixRQUFBLE1BQUE5RSxTQUFBLGNBS0FoQixNQUFBLFNBQUFDLEdBQ0FKLElBQUFHLE1BQUFDIiwiZmlsZSI6ImFsbC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBBcHAgPSB7fTtcbnZhciAkID0galF1ZXJ5O1xuXG5BcHAgPSB7XG5cbiAgICBkZWJ1ZzogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgY29uc29sZS5sb2codCk7XG4gICAgfVxuXG59XG5cbmpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oJCkge1xuICAgIEFwcC5Db21tb24uaW5pdCgpO1xuICAgIEFwcC5NZW51LmluaXQoKTtcbiAgICBBcHAuSG9tZS5pbml0KCk7XG4gICAgQXBwLlByb2R1Y3QuaW5pdCgpO1xuICAgIEFwcC5DYXJ0LmluaXQoKTtcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5BcHAuQ2FydCA9IHtcblxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIGlmKCAhalF1ZXJ5KFwiYm9keVwiKS5oYXNDbGFzcyhcImNoZWNrb3V0LWNhcnQtaW5kZXhcIikgKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5kZWJ1ZyhcIkNhcnQgOiBpbml0IHN0YXJ0XCIpO1xuXG4gICAgICAgIHRoaXMucmVmcmVzaENhcnQoKTtcblxuICAgICAgICB0aGlzLmRlYnVnKFwiQ2FydCA6IGluaXQgZW5kXCIpO1xuXG4gICAgfSxcblxuICAgIC8vIENhcnQgdXBkYXRlXG4gICAgcmVmcmVzaENhcnQgOiBmdW5jdGlvbigpIHtcbiAgICAgICQoXCIuYnRuLXVwZGF0ZVwiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwicmVmcmVzaGluZ1wiKTtcbiAgICAgICAgICAkKFwiI2Zvcm0tY2FydFwiKS5zdWJtaXQoKTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBkZWJ1ZzogZnVuY3Rpb24odCkge1xuICAgICAgICBBcHAuZGVidWcodCk7XG4gICAgfVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLypcbiAqIFBsdWdpbiBqUXVlcnkgZCdpbml0aWxpc2F0aW9uIGRlcyB2YWxldXJzIHBhciBkw6lmYXV0IHN1ciBsZXMgY2hhbXBzIHRleHRlXG4gKiBBdSBjbGljLCBzaSBsZSBjaGFtcCBjb250aWVudCBsYSB2YWxldXIgcGFyIGTDqWZhdXQsIGNlbHVpLWNpIGVzdCB2aWTDqS5cbiAqIFF1YW5kIG9uIHF1aXR0ZSBsZSBjaGFtcCwgc2kgY2VsdWktY2kgZXN0IHZpZGUsIG9uIHJlbWV0IGxhIHZhbGV1ciBwYXIgZMOpZmF1dC5cbiAqL1xuXG5BcHAuQ29tbW9uID0ge1xuXG4gIGluaXQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICB0aGlzLmRlYnVnKFwiQ29tbW9uIDogaW5pdCBzdGFydFwiKTtcbiAgICAgIHRoaXMucXR5VXBkYXRlKCk7XG4gICAgICB0aGlzLmRlYnVnKFwiQ29tbW9uIDogaW5pdCBlbmRcIik7XG5cbiAgfSxcblxuICBxdHlVcGRhdGU6IGZ1bmN0aW9uKCkge1xuXG4gICAgJChcImlucHV0LnF0eVwiKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgdmFyIGlucHV0ID0gdGhpcztcbiAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgICBpbnB1dC5zZXRTZWxlY3Rpb25SYW5nZSgwLDk5OSk7XG4gICAgfSk7XG5cbiAgfSxcblxuICBkZWJ1ZzogZnVuY3Rpb24odCkge1xuICAgICAgQXBwLmRlYnVnKHQpO1xuICB9XG5cbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuQXBwLkhvbWUgPSB7XG5cbiAgaW5pdDogZnVuY3Rpb24oKSB7XG5cbiAgICBpZiggIWpRdWVyeShcImJvZHlcIikuaGFzQ2xhc3MoXCJjbXMtaW5kZXgtaW5kZXhcIikgKSByZXR1cm47XG5cbiAgICB0aGlzLmRlYnVnKFwiSG9tZSA6IGluaXQgc3RhcnRcIik7XG4gICAgdGhpcy5ob21lQ2Fyb3Vzc2VsKCk7XG4gICAgdGhpcy5ob21lVGFicygpO1xuICAgIHRoaXMuZGVidWcoXCJIb21lIDogaW5pdCBzdGFydFwiKTtcblxuICB9LFxuXG4gIGhvbWVDYXJvdXNzZWw6IGZ1bmN0aW9uKCkge1xuXG4gIFx0JCgnLmNtcy1ob21lIC5zbGlkZXNob3cnKS5ieFNsaWRlcih7XG4gIFx0XHRtaW5TbGlkZXM6IDEsXG4gIFx0XHRtYXhTbGlkZXM6IDEsXG4gIFx0XHRzbGlkZVdpZHRoOiAxMjYzLFxuICBcdFx0YXV0bzogdHJ1ZSxcbiAgXHRcdHNsaWRlTWFyZ2luOiAwXG4gIFx0fSk7XG5cbiAgfSxcblxuICBob21lVGFiczogZnVuY3Rpb24oKSB7XG5cbiAgICAkKFwiLnByb2R1Y3QtZ3JpZC1tZWEgLmNhdGVnb3J5X25hbWVcIikuYXBwZW5kVG8oXCIudGFicyAudGl0bGVzXCIpO1xuICBcdCQoXCIuY21zLWhvbWUgLnRhYnMgLnRpdGxlcyBhXCIpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgXHRcdGUucHJldmVudERlZmF1bHQoKTtcbiAgXHRcdCQoXCIuY21zLWhvbWUgLnRhYnMgLnRpdGxlcyBhXCIpLnJlbW92ZUNsYXNzKFwiY3VycmVudFwiKTtcbiAgXHRcdHZhciBpID0gJCh0aGlzKS5hZGRDbGFzcyhcImN1cnJlbnRcIikuaW5kZXgoKTtcbiAgXHRcdCQodGhpcykucGFyZW50KCkucGFyZW50KCkuZmluZChcIj4gKlwiKS5zbGljZSgxKS5oaWRlKCkuZXEoaSkuc2hvdygpO1xuICBcdH0pLmVxKDApLmNsaWNrKCk7XG5cbiAgfSxcblxuICBkZWJ1ZzogZnVuY3Rpb24odCkge1xuICAgICAgQXBwLmRlYnVnKHQpO1xuICB9XG5cbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuQXBwLk1lbnUgPSB7XG5cbiAgaW5pdDogZnVuY3Rpb24oKSB7XG5cbiAgICAgIHRoaXMuZGVidWcoXCJNZW51IDogaW5pdCBzdGFydFwiKTtcblxuICAgICAgdGhpcy5lcXVhbEhlaWdodCgpO1xuXG4gICAgICB0aGlzLmRlYnVnKFwiTWVudSA6IGluaXQgZW5kXCIpO1xuXG4gIH0sXG5cbiAgZXF1YWxIZWlnaHQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIGlkO1xuICBcdCQoXCJsaS5sZXZlbDBcIikubW91c2VvdmVyKGZ1bmN0aW9uKCkge1xuICBcdFx0dmFyIG8gPSAkKHRoaXMpO1xuXG4gIFx0XHR2YXIgbWF4ID0gMDtcbiAgXHRcdCQoXCJsaS5sZXZlbDFcIiwgbykuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICBcdFx0XHRpZigkKGVsZW1lbnQpLmhlaWdodCgpID4gbWF4KSB7XG4gIFx0XHRcdFx0bWF4ID0gJChlbGVtZW50KS5oZWlnaHQoKTtcbiAgXHRcdFx0fVxuICBcdFx0fSkuaGVpZ2h0KG1heCk7XG5cbiAgXHRcdGlkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gIFx0XHRcdHZhciBtYXggPSAwO1xuICBcdFx0XHQkKFwibGkubGV2ZWwxXCIsIG8pLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpIHtcbiAgXHRcdFx0XHRpZigkKGVsZW1lbnQpLmhlaWdodCgpID4gbWF4KSB7XG4gIFx0XHRcdFx0XHRtYXggPSAkKGVsZW1lbnQpLmhlaWdodCgpO1xuICBcdFx0XHRcdH1cbiAgXHRcdFx0fSkuaGVpZ2h0KG1heCk7XG4gIFx0XHR9LCAyMDApO1xuICBcdH0pLm1vdXNlb3V0KGZ1bmN0aW9uKCkge1xuICBcdFx0Y2xlYXJJbnRlcnZhbChpZCk7XG4gIFx0fSk7XG5cbiAgfSxcblxuICBkZWJ1ZzogZnVuY3Rpb24odCkge1xuICAgICAgQXBwLmRlYnVnKHQpO1xuICB9XG5cbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuQXBwLlByb2R1Y3QgPSB7XG5cbiAgaW5pdDogZnVuY3Rpb24oKXtcblxuICAgIGlmKCAhalF1ZXJ5KFwiYm9keVwiKS5oYXNDbGFzcyhcImNhdGFsb2ctcHJvZHVjdC12aWV3XCIpICkgcmV0dXJuO1xuXG4gICAgdGhpcy5kZWJ1ZyhcIlByb2R1Y3QgOiBpbml0IHN0YXJ0XCIpO1xuICAgIHRoaXMucHJvZHVjdEdhbGxlcnkoKTtcbiAgICB0aGlzLm1vdXNlVHJhcCgpO1xuICAgIHRoaXMudXBzZWxsQ2Fycm91c2VsKCk7XG4gICAgdGhpcy5jb21tZW50TGF5ZXIoKTtcbiAgICB0aGlzLmRlYnVnKFwiUHJvZHVjdCA6IGluaXQgc3RhcnRcIik7XG5cbiAgfSxcblxuICBtb3VzZVRyYXA6IGZ1bmN0aW9uKCkge1xuXG4gICAgJChcIi5tb3VzZXRyYXBcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgXHRcdHZhciBocmVmID0gJCh0aGlzKS5wcmV2KFwiYVwiKS5hdHRyKFwiaHJlZlwiKTtcbiAgXHRcdHZhciBsaSA9ICQoXCIubW9yZS12aWV3cyBsaTpub3QoLmJ4LWNsb25lKVwiKTtcbiAgXHRcdHZhciBpZHggPSAwO1xuICBcdFx0bGkuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICBcdFx0XHRpZigkKGVsZW1lbnQpLmZpbmQoXCJhW2hyZWY9J1wiICsgaHJlZiArIFwiJ11cIikuYXR0cihcImhyZWZcIikgPT0gaHJlZikge1xuICBcdFx0XHRcdGlkeCA9IGluZGV4O1xuICBcdFx0XHR9XG4gIFx0XHR9KTtcbiAgXHRcdCQuZmFuY3lib3godCwge1xuXHRcdCAgICBoZWxwZXJzOiAge1xuXHQgICAgICAgIHRodW1icyA6IHtcbiAgICAgICAgICAgIHdpZHRoOiA1MCxcbiAgICAgICAgICAgIGhlaWdodDogNTBcblx0ICAgICAgICB9XG5cdFx0ICAgIH0sXG5cdFx0ICAgIGluZGV4OiBpZHhcbiAgXHRcdH0pO1xuICBcdH0pO1xuXG4gIH0sXG5cbiAgdXBzZWxsQ2Fycm91c2VsOiBmdW5jdGlvbigpIHtcblxuICAgIGlmICgkKFwiI3Vwc2VsbC1wcm9kdWN0LXRhYmxlID4gbGlcIikuc2l6ZSgpID4gNCkge1xuICBcdFx0JCgnI3Vwc2VsbC1wcm9kdWN0LXRhYmxlJykuYnhTbGlkZXIoe1xuICBcdFx0XHRtaW5TbGlkZXM6IDQsXG4gIFx0XHRcdG1heFNsaWRlczogNCxcbiAgXHRcdFx0c2xpZGVXaWR0aDogMjI1LFxuICBcdFx0XHRwYWdlcjogdHJ1ZSxcbiAgXHRcdFx0Y29udHJvbHM6IGZhbHNlLFxuICBcdFx0XHRzbGlkZU1hcmdpbjogMjAsXG4gIFx0XHRcdHJlc3BvbnNpdmU6IGZhbHNlXG4gIFx0XHR9KTtcbiAgXHR9XG5cbiAgfSxcblxuICBjb21tZW50TGF5ZXI6IGZ1bmN0aW9uKCkge1xuXG4gICAgJChcIi5hZGQtbXktcmV2aWV3LCAubm8tcmF0aW5nIGFcIikuY2xpY2soZnVuY3Rpb24oZSkge1xuICBcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBcdFx0JC5mYW5jeWJveCgkKFwiLnByb2R1Y3QtdmlldyAuYm94LXJldmlld3MgLmZvcm0tYWRkXCIpKTtcbiAgXHR9KTtcblxuICAgICQoXCIjcHJvZHVjdC1yZXZpZXctdGFibGUgLnJhZGlvXCIpLmVhY2goZnVuY3Rpb24oKSB7XG4gIFx0XHQkKHRoaXMpLndyYXAoXCI8c3BhbiAvPlwiKTtcbiAgXHR9KS5jaGFuZ2UoZnVuY3Rpb24oZSkge1xuICBcdFx0JChcIiNwcm9kdWN0LXJldmlldy10YWJsZSBzcGFuXCIpLnJlbW92ZUNsYXNzKFwib25cIik7XG4gIFx0XHRpZih0aGlzLmNoZWNrZWQpIHtcbiAgXHRcdFx0dmFyIG8gPSB0aGlzO1xuICBcdFx0XHR2YXIgdGVzdCA9IHRydWU7XG4gIFx0XHRcdCQoXCIjcHJvZHVjdC1yZXZpZXctdGFibGUgLnJhZGlvXCIpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpIHtcbiAgXHRcdFx0XHRpZih0ZXN0KSB7XG4gIFx0XHRcdFx0XHQkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKFwib25cIik7XG4gIFx0XHRcdFx0XHRpZihvID09IGVsZW1lbnQpIHtcbiAgXHRcdFx0XHRcdFx0dGVzdCA9IGZhbHNlO1xuICBcdFx0XHRcdFx0fVxuICBcdFx0XHRcdH1cbiAgXHRcdFx0fSk7XG4gIFx0XHR9XG4gIFx0fSk7XG5cbiAgICBpZigkKFwiYm9keVwiKS5oYXNDbGFzcyhcImNhdGFsb2ctcHJvZHVjdC12aWV3XCIpICYmIGxvY2F0aW9uLnNlYXJjaC5sZW5ndGggPiAwKSB7XG4gIFx0XHR2YXIgc2VhcmNoID0gbG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKTtcbiAgXHRcdHZhciB1cmxQYXJhbWV0ZXJzID0gSlNPTi5wYXJzZSgne1wiJyArIGRlY29kZVVSSShzZWFyY2gpLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKS5yZXBsYWNlKC8mL2csICdcIixcIicpLnJlcGxhY2UoLz0vZywnXCI6XCInKSArICdcIn0nKTtcbiAgXHRcdGlmKHVybFBhcmFtZXRlcnMucCAhPT0gdW5kZWZpbmVkIHx8IHVybFBhcmFtZXRlcnMubGltaXQgIT09IHVuZGVmaW5lZCkge1xuICBcdFx0XHR3aW5kb3cubG9jYXRpb24gPSBcIiNjdXN0b21lci1yZXZpZXdzXCI7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIH0sXG5cbiAgcHJvZHVjdEdhbGxlcnk6IGZ1bmN0aW9uKCkge1xuXG4gICAgdCA9IG5ldyBBcnJheSgpO1xuICAgIGpRdWVyeShcIi5tb3JlLXZpZXdzIGxpIGFcIikuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgdFt0Lmxlbmd0aF0gPSBqUXVlcnkodGhpcykuYXR0cihcImhyZWZcIik7XG4gICAgfSk7XG5cbiAgICBpZiAoalF1ZXJ5KFwiLm1vcmUtdmlld3MgbGlcIikubGVuZ3RoID4gNikge1xuICAgICAgICAvKiBPbiBpbml0aWFsaXplIGJ4U2xpZGVyIHNpIG9uIGVzdCBzdXIgbGEgcGFnZSBwcm9kdWl0ICovXG4gICAgICAgIGpRdWVyeSgnLmJ4c2xpZGVyJykuYnhTbGlkZXIoe1xuICAgICAgICAgICAgbWluU2xpZGVzOiA2LFxuICAgICAgICAgICAgbWF4U2xpZGVzOiA2LFxuICAgICAgICAgICAgc2xpZGVXaWR0aDogNjgsXG4gICAgICAgICAgICBwYWdlcjogZmFsc2UsXG4gICAgICAgICAgICBzbGlkZU1hcmdpbjogMTBcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyogUGVybWV0IGRlIG1ldHRyZSBsJ8OpdGF0IGN1cnJlbnQgc3VyIGxhIGJvbm5uZSBtaW5pYXR1cmUgYXUgY2hhcmdlbWVudCAqL1xuICAgIGpRdWVyeShcIi5tb3JlLXZpZXdzIC5ieHNsaWRlciBhXCIpLmVhY2goZnVuY3Rpb24oaWR4LGVsKXtcbiAgICAgICAgdmFyIGEgPSBqUXVlcnkoZWwpLmF0dHIoXCJyZWxcIik7XG4gICAgICAgIHZhciBiID0gYS5zdWJzdHJpbmcoYS5pbmRleE9mKFwiaHR0cFwiKSwgYS5sYXN0SW5kZXhPZihcIidcIikpOyAvLyBBVFRFTlRJT04gOiBzdXBwb3NlIHF1ZSBzbWFsbGltYWdlIGVzdCBlbiBmaW4gZCdhdHRyaWJ1dFxuXG4gICAgICAgIGlmKGpRdWVyeShcIiN6b29tLTEgaW1nXCIpLmF0dHIoXCJzcmNcIikgPT0gYil7XG4gICAgICAgICAgICBqUXVlcnkoZWwpLnBhcmVudHMoXCJsaVwiKS5hZGRDbGFzcyhcImN1cnJlbnRcIik7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vWm9vbSBzdXIgbCdpbWFnZSBkZSBsYSBwYWdlIHByb2R1aXRcbiAgICBqUXVlcnkoJy5jbG91ZC16b29tLCAuY2xvdWQtem9vbS1nYWxsZXJ5JykuQ2xvdWRab29tKCk7XG5cbiAgICBqUXVlcnkoXCIubW9yZS12aWV3cyBpbWdcIikuYmluZChcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgalF1ZXJ5KHRoaXMpLnBhcmVudHMoXCJsaVwiKS5hZGRDbGFzcyhcImN1cnJlbnRcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImN1cnJlbnRcIik7XG4gICAgICAgIHZhciB1cmwgPSBqUXVlcnkodGhpcykuYXR0cihcInNyY1wiKTtcbiAgICAgICAgalF1ZXJ5KHRoaXMpLnBhcmVudHMoXCJ1bFwiKS5maW5kKFwiaW1nW3NyYz0nXCIgKyB1cmwgKyBcIiddXCIpLnBhcmVudHMoXCJsaVwiKS5hZGRDbGFzcyhcImN1cnJlbnRcIik7XG4gICAgfSk7XG5cbiAgfSxcblxuICBkZWJ1ZzogZnVuY3Rpb24odCkge1xuICAgICAgQXBwLmRlYnVnKHQpO1xuICB9XG5cbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
