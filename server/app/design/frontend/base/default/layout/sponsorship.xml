<?xml version="1.0"?>
<!--
/**
 * @category   Addonline
 * @package    Addonline_Sponsorship
 * @author     Addonline
 * @license    http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */
 -->
<layout version="0.1.0">
    <!-- Déclaration du template de l'index -->
    <sponsorship_index_index>
        <update handle="customer_account"/>
        <reference name="content">
            <block type="sponsorship/sponsorship" name="sponsorship" template="sponsorship/sponsorship.phtml" />
        </reference>
    </sponsorship_index_index>
    
    <!-- Déclaration du template OpenInviter -->    
    <sponsorship_openinviter_index>
    	<reference name="root">
    		<action method="setTemplate"><template>page/empty.phtml</template></action>
    	</reference>
        <reference name="content">
            <block type="sponsorship/openinviter" name="openinviter" template="sponsorship/openinviter.phtml" />
        </reference>
    </sponsorship_openinviter_index>
    <sponsorship_openinviter_import>
    	<reference name="root">
    		<action method="setTemplate"><template>page/empty.phtml</template></action>
    	</reference>
        <reference name="content">
            <block type="sponsorship/openinviter" name="openinviter" template="sponsorship/openinviterimport.phtml" />
        </reference>
    </sponsorship_openinviter_import>
    
    <!-- Déclaration du block détail des parrainage -->
    <sponsorship_sponsor_detail>
        <update handle="customer_account"/>
        <!-- Ajout du css pour table_orderer -->
        <reference name="head">
            <action method="addCss">
                <link>css/tableorderer.css</link>
            </action>
            <action method="addJs">
                <link>tableorderer/table_orderer.js</link>
            </action>
        </reference>
        <reference name="content">
            <block type="sponsorship/customer_account_pointsDetail" name="sponsorship_customer_detail" template="sponsorship/customer/account/sponsoringdetail.phtml"/>
        </reference>
    </sponsorship_sponsor_detail>
    
    <!-- Déclaration du block pour la relance des filleuls -->
    <sponsorship_boost_index>
        <update handle="customer_account"/>
        <reference name="content">
            <block type="sponsorship/customer_form_boost" name="sponsorship_customer_boost" template="sponsorship/customer/form/boost.phtml"/>
        </reference>
    </sponsorship_boost_index>
    
    <!-- Remplacement de dashboard.phtml pour ajouter un block
    	Déclaration d'un block supplémentaire -->
    <customer_account_index>
		<reference name="customer_account_dashboard">
			<action method="setTemplate">
				<template>sponsorship/customer/account/dashboard.phtml</template>
			</action>
			<block type="sponsorship/customer_account_pointsDetail" name="customer_account_sponsoring" as="sponsoring" template="sponsorship/customer/account/dashboard/sponsoring.phtml"/>			
		</reference>
	</customer_account_index>
	
    <!-- Ajout d'un lien vers le détail des points -->
	<customer_account>
		<reference name="customer_account_navigation">
                <action ifconfig="sponsorship/sponsor/sponsor_enabled" method="addLink" translate="label" module="sponsorship"><name>sponsor_detail</name><path>sponsorship/sponsor/detail</path><label>Sponsorship</label></action>
        </reference>
	</customer_account>
	
    <!-- Remplacement de register.phtml pour afficher email de la session -->
	<customer_account_create>
        <reference name="customer_form_register">
        	<action method="setTemplate">
				<template>sponsorship/customer/form/register.phtml</template>
			</action>
        </reference>
    </customer_account_create>
</layout> 