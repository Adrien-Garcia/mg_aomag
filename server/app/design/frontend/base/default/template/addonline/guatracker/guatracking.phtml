<?php /** */?>

<?php if($this->isActive()): ?>
    <!--Addonline GUA Tracking Section start -->
    <script type="text/javascript">
    jQuery(document).ready(function() {
        <?php foreach($this->getConfigurationArray() as $config): 
            $aConfig = explode(';',$config);         
        
            for($i=0;$i<5;$i++){
                //On remplit les champs du tableau non prévu
                if(!isset($aConfig[$i]))$aConfig[$i]='';
                //On échappe les quotes
                $aConfig[$i] = str_replace("'","\'",$aConfig[$i]);
            }                                                
        
            if($aConfig[1] == 'event'):?>            
                jQuery(document).on("click","<?php echo $aConfig[0]; ?>", function(e) {
    
        			var lid = jQuery(this).attr("id");
        			
        			// on determine le label qu'on va envoyer à ga
        			var lelabel = jQuery(this).attr("title");
        			if(lelabel == undefined && jQuery(this).attr("src")) {
        				lids = jQuery(this).attr("src").split("/");
        				if (lids instanceof Array) {
        					lelabel = lids[lids.length - 1];
        				}
        			}
        			
        			if(lelabel == undefined) { lelabel == jQuery(this).attr("src"); }
    
        			ga('send', '<?php echo $aConfig[1]; ?>', '<?php echo $aConfig[2]; ?>', '<?php echo rtrim($aConfig[3]); ?>', lelabel);
    
        		});
            <?php endif; ?>
            
            <?php if($aConfig[1] == 'pageview'):?>
            jQuery(document).on("click","<?php echo $aConfig[0]; ?>", function(e) {                    			
    			ga('send', '<?php echo $aConfig[1]; ?>', '<?php echo $aConfig[2]; ?>', '<?php echo rtrim($aConfig[3]); ?>');
    		});
            
            <?php endif; ?>
        <?php endforeach; ?>
    });
    </script>
    <?php echo $this->getChildHtml(); ?>
    <!--Addonline GUA Tracking Section end -->
<?php endif; ?>