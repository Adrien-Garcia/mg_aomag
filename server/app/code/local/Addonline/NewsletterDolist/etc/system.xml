<?xml version="1.0"?>
<config>
	<tabs>
        <addonline translate="label">
            <label>Addonline config</label>
            <sort_order>201</sort_order>
        </addonline>
    </tabs> 
	<sections>
		<newsletter>
          	<groups>
                <dolist translate="label" module="newsletterdolist">
                    <label>Paramétrage Dolist (Géniemailing)</label>
                                                                                       
                    <frontend_type>text</frontend_type>
                    <sort_order>2</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>     		
					<fields>	
						<active translate="label" module="newsletterdolist">
							<label>Activer Dolist</label>
							<frontend_type>select</frontend_type>
                            <source_model>adminhtml/system_config_source_yesno</source_model>
							<sort_order>10</sort_order>
							<show_in_default>1</show_in_default>
							<show_in_website>1</show_in_website>
							<show_in_store>1</show_in_store>
						</active>	
						<dolistid translate="label" module="newsletterdolist">
							<label>Identifiant Dolist (do_ListId)</label>
							<frontend_type>text</frontend_type>
							<sort_order>20</sort_order>
							<show_in_default>1</show_in_default>
							<show_in_website>1</show_in_website>
							<show_in_store>1</show_in_store>
						</dolistid>		
						<subscribe_form_id translate="label" module="newsletterdolist">
							<label>Identifiant du formulaire d'inscription (do_IdSubscribe)</label>
							<frontend_type>text</frontend_type>
							<sort_order>30</sort_order>
							<show_in_default>1</show_in_default>
							<show_in_website>1</show_in_website>
							<show_in_store>1</show_in_store>
						</subscribe_form_id>		
						<subscribe_emailfield translate="label" module="newsletterdolist">
							<label>Nom du champ email dans le formulaire d'inscription </label>
							<frontend_type>text</frontend_type>
							<sort_order>40</sort_order>
							<show_in_default>1</show_in_default>
							<show_in_website>1</show_in_website>
							<show_in_store>1</show_in_store>
						</subscribe_emailfield>
                        <subscribe_form translate="label" module="newsletterdolist">
                            <label>Formulaire d'inscription</label>
                            <comment>Copier / coller ici le 'code à insérer sur votre site' de DoList</comment>
                            <frontend_type>textarea</frontend_type>
                            <sort_order>45</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </subscribe_form>
						<unsubscribe_form_id translate="label" module="newsletterdolist">
							<label>Identifiant du formulaire de désinscription (do_IdUnsubscribe)</label>
							<frontend_type>text</frontend_type>
							<sort_order>50</sort_order>
							<show_in_default>1</show_in_default>
							<show_in_website>1</show_in_website>
							<show_in_store>1</show_in_store>
						</unsubscribe_form_id>		
						<unsubscribe_emailfield translate="label" module="newsletterdolist">
							<label>Nom du champ email dans le formulaire de désinscription </label>
							<frontend_type>text</frontend_type>
							<sort_order>60</sort_order>
							<show_in_default>1</show_in_default>
							<show_in_website>1</show_in_website>
							<show_in_store>1</show_in_store>
						</unsubscribe_emailfield>
					</fields>	
				</dolist>
				
			</groups>
		</newsletter>
		<newsletterdolist translate="label">
			<label>newsletterdolist</label>
			<tab>addonline</tab>
			<frontend_type>text</frontend_type>
			<sort_order>100</sort_order>
			<show_in_default>1</show_in_default>
			<show_in_website>1</show_in_website>
			<show_in_store>1</show_in_store>
          	<groups>
                <licence translate="label">
                    <label>Licence</label>
                                                                                       
                                        
                    <frontend_type>text</frontend_type>
                    <sort_order>1</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>     		
					<fields>	
						<serial translate="label">
							<label>Serial</label>
							<frontend_type>text</frontend_type>
							<sort_order>1</sort_order>
							<show_in_default>1</show_in_default>
							<show_in_website>1</show_in_website>
							<show_in_store>1</show_in_store>
						</serial>		
						<generator>
							<label>Générer la clé</label>
							<frontend_model>aomagento/adminhtml_system_config_form_field_keygeneration</frontend_model>
							<comment>
							Entrer le nom de domaine ci-dessus
						    <![CDATA[
						        <script type="text/javascript">
						        	var module_name = $$('.content-header h3').first().innerHTML;
						        	var is_aomagento = $("is_aomagento").getValue();
						        	if(is_aomagento == 0) {
						        		$("row_"+module_name+"_licence_generator").hide();
						        	} else {
						        		$("row_"+module_name+"_licence_generator").show();
						        	}
						        	
						            Event.observe('generate_key', 'click', function() {
						        		var hostname = $("hostname").getValue();
						                new Ajax.Request('/aomagento/generation/getlicence', {
											method:'get',
											parameters : {hostname : hostname, module: "NewsletterDolist"},
											onSuccess: function(data) {
												$("key_generated").update(data.responseText);
											}
										});
						            })
						        </script>
						    ]]>
						    </comment>
							<sort_order>2</sort_order>
							<show_in_default>1</show_in_default>
							<show_in_website>1</show_in_website>
							<show_in_store>1</show_in_store>
						</generator>						
					</fields>						
				</licence>				                
			</groups>
		</newsletterdolist>
	</sections>
</config>